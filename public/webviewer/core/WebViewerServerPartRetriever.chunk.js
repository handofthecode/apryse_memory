/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{564:function(xa,ta,f){function qa(){return!1}function na(aa,y,z){if(!(y in w))return!0;y=w[y];for(var x=0;x<y.length;x++){var fa=aa;var ea=y[x];var ma=z;if(ea.name in fa){var ka="",ia=!1;fa=fa[ea.name];switch(ea.type){case "s":ka="String";ia=Object(la.isString)(fa);break;case "a":ka="Array";ia=Object(la.isArray)(fa);break;case "n":ka="Number";ia=Object(la.isNumber)(fa)&&Object(la.isFinite)(fa);break;case "o":ka="Object",ia=
Object(la.isObject)(fa)&&!Object(la.isArray)(fa)}ia||ma.reject('Expected response field "'+ea.name+'" to have type '+ka);ea=ia}else ma.reject('Response missing field "'+ea.name+'"'),ea=!1;if(!ea)return!1}return!0}function oa(aa){for(var y=0,z=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];y<z.length;y++){var x=z[y],fa=x;x=x.charAt(0).toUpperCase()+x.slice(1);aa[fa]&&(Object.defineProperty(aa,x,Object.getOwnPropertyDescriptor(aa,
fa)),delete aa[fa])}return aa}f.r(ta);var ja=f(0),la=f(1);f.n(la);var ha=f(3);xa=f(55);var ca=f(33),ba=f(582),r=f(116),h=f(474),b=f(50),a=f(204),n=function(){function aa(){this.request=this.result=null;this.state=0;var y=this;y.promise=new Promise(function(z,x){y.resolve=function(){if(0===y.state||4===y.state)y.state=1,y.result=arguments[0],z.apply(null,arguments)};y.reject=function(){if(0===y.state||4===y.state)y.state=2,x.apply(null,arguments)}})}aa.prototype.Yw=function(){return 1===(this.state&
1)};aa.prototype.Iua=function(){return 2===(this.state&2)};aa.prototype.Ok=function(){return!this.Iua()&&!this.Yw()};aa.prototype.dua=function(){return 4===(this.state&4)};aa.prototype.qU=function(){this.state|=4};return aa}(),e=function(){function aa(){this.Gw={};this.sc=[]}aa.prototype.pop=function(){var y=this.sc.pop();this.Gw[y.key]=void 0;return y};aa.prototype.push=function(y,z){z={key:y,data:z};this.sc.push(z);this.Gw[y]=z.data};aa.prototype.contains=function(y){return!!this.Gw[y]};aa.prototype.get=
function(y){return this.Gw[y]};aa.prototype.set=function(y,z){var x=this;this.Gw[y]=z;this.sc.forEach(function(fa,ea){fa.key===y&&(x.sc[ea]=fa)})};aa.prototype.remove=function(y){var z=this;this.Gw[y]=void 0;this.sc.forEach(function(x,fa){x.key===y&&z.sc.splice(fa,1)})};aa.prototype.length=function(){return this.sc.length};return aa}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",
type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};f=function(){function aa(y,z,x){var fa=this;this.ZU=this.I0=!1;this.Ji=this.sL=this.Ay=this.Hf=this.Rz=this.nr=this.Qz=this.Ap=null;this.Zo=new n;this.Ms=
new n;this.HG=!1;this.Sg=this.Mf=this.Nf=this.Gg=null;this.oh=[];this.zH=[];this.cache={};this.timeStamp=0;this.Ci=[];this.Yk=[];this.wP=null;this.t0=!1;this.w9=this.id=null;this.fS=this.Q3=qa;this.Jj=0;this.XQ=!1;this.h6=1;this.Uk={};this.uv=0;this.Gx=new e;z.endsWith("/")||(z+="/");x=x||{};this.I0=x.disableWebsockets||!1;this.ZU=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(b.b)("wvsQueryParameters",x.customQueryParameters);z.endsWith("blackbox/")||(z+="blackbox/");this.Ap=x.uploadData||
null;this.Ay=x.uriData||null;this.Qz=x.cacheKey||null;if(this.nr=x.officeOptions||null)this.nr=oa(this.nr);this.Hf=x.rasterizerOptions||null;this.Rz=x.cadOptions||null;this.fg=z;this.XO=y;this.Ar(!0);this.Mv=(new ba.a(z,null,this.rj())).hpa(!this.I0,function(ea){fa.Fwa(ea)},function(){return null},function(){fa.HG=!1},function(){fa.rAa()})}aa.prototype.rla=function(){var y=this;return new Promise(function(z,x){var fa=new XMLHttpRequest;fa.open("GET",y.fg+"ck");fa.withCredentials=y.rj();fa.onreadystatechange=
function(){fa.readyState===XMLHttpRequest.DONE&&(200===fa.status?z():x())};fa.send()})};aa.prototype.mCa=function(y){this.Q3=y||qa;this.fS=qa};aa.prototype.yja=function(){this.P8();return this.Mv.Zs(!0)};aa.prototype.P8=function(){Object(ja.b)(this,void 0,void 0,function(){return Object(ja.d)(this,function(y){switch(y.label){case 0:return this.Ms=new n,this.Zo=new n,this.HG=!1,this.id=null,this.t0=!1,[4,this.rla()];case 1:return y.ba(),[2]}})})};aa.prototype.rAa=function(){this.Q3();this.P8();this.Gg&&
(this.Gg.Ok()?this.Oi(this.Gg.request):this.Gg.Yw()&&this.fS(this.Gg.result.url,"pdf")&&(this.Gg=null,this.N8()));this.Sg&&this.Sg.Ok()&&this.Oi(this.Sg.request);this.Nf&&this.Nf.Ok()?this.Oi(this.Nf.request):this.Mf&&this.Mf.Ok()&&this.z3();var y;for(y=0;y<this.Ci.length;y++)this.Ci[y]&&(this.Ci[y].Ok()?this.Oi(this.Ci[y].request):this.Ci[y].Yw()&&this.fS(this.Ci[y].result.url,"image")&&(this.Ci[y]=null,this.jK(Object(la.uniqueId)(),y)));for(y=0;y<this.Yk.length;y++)this.Yk[y]&&this.Yk[y].Ok()&&
!this.Yk[y].dua()&&this.Oi(this.Yk[y].request);for(y=0;y<this.oh.length;y++)this.oh[y]&&this.oh[y].Ok()&&this.Oi(this.oh[y].request)};aa.prototype.wta=function(){return this.HG?Promise.resolve():(this.HG=!0,this.timeStamp=Date.now(),this.Mv.HI())};aa.prototype.uFa=function(){var y=this,z,x,fa,ea,ma;return new Promise(function(ka,ia){if(y.Ap)z=new FormData,z.append("file",y.Ap.fileHandle,y.Ap.fileHandle.name),y.nr&&z.append("officeOptions",JSON.stringify(y.nr)),y.Hf&&z.append("rasterizerOptions",JSON.stringify(y.Hf)),
y.Rz&&z.append("cadOptions",y.Rz.getJsonString()),y.Qz&&z.append("cacheKey",y.Qz),x=y.Ap.loadCallback,ea="upload",fa=y.Ap.extension;else if(y.Ay)z={uri:y.Ay.uri,JJa:y.Ay.shareId},z=Object.keys(z).map(function(sa){return sa+"="+(z[sa]?encodeURIComponent(z[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=y.Ay.loadCallback,ea="url",fa=y.Ay.extension;else{ka();return}var ra=new XMLHttpRequest,pa=Object(ca.k)(y.fg,"AuxUpload");pa=Object(a.a)(pa,{type:ea,ext:fa});ra.open("POST",
pa);ra.withCredentials=y.rj();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);y.XO=sa.uri;x(sa);ka(sa)}});ra.addEventListener("error",function(){ia(ra.statusText+" "+JSON.stringify(ra))});y.Ap&&null!=y.Ap.onProgress&&(ra.upload.onprogress=function(sa){y.Ap.onProgress(sa)});ra.send(z)})};aa.prototype.gAa=function(y){this.password=y||null;this.Zo.Yw()||(this.Zo=new n,this.Oi({t:"pages"}));return this.Zo.promise};
aa.prototype.WC=function(y){this.wP=y||null;this.Zo.Yw()||this.Oi({t:"pages"});return this.Zo.promise};aa.prototype.bA=function(y){y=Object.assign(y,{uri:encodeURIComponent(this.XO)});this.wP&&(y.ext=this.wP);this.Ji&&(y.c=this.Ji);this.password&&(y.pswd=this.password);this.Qz&&(y.cacheKey=this.Qz);this.nr&&(y.officeOptions=this.nr);this.Hf&&(y.rastOptions=this.Hf);this.Rz&&(y.cadOptions=this.Rz.mImpl);return y};aa.prototype.ZAa=function(){0<this.Gx.length()&&10>=this.uv&&this.$Aa(this.Gx.pop().data)};
aa.prototype.Jia=function(y){0<this.Gx.length()&&this.Gx.contains(y)&&this.Gx.remove(y)};aa.prototype.Oi=function(y){y=this.bA(y);this.Mv.send(y)};aa.prototype.r9=function(y,z){10<this.uv?this.Gx.push(y,z):(this.uv++,y=this.bA(z),this.Mv.send(y))};aa.prototype.$Aa=function(y){this.uv++;y=this.bA(y);this.Mv.send(y)};aa.prototype.Vn=function(y){return y};aa.prototype.P3=function(y){this.ZU&&y?Object(ha.j)("Server failed health check. Single server mode ignoring check."):!this.ZHa&&y&&3>=this.Jj?(this.XQ=
!0,this.Mv.Zs()):3<this.Jj&&(this.ZU=!0)};aa.prototype.Fwa=function(y){var z=this,x=y.data,fa=y.err,ea=y.t;switch(ea){case "upload":fa?this.vFa.reject(fa):this.vFa.resolve("Success");break;case "pages":fa?this.Zo.reject(fa):na(x,ea,this.Zo)&&this.Zo.resolve(x);break;case "config":if(fa)this.Ms.reject(fa);else if(na(x,ea,this.Ms)){this.P3(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(b.a)("wvsQueryParameters");ma.auth=x.auth;Object(b.b)("wvsQueryParameters",ma)}x.serverVersion&&(this.sL=
x.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.sL));x.serverID?(this.Jj=x.serverID===this.w9&&this.XQ?this.Jj+1:0,this.w9=x.serverID):this.Jj=0;this.XQ=!1;this.Ms.resolve(x)}break;case "health":fa?this.Ms.reject(fa):na(x,ea,this.Ms)&&this.P3(x.unhealthy);break;case "pdf":x.url=Object(a.a)(this.fg+"../"+encodeURI(x.url));fa?this.Gg.reject(fa):na(x,ea,this.Gg)&&this.Gg.resolve(x);break;case "ApString2Xod":x.url=Object(a.a)(this.fg+"../data/"+encodeURI(x.url));fa?this.Uk[x.rID].reject(fa):
na(x,ea,this.Uk[x.rID])&&this.Uk[x.rID].resolve(x);break;case "docmod":x.url=Object(a.a)(this.fg+"../"+encodeURI(x.url));fa?this.Uk[x.rID].reject(fa):na(x,ea,this.Gg)&&this.Uk[x.rID].resolve(x);break;case "xod":if(fa)this.Nf&&this.Nf.Ok()&&this.Nf.reject(fa),this.Mf&&this.Mf.Ok()&&this.Mf.reject(fa);else if(x.notFound)x.noCreate||this.Nf&&this.Nf.Ok()&&this.Nf.resolve(x),this.Mf&&this.Mf.Ok()&&this.Mf.resolve(x);else{x.url&&(x.url=Object(a.a)(this.fg+"../"+encodeURI(x.url)));if(!this.Mf||this.Mf.Yw())this.Mf=
new n,this.Mf.request={t:"xod",noCreate:!0};this.Nf||(this.Nf=new n,this.Nf.request={t:"xod"});this.Mf.resolve(x);this.Nf.resolve(x)}break;case "cAnnots":ma=this.Sg;if(fa)ma.reject(fa);else if(na(x,ea,ma)){ma.qU();var ka=[],ia=x.annots;x=function(Ea){var Da=ia[Ea].s,Ba=ia[Ea].e,Na=ra.fg+"../"+encodeURI(ia[Ea].xfdf),Ia="true"===ia[Ea].hasAppearance?Object(a.a)(Na+".xodapp"):null,Ja=Object(la.range)(Da,Ba+1);ka[Ea]={range:Ja,promise:new Promise(function(Ma,Qa){var Sa=new XMLHttpRequest;Sa.open("GET",
Object(a.a)(Na));Sa.responseType="text";Sa.withCredentials=z.rj();Sa.addEventListener("load",function(){Sa.readyState===Sa.DONE&&200===Sa.status&&Ma({Eu:Sa.response,Jn:Ia,range:Ja})});Sa.addEventListener("error",function(){Qa(Sa.statusText+" "+JSON.stringify(Sa))});Sa.send()})}};var ra=this;for(fa=0;fa<ia.length;fa++)x(fa);ma.resolve(ka)}break;case "annots":if(fa)this.Sg.reject(fa);else if(na(x,ea,this.Sg)){this.Sg.qU();var pa=new XMLHttpRequest;ma=this.fg+"../"+encodeURI(x.url);var sa=x.hasAppearance?
Object(a.a)(ma+".xodapp"):null;pa.open("GET",Object(a.a)(ma));pa.responseType="text";pa.withCredentials=this.rj();pa.addEventListener("load",function(){pa.readyState===pa.DONE&&200===pa.status&&z.Sg.resolve({Eu:pa.response,Jn:sa})});pa.addEventListener("error",function(){z.Sg.reject(pa.statusText+" "+JSON.stringify(pa))});pa.send()}break;case "image":this.uv--;var ua=this.Ci[x.p];fa?ua.promise.reject(fa):na(x,ea,ua)&&(ua.result=x,ua.result.url=Object(a.a)(this.fg+"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));
break;case "tiles":this.uv--;ua=x.rID;ma=this.oh[ua];this.oh[ua]=null;this.zH.push(ua);if(fa)ma.reject(fa);else if(na(x,ea,ma)){for(fa=0;fa<x.tiles.length;fa++)x.tiles[fa]=Object(a.a)(this.fg+"../"+encodeURI(x.tiles[fa]));ma.resolve(x)}break;case "text":ua=this.Yk[x.p];if(fa)ua.reject(fa);else if(na(x,ea,ua)){ua.qU();var wa=new XMLHttpRequest;x=Object(a.a)(this.fg+"../"+encodeURI(x.url));wa.open("GET",x);wa.withCredentials=this.rj();wa.addEventListener("load",function(){wa.readyState===wa.DONE&&200===
wa.status&&(ua.result=JSON.parse(wa.response),ua.resolve(ua.result))});wa.addEventListener("error",function(Ea){ua.reject(wa.statusText+" "+JSON.stringify(Ea))});wa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.ZAa();!ea&&y.echo&&y&&"apstring2xod"===y.echo.t&&(y=y.echo.reqID)&&(2<=parseInt(this.sL,10)?this.Uk[y].reject("Message unhandled by server"):this.Uk[y].reject())};aa.prototype.Qpa=function(){return Object(ja.b)(this,
void 0,void 0,function(){return Object(ja.d)(this,function(y){switch(y.label){case 0:return[4,this.wta()];case 1:return y.ba(),[2,this.Ms.promise]}})})};aa.prototype.upa=function(y){for(var z=this,x=new XMLHttpRequest,fa=Object(a.a)(this.fg+"aul",{id:this.id}),ea=new FormData,ma={},ka=0;ka<y.body.length;ka++){var ia=y.body[ka];ma[ia.id]=ia.HN.w+";"+ia.HN.h;ea.append(ia.id,ia.HN.dataString)}y={t:"apstring2xod",reqID:this.h6++,parts:ma};var ra=this.bA(y);ea.append("msg",JSON.stringify(ra));this.Uk[ra.reqID]=
new n;x.open("POST",fa);x.withCredentials=this.rj;fa=new Promise(function(pa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?pa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(ea);return fa.then(function(){return z.Uk[ra.reqID].promise})};aa.prototype.Cja=function(){var y=this.sL.split("-")[0].split("."),z=["1","5","9"];if(3!==y.length)throw Error("Invalid WVS version length.");if(3!==z.length)throw Error("Invalid version length.");for(var x=
0;x<y.length;++x){if(z.length===x||y[x]>z[x])return-1;if(y[x]!==z[x])return 1}return 0};aa.prototype.Gs=function(){return 0>=this.Cja()};aa.prototype.GP=function(){this.Sg||(this.Sg=new n,this.Gs()?this.Sg.request={t:"cAnnots"}:this.Sg.request={t:"annots"},this.Oi(this.Sg.request));return this.Sg.promise};aa.prototype.jK=function(y,z){this.Ci[z]||(this.Ci[z]=new n,this.Ci[z].request={t:"image",p:z},this.r9(y,this.Ci[z].request));return this.Ci[z].promise};aa.prototype.hAa=function(y){this.Yk[y]||
(this.Yk[y]=new n,this.Yk[y].request={t:"text",p:y},this.Oi(this.Yk[y].request));return this.Yk[y].promise};aa.prototype.iAa=function(y,z,x,fa,ea){var ma=this.oh.length;this.zH.length&&(ma=this.zH.pop());this.oh[ma]=new n;this.oh[ma].request={t:"tiles",p:z,z:x,r:fa,size:ea,rID:ma};this.r9(y,this.oh[ma].request);return this.oh[ma].promise};aa.prototype.N8=function(){this.Gg||(this.Gg=new n,this.Gg.request={t:"pdf"},this.t0?this.Gg.resolve({url:this.XO}):this.Oi(this.Gg.request));return this.Gg.promise};
aa.prototype.H2=function(y){var z=this,x=new XMLHttpRequest,fa=Object(a.a)(this.fg+"aul",{id:this.id}),ea=new FormData,ma={};y.annots&&(ma.annots="xfdf");y.watermark&&(ma.watermark="png");y.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.h6++,parts:ma};y.print&&(ma.print=!0);var ka=this.bA(ma);ea.append("msg",JSON.stringify(ka));return Promise.all([y.annots,y.watermark,y.redactions].map(function(ia){return Promise.resolve(ia)})).then(function(ia){var ra=ia[0],pa=ia[1];ia=ia[2];ra&&
ea.append("annots",ra);pa&&ea.append("watermark",pa);ia&&ea.append("redactions",ia);z.Uk[ka.reqID]=new n;x.open("POST",fa);x.withCredentials=z.rj;ra=new Promise(function(sa,ua){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():ua("An error occurred while sending down annotation data to the server"))}});x.send(ea);return ra.then(function(){return z.Uk[ka.reqID].promise})})};aa.prototype.z3=function(){this.Mf||(this.Mf=new n,this.Mf.request={t:"xod",noCreate:!0},this.Oi(this.Mf.request));
return this.Mf.promise};aa.prototype.jAa=function(){this.Nf||(this.Nf=new n,this.Nf.request={t:"xod"},this.Oi(this.Nf.request));return this.Nf.promise};aa.prototype.wr=function(){return!0};aa.prototype.request=function(){};aa.prototype.a8=function(){};aa.prototype.abort=function(){for(var y=0;y<this.oh.length;y++)this.oh[y]&&(this.oh[y].resolve(null),this.oh[y]=null,this.zH.push(y));this.close()};aa.prototype.xK=function(y){this.Ji=this.Ji||{};this.Ji.headers=y};aa.prototype.Ar=function(y){this.Ji=
this.Ji||{};this.Ji.internal=this.Ji.internal||{};this.Ji.internal.withCredentials=y};aa.prototype.rj=function(){return this.Ji&&this.Ji.internal?this.Ji.internal.withCredentials:null};aa.prototype.getFileData=function(){return Promise.reject()};return aa}();Object(xa.a)(f);Object(h.a)(f);Object(h.b)(f);ta["default"]=f},582:function(xa,ta,f){var qa=f(0),na=f(3),oa=f(33),ja=f(50),la=f(204),ha=f(93),ca=function(){function r(h,b,a,n,e,w){void 0===a&&(a=null);void 0===n&&(n=null);void 0===e&&(e=null);
void 0===w&&(w=null);this.C5=!1;this.Jj=0;this.j_=this.RFa(h);this.url=b?this.j_+"/"+b:this.j_+"/ws";this.JO=a;this.pC=n;this.$z=e;this.ET=w}r.prototype.RFa=function(h){var b=h.indexOf("://"),a="ws://";0>b?b=0:(5===b&&(a="wss://"),b+=3);var n=h.lastIndexOf("/");0>n&&(n=h.length);return a+h.slice(b,n)};r.prototype.send=function(h){this.Mr.readyState===WebSocket.CLOSED||this.C5||this.Mr.send(JSON.stringify(h))};r.prototype.HI=function(){return Object(qa.b)(this,void 0,void 0,function(){var h,b=this;
return Object(qa.d)(this,function(){h=Object(ja.a)("wvsQueryParameters");h.bcid=Object(oa.l)(8);Object(ja.b)("wvsQueryParameters",h);return[2,new Promise(function(a,n){var e=Object(la.a)(b.url);b.Mr=new WebSocket(e);b.Mr.onopen=function(){b.pC&&b.pC();a()};b.Mr.onerror=function(w){b.C5=!0;n(w)};b.Mr.onclose=function(w){var aa=w.code;return Object(qa.b)(b,void 0,void 0,function(){var y=this;return Object(qa.d)(this,function(z){switch(z.label){case 0:return this.$z&&this.$z(),3E3===aa?[3,3]:8>this.Jj++?
[4,new Promise(function(x){return setTimeout(function(){return Object(qa.b)(y,void 0,void 0,function(){return Object(qa.d)(this,function(fa){switch(fa.label){case 0:return this.ET(),[4,this.HI()];case 1:return fa.ba(),x(),[2]}})})},3E3)})]:[3,2];case 1:return z.ba(),[3,3];case 2:n(ha.a),z.label=3;case 3:return[2]}})})};b.Mr.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?b.send({hb:!0}):w.end?close():b.JO(w))}})]})})};r.prototype.Zs=function(h){void 0===h&&(h=!1);this.Jj=0;h?this.Mr.close(3E3):
this.Mr.close();return Promise.resolve()};return r}(),ba=function(){function r(h,b,a,n,e,w,aa){void 0===n&&(n=null);void 0===e&&(e=null);void 0===w&&(w=null);void 0===aa&&(aa=null);this.Jj=this.iK=this.id=0;this.wB=!1;this.request=null;h=this.pya(h);this.url=b?h+"/"+b+"pf":h+"/pf";this.lL=a;this.JO=n;this.pC=e;this.$z=w;this.ET=aa}r.prototype.pya=function(h){var b=h.lastIndexOf("/");0>b&&(b=h.length);return h.slice(0,b)};r.prototype.Ska=function(h){h=h.split("\n");for(h[h.length-1]&&h.pop();0<h.length&&
3>h[h.length-1].length;)"]"===h.pop()&&(this.id=0);0<h.length&&3>h[0].length&&h.shift();for(var b=0;b<h.length;++b)h[b].endsWith(",")&&(h[b]=h[b].substr(0,h[b].length-1));return h};r.prototype.a9=function(){return Object(qa.b)(this,void 0,void 0,function(){var h=this;return Object(qa.d)(this,function(b){switch(b.label){case 0:return 8>this.Jj++?[4,new Promise(function(a){return setTimeout(function(){h.ET();h.HI();a()},3E3)})]:[3,2];case 1:b.ba(),b.label=2;case 2:return[2]}})})};r.prototype.rya=function(h){Object(qa.b)(this,
void 0,void 0,function(){var b,a;return Object(qa.d)(this,function(n){switch(n.label){case 0:b=null,a=0,n.label=1;case 1:if(!(a<h.length))return[3,6];b=JSON.parse(h[a]);if(!b)return[3,5];if(!b.end)return[3,2];close();return[3,5];case 2:if(!b.id||Number(b.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");this.Zs();return[4,this.a9()];case 3:return n.ba(),[3,5];case 4:b.hb&&Number(b.id)===this.id?this.send({hb:!0}):this.wB||this.JO(b),n.label=5;case 5:return++a,[3,1];case 6:return[2]}})})};
r.prototype.Awa=function(h){Object(qa.b)(this,void 0,void 0,function(){var b,a,n;return Object(qa.d)(this,function(e){switch(e.label){case 0:if(!(3<=h.readyState))return[3,2];try{b=h.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<b)try{a=this.Ska(h.responseText),0===this.id&&0<a.length&&(n=JSON.parse(a.shift()),this.id=n.id,this.Jj=0),this.rya(a)}catch(w){}return this.wB?[3,2]:[4,this.v1()];case 1:e.ba(),e.label=2;case 2:return[2]}})})};r.prototype.v1=function(){return Object(qa.b)(this,
void 0,void 0,function(){var h=this;return Object(qa.d)(this,function(){return[2,new Promise(function(b,a){function n(){return Object(qa.b)(h,void 0,void 0,function(){return Object(qa.d)(this,function(w){switch(w.label){case 0:a(),this.Zs(),w.label=1;case 1:return this.wB&&8>this.Jj?[4,this.a9()]:[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}h.request=new XMLHttpRequest;h.request.withCredentials=h.lL;var e=Object(la.a)(h.url,0!==h.id?{id:String(h.id),uc:String(h.iK)}:{uc:String(h.iK)});h.iK++;
h.request.open("GET",e,!0);h.request.setRequestHeader("Cache-Control","no-cache");h.request.setRequestHeader("X-Requested-With","XMLHttpRequest");h.request.onreadystatechange=function(){h.Awa(h.request)};h.request.addEventListener("error",n);h.request.addEventListener("timeout",n);h.request.addEventListener("load",function(){h.pC&&h.pC();b()});h.request.send()})]})})};r.prototype.HI=function(){var h=Object(ja.a)("wvsQueryParameters");h.bcid=Object(oa.l)(8);Object(ja.b)("wvsQueryParameters",h);this.iK=
this.id=0;this.wB=!1;return this.v1()};r.prototype.send=function(h){var b=this,a=new XMLHttpRequest;a.withCredentials=this.lL;var n=Object(la.a)(this.url,{id:String(this.id)}),e=new FormData;e.append("data",JSON.stringify(h));a.addEventListener("error",function(){b.Zs()});a.open("POST",n);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(e)};r.prototype.Zs=function(){this.id=0;this.wB=!0;this.$z&&this.$z();this.request.abort();return Promise.resolve()};return r}();xa=function(){function r(h,
b,a){this.Q_=h;this.target=b;this.lL=a}r.prototype.hpa=function(h,b,a,n,e){void 0===h&&(h=!0);void 0===b&&(b=null);void 0===a&&(a=null);void 0===n&&(n=null);void 0===e&&(e=null);return h?new ca(this.Q_,this.target,b,a,n,e):new ba(this.Q_,this.target,this.lL,b,a,n,e)};return r}();ta.a=xa}}]);}).call(this || window)
