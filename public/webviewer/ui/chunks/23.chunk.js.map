{"version":3,"sources":["webpack:///./src/ui/src/components/Note/Context.js","webpack:///./src/ui/src/helpers/getClassName.js","webpack:///./src/ui/src/helpers/handleFreeTextAutoSizeToggle.js","webpack:///./src/ui/src/helpers/setAnnotationRichTextStyle.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/NoteTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.scss?3f0d","webpack:///./src/ui/src/components/NoteState/NoteStatePopup.js","webpack:///./src/ui/src/helpers/NoteStateUtils.js","webpack:///./src/ui/src/hooks/usePortal.js","webpack:///./src/ui/src/components/PopupPortal/PopupPortal.js","webpack:///./src/ui/src/components/PopupPortal/index.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss?3394","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.scss","webpack:///./src/ui/src/constants/quill.scss?ae26","webpack:///./src/ui/src/constants/quill.scss","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss?3833","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss?98d3","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss","webpack:///./src/ui/src/components/NoteState/NoteState.scss","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss?a9a8","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss?5f3c","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss?a86d","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss?e09b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss?e8ab","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss","webpack:///./src/ui/src/components/Note/Note.scss?d9ff","webpack:///./src/ui/src/components/Note/Note.scss","webpack:///./src/ui/src/components/NotesPanel/ReplyAttachmentPicker.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss?5a25","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.js","webpack:///./src/ui/src/components/NotePopup/NotePopupContainer.js","webpack:///./src/ui/src/components/NotePopup/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.js","webpack:///./src/ui/src/components/NoteState/NoteStateContainer.js","webpack:///./src/ui/src/components/NoteState/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicator.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicatorContainer.js","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.js","webpack:///./src/ui/src/components/NoteHeader/index.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreviewContainer.js","webpack:///./src/ui/src/components/NoteTextPreview/index.js","webpack:///./src/ui/src/helpers/ReplyAttachmentManager.js","webpack:///./src/ui/src/helpers/sanitizeSVG.js","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.js","webpack:///./src/ui/src/components/ReplyAttachmentList/index.js","webpack:///./src/ui/src/helpers/setReactQuillContent.js","webpack:///./src/ui/src/components/NoteContent/NoteContent.js","webpack:///./src/ui/src/components/NoteContent/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.js","webpack:///./src/ui/src/components/Note/ReplyArea/index.js","webpack:///./src/ui/src/components/Note/NoteGroupSection.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/index.js","webpack:///./src/ui/src/components/Note/Note.js","webpack:///./src/ui/src/components/Note/index.js","webpack:///./src/ui/src/components/AnnotationStylePopup/AnnotationStylePopup.js","webpack:///./src/ui/src/components/AnnotationStylePopup/index.js","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.js","webpack:///./src/ui/src/components/ListSeparator/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss?5d7b","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.scss","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss?db39","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.scss","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss?296a","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.scss","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss?21e2","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.scss","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss?6dd5","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.scss","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/VirtualizedList.js","webpack:///./src/ui/src/components/NotesPanel/VirtualizedList/index.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/NormalList.js","webpack:///./src/ui/src/components/NotesPanel/NormalList/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyAreaMultiSelect.js","webpack:///./src/ui/src/components/NotesPanel/MultiStylePopup.js","webpack:///./src/ui/src/components/NotesPanel/MultiSelectControls.js","webpack:///./src/ui/src/components/NotesPanelHeader/NotesPanelHeader.js","webpack:///./src/ui/src/components/NotesPanelHeader/index.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanel.js","webpack:///./src/ui/src/components/NotesPanel/NotesPanelContainer.js","webpack:///./src/ui/src/components/NotesPanel/index.js"],"names":["NoteContext","React","createContext","className","isOpen","join","trim","annotation","setAutoSizeFont","isAutoSizeFont","freeTextAnnot","calculatedFontSize","getCalculatedFontSize","FontSize","switchToAutoFontSize","core","getAnnotationManager","redrawAnnotation","setAnnotationRichTextStyle","editor","richTextStyle","ops","getContents","breakpoint","forEach","item","attributes","isMention","insert","mention","value","denotationChar","cssStyle","undefined","bold","italic","color","underline","strike","length","setRichTextStyle","i","globalUserData","formats","Keyboard","Quill","CustomKeyboard","DEFAULTS","bindings","register","Clipboard","Delta","QuillPasteExtra","quill","options","keepSelection","range","this","getSelection","delta","retain","index","setSelection","sources","SILENT","mentionModule","allowedChars","mentionDenotationChars","mentionContainerClass","mentionListClass","listItemClass","renderItem","email","source","searchTerm","renderList","mentionsSearchFunction","mentionsManager","getMentionLookupCallback","foundUsers","CommentTextarea","forwardRef","ref","onChange","onKeyDown","onBlur","onFocus","userData","isReply","t","useTranslation","isAddReplyAttachmentDisabled","useSelector","state","selectors","isElementDisabled","DataElements","NotesPanel","ADD_REPLY_ATTACHMENT_BUTTON","contentArray","split","pop","map","onClick","e","preventDefault","stopPropagation","onScroll","style","overflowY","modules","theme","placeholder","aria-label","Button","dataElement","img","getRootNode","querySelector","click","displayName","propTypes","PropTypes","string","func","isRequired","onSubmit","NoteTextarea","props","forwardedRef","getUserData","isNoteSubmissionWithEnterEnabled","getAutoFocusNoteOnAnnotationSelection","getIsNoteEditing","shallowEqual","canSubmitByEnter","resize","useContext","textareaRef","useRef","prevHeightRef","useLayoutEffect","boxDOMElement","current","container","firstElementChild","boundingBox","getBoundingClientRect","height","textareaProps","el","throttle","content","getText","target","doesDeltaContainMention","formattedText","getFormattedTextFromDeltas","mentionData","extractMentionDataFromStr","totalTextLength","plainTextValue","textareaEditor","setTimeout","which","isSubmittingByEnter","isSubmittingByCtrlEnter","metaKey","ctrlKey","api","__esModule","default","module","styleTag","window","isApryseWebViewerWebComponent","document","head","appendChild","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","object","triggerElementName","onClose","handleStateChange","NoteStatePopup","useState","left","right","top","position","setPosition","popupRef","isMultiSelect","NOTE_MULTI_STATE_BUTTON","useOnClickOutside","contains","createOnStateOptionButtonClickHandler","useEffect","getOverlayPositionBasedOn","id","glyph","createStateAnnotation","documentViewerKey","stateAnnotation","Core","Annotations","StickyAnnotation","getCurrentUser","enableSkipAutoLink","displayAuthor","getDisplayAuthor","stateMessage","i18next","toLowerCase","contents","setContents","usePortal","rootElemRef","rootElem","node","existingParent","parentElem","rootContainer","createElement","setAttribute","createRootElement","body","insertBefore","lastElementChild","nextElementSibling","remove","childElementCount","Portal","children","pointerEvents","zIndex","createPortal","PopupPortal","ReplyAttachmentPicker","annotationId","addAttachments","replyAttachmentHandler","getReplyAttachmentHandler","file","files","attachment","url","name","size","type","display","handleEdit","handleDelete","closePopup","openPopup","isEditable","bool","isDeletable","noop","NotePopup","notePopupButtonClass","classNames","active","optionsClass","DataElementWrapper","Icon","NotePopupContainer","activeDocumentViewerKey","getActiveDocumentViewerKey","setIsEditing","noteIndex","canModify","setCanModify","canModifyContents","setCanModifyContents","setIsOpen","onUpdateAnnotationPermission","addEventListener","removeEventListener","passProps","useCallback","FreeTextAnnotation","isFreeTextEditingEnabled","trigger","deleteAnnotations","getGroupedChildren","NoDelete","Tooltip","openOnInitialLoad","NoteState","annotationState","getStatus","icon","noteStateButtonClassName","Id","data-id","NoteStateContainer","newValue","addReply","annotationManager","addAnnotation","getRootAnnotation","NoteUnpostedCommentIndicator","pendingEditTextMap","pendingReplyMap","pendingAttachmentMap","hasUnpostedComment","setHasUnpostedComment","hasUnpostedReply","setHasUnpostedReply","hasUnpostedAttachment","setHasUnpostedAttachment","data-element","isDisabled","iconColor","fillColor","language","noteDateFormat","isSelected","notesShowLastUpdatedDate","isUnread","renderAuthorName","isNoteStateDisabled","isEditing","number","sortStrategy","activeTheme","isMultiSelected","isMultiSelectMode","handleMultiSelect","isGroupMember","showAnnotationNumbering","NoteHeader","date","timezone","dateCreated","NotesPanelSortStrategy","MODIFIED_DATE","CREATED_DATE","getLatestActivityDate","DateCreated","datetimeStr","toLocaleString","timeZone","Date","numberOfReplies","getReplies","toHexString","Theme","DARK","isDarkColorHex","LIGHT","isLightColorHex","getColor","FillColor","annotationAssociatedNumber","getAssociatedNumber","annotationDisplayedAssociatedNumber","authorAndDateClass","noteHeaderClass","parent","dayjs","locale","format","PageNumber","Choice","checked","NoteTextPreviewContainer","NoteTextPreview","notePanelWidth","getNotesPanelWidth","panelWidth","icons","FileAttachmentUtils","decompressFileContent","decompressWithFlateDecode","setAnnotationAttachments","setAttachments","isImage","startsWith","getAttachmentIcon","readAsText","svg","Promise","resolve","toString","fileReader","FileReader","result","isSVG","sanitizeSVG","svgText","forbiddenTags","DOMPurify","addHook","_","hookEvent","allowedTags","clean","sanitize","Blob","isDirty","ImagePreview","src","setSrc","isDirtySVG","setIsDirtySvg","fileToSanitize","isImageFromPDF","File","URL","createObjectURL","processImagePreview","ReplyAttachmentList","fileDeleted","getTabManager","isReplyAttachmentPreviewEnabled","tabManager","previewEnabled","console","warn","fileData","addTab","filename","setActive","saveCurrentActiveTabState","onDownload","saveAs","key","onDelete","getAttributtes","element","attr","decoration","includes","setReactQuillContent","getRichTextStyle","indexes","Object","keys","text","isNaN","lastIndex","textSlice","slice","extend","LocalizedFormat","isNonReplyNoteRead","onReplyClicked","NoteContent","getNoteDateFormat","getIconColor","mapAnnotationToKey","getCurrentLanguage","isNotesPanelTextCollapsingEnabled","isNotesPanelRepliesCollapsingEnabled","getActiveTheme","getTimezone","canCollapseTextPreview","canCollapseReplyPreview","searchInput","onTopNoteContentClicked","setPendingEditText","dispatch","useDispatch","attachments","getAttachments","annotationChangedListener","annotations","action","annot","useDidUpdate","actions","finishNoteEditing","customData","highlightSearchInput","skipAutoLink","getSkipAutoLink","renderContents","fontColor","autolinkerContent","Autolinker","link","stripPrefix","stripTrailingSlash","replaceFn","match","href","getAnchorHref","anchorText","getAnchorText","offset","getOffset","getType","start","end","getMatchedText","highlightResult","linesToBreak","comment","renderRichText","contentToRender","strIdx","anchorData","forIdx","rel","getDataWithKey","JSON","parse","getCustomData","contentsToRender","textColor","Color","a","textAreaValue","thereIsNoUnpostedEdit","handleContentsClicked","noteContentClass","unread","clicked","useMemo","contentStyle","onTextAreaValueChange","pendingText","textPreview","highlightSearchResult","shouldCollapseAnnotationText","isString","paddingRight","header","ContentArea","getIsMentionEnabled","INLINE_COMMENT_POPUP","isElementOpen","NOTES_PANEL","isAnyCustomPanelOpen","autoFocusNoteOnAnnotationSelection","isMentionEnabled","isInlineCommentDisabled","isInlineCommentOpen","isNotesPanelOpen","setCurAnnotId","deleteAttachment","clearAttachments","shouldNotFocusOnInput","isMobile","getEditor","setText","ids","focus","textLength","getLength","pendingAttachments","disableSkipAutoLink","extractMentionDataFromAnnot","mentions","setCustomData","stringify","drawAnnotationsFromList","contentClassName","relatedTarget","getAttribute","disabled","getRichTextSpan","fontWeight","fontStyle","textDecoration","replace","styles","indices","Number","sort","b","Math","min","max","styleIndices","fullText","loweredText","loweredSearchInput","lastFoundInstance","indexOf","allFoundPositions","regexSafeSearchInput","RegExp","test","idx","substring","ReplyArea","onPendingReplyChange","isDocumentReadOnly","getIsReplyDisabled","isReadOnly","isReplyDisabled","isReplyDisabledForAnnotation","isNoteEditingTriggeredByAnnotationPopup","isContentEditable","setPendingReply","isExpandedFromSearch","scrollToSelectedAnnot","isFocused","setIsFocused","postReply","replyText","replyAnnotation","createMentionReply","addAnnotations","createAnnotationReply","ifReplyNotAllowed","replyAreaClass","replyButtonClass","onMouseDown","handleNoteTextareaChange","isSubmitType","groupAnnotations","array","NoteGroupSection","isViewingGroupAnnots","setIsViewingGroupAnnots","ViewAllAnnotsButton","CloseAllAnnotsButton","groupAnnotation","selectAnnotation","jumpToAnnotation","openElement","LineConnectorPortal","mount","removeChild","AnnotationNoteConnectorLine","noteContainerRef","isCustomPanelOpen","getDocumentContainerWidth","getDocumentContainerHeight","lineIsOpen","notePanelIsOpen","isLineDisabled","documentContainerWidth","documentContainerHeight","rightHorizontalLineWidth","setRightHorizontalLineWidth","rightHorizontalLineTop","setRightHorizontalLineTop","rightHorizontalLineRight","setRightHorizontalLineRight","leftHorizontalLineWidth","setLeftHorizontalLineWidth","leftHorizontalLineTop","setLeftHorizontalLineTop","leftHorizontalLineRight","setLeftHorizontalLineRight","getAnnotationPosition","annotationBottomRight","bottomRight","annotationTopLeft","topLeft","getAnnotationLineOffset","Subject","getScrollViewElement","scrollTop","scrollLeft","closeElement","annotWidthInPixels","x","annotHeightInPixels","y","viewerWidth","host","clientWidth","innerWidth","viewerOffset","offsetLeft","viewerOffsetTop","offsetTop","lineWidth","noZoomRefPoint","getNoZoomReferencePoint","noZoomRefShiftX","NoZoom","noZoomRefShiftY","onPageNumberUpdated","verticalHeight","abs","verticalTop","width","isInNotesPanel","currId","Note","shouldHideConnectorLine","containerRef","containerHeightRef","isEditingMap","setIsEditingMap","unreadReplyIdSet","Set","getNoteTransformFunction","getCustomNoteSelectionFunction","getUnreadAnnotationIdSet","isCommentThreadExpansionEnabled","isRightClickAnnotationPopupEnabled","noteTransformFunction","customNoteSelectionFunction","unreadAnnotationIdSet","shouldExpandCommentThread","replies","filter","r","has","add","setAnnotationReadState","isRead","prevHeight","currHeight","round","notesPanelElement","getElementsByClassName","child","parentNode","handleNoteClick","deselectAllAnnotations","ANNOTATION_NOTE_CONNECTOR_LINE","ANNOTATION_POPUP","hasUnreadReplies","noteClass","expanded","repliesClass","hidden","reply","showReplyArea","values","some","val","handleReplyClicked","markAllRepliesRead","repliesSetToRead","selectAnnotations","getGroupAnnotations","isGroup","CaretAnnotation","lastReplyId","role","tabIndex","currentTarget","label","properties","isRedaction","isFreeText","isEllipse","hasBackToMenu","onBackToMenu","AnnotationStylePopup","isMeasure","colorMapKey","showLineStyleOptions","hideSnapModeCheckbox","onResize","ANNOTATION_STYLE_POPUP","isToolDefaultStyleUpdateFromAnnotationPopupEnabled","handleSliderChange","property","handlePropertyChange","setAnnotationStyles","setToolStyles","ToolName","getAutoSizeType","AutoSizeTypes","NONE","doc","getDocument","pageNumber","pageInfo","getPageInfo","pageMatrix","getPageMatrix","pageRotation","getPageRotation","fitText","adjustFreeTextBoundingBox","handleStyleChange","handleRichTextStyleChange","updateAnnotationRichTextStyle","handleLineStyleChange","section","lineStyle","setStartStyle","setEndStyle","dashes","shift","handleClick","getClassName","measureRef","ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER","ActionButton","ANNOTATION_STYLE_POPUP_BACK_BUTTON","StylePopup","isFreeTextAutoSize","onFreeTextSizeToggle","handleFreeTextAutoSizeToggle","onStyleChange","onSliderChange","onPropertyChange","disableSeparator","onRichTextStyleChange","onLineStyleChange","renderContent","ListSeparator","memo","notes","initialScrollTop","selectedIndex","cache","CellMeasurerCache","defaultHeight","fixedWidth","VirtualizedList","listRef","setOffset","dimension","setDimension","prevWindowHeight","innerHeight","useImperativeHandle","scrollToPosition","scrollToRow","clearAll","measureAllRows","forceUpdateGrid","windowResizeHandler","diff","handleScroll","rowRenderer","currNote","columnIndex","rowIndex","measure","clear","recomputeRowHeights","_resize","bounds","deferredMeasurementCache","outline","overscanRowCount","rowCount","rowHeight","NormalList","parentRect","childRect","clientHeight","Fragment","pendingReply","count","MultiStylePopup","styleTabs","setStyleTabs","clickedTrigger","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","datePicker","getDatePicker","getAnnotationStyles","freeTextAnnotation","find","getIntent","Intent","FreeText","FreeTextCallout","richTextStyles","Font","TextAlign","TextVerticalAlign","strikeout","availablePalettes","AnnotationStylePopupTabs","TEXT_COLOR","STROKE_COLOR","FILL_COLOR","updateAnnotationStylePopupTabs","newColorMap","copyMapWithDataProperties","setColorMap","_styleTabs","showMultiReply","setShowMultiReply","showMultiState","setShowMultiState","showMultiStyle","setShowMultiStyle","setMultiSelectMode","isMultiSelectedMap","setIsMultiSelectedMap","multiSelectedAnnotations","getParentAnnotations","annotSet","isGrouped","parentAnnotation","getAnnotationById","Array","from","MultiSelectControls","modifiableMultiSelectAnnotations","setModfiableMultiSelectAnnotations","onAnnotationChanged","_isMultiSelectedMap","groupedAnnots","groupedAnnot","groupAnnot","originalKeys","updatedKeys","_modifiableMultiSelectAnnotations","multiSelectedAnnot","canGroup","getNumberOfGroups","canUngroup","Provider","NOTE_MULTI_REPLY_BUTTON","title","bottom","NOTE_MULTI_STYLE_BUTTON","NOTE_MULTI_GROUP_BUTTON","NOTE_MULTI_UNGROUP_BUTTON","ungroupAnnotations","NOTE_MULTI_DELETE_BUTTON","warning","message","confirmBtnText","onConfirm","showWarningMessage","NotesPanelHeader","disableFilterAnnotation","setSearchInputHandler","toggleMultiSelectMode","isMultiSelectEnabled","getSortStrategy","getNotesPanelCustomHeaderOptions","getAnnotationFilters","isSortContainerDisabled","customHeaderOptions","annotationFilters","filterEnabled","setFilterEnabled","authorFilter","colorFilter","statusFilter","typeFilter","toggleFilterStyle","detail","types","authors","colors","statuses","Events","ANNOTATION_FILTER_CHANGED","_handleInputChange","debounce","sortContainer","Dropdown","items","getSortStrategies","translationPrefix","currentSelectionKey","onClickItem","strategy","setNotesPanelSortStrategy","originalHeaderElement","DefaultHeader","INPUT_CONTAINER","COMMENTS_COUNTER","SORT_ROW","NOTE_MULTI_SELECT_MODE_BUTTON","filterAnnotationButton","CustomElement","render","renderArguments","overwriteDefaultHeader","currentLeftPanelWidth","selectedNoteIds","setSelectedNoteIds","setSearchInput","setScrollToSelectedAnnot","isCustomPanel","isLeftSide","getPageLabels","getCustomNoteFilter","getNotesInLeftPanel","isAnnotationNumberingEnabled","getEnableNotesPanelVirtualizedList","isInDesktopOnlyMode","getNotesPanelCustomEmptyPanel","getIsNotesPanelMultiSelectEnabled","pageLabels","customNoteFilter","currentNotesPanelWidth","notesInLeftPanel","enableNotesPanelVirtualizedList","customEmptyPanel","isNotesPanelMultiSelectEnabled","currentWidth","isMobileSize","setMultiSelectedAnnotations","curAnnotId","scrollTopRef","VIRTUALIZATION_THRESHOLD","isIE","Infinity","onAnnotationNumberingUpdated","isEnabled","setAnnotationNumbering","onAnnotationSelected","singleSelectedNoteIndex","filterNotesWithSearch","note","authorName","annotationPreview","notesToRender","getSortedNotes","shouldRender","noteAndReplies","onlyReplyContainsSearchInput","setPendingEditTextMap","annotationID","setPendingReplyMap","setPendingAttachmentMap","attachmentList","splice","renderChild","listSeparator","shouldRenderSeparator","getSeparatorContent","prevNote","handleNoteClicked","currIds","clone","deselectAnnotation","contextValue","groupAnnots","deselectAnnotations","NoResults","NoAnnotationsGlyph","NoAnnotationsMessage","NoAnnotationsReadOnlyMessage","readOnlyMessage","shouldRenderNoAnnotationsIcon","hideIcon","shouldRenderCustomEmptyPanel","NoAnnotations","MultiSelectPlaceHolder","MultiReplyPlaceHolder","findIndex","minWidth","Panel","onMouseUp","closeElements","NotesPanelContainer","isMultiViewerMode","1","2","noteMap","setNoteMap","setNotes","selectedNoteIdsMap","setSelectedNoteIdsMap","isMultiSelectedViewerMap","setIsMultiSelectedViewerMap","getGroupedAnnots","selectedAnnotations","mainAnnot","onDocumentUnloaded","_setNotes","getSelectedAnnotations","getAnnotationsList","Listable","Hidden","Tools","ToolNames","CROP","isContentEditPlaceholder","setDocumentUnloaded1","setDocumentUnloaded2","setNotes2","setNotes1","onAnnotationSelected2","shouldDisplayMultiSelect","selectedAnnot","onAnnotationSelected1"],"mappings":"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","file":"chunks/23.chunk.js","sourcesContent":["import React from 'react';\n\nconst NoteContext = React.createContext();\n\nexport default NoteContext;","export default (className, { isOpen }) => [className, isOpen ? 'open' : 'closed'].join(' ').trim();\n","import core from 'core';\n\n/**\n * @ignore\n * handler for auto size font toggle\n * @param {FreeTextAnnotation} annotation annotation to toggle auto size font\n * @param {function} setAutoSizeFont function to set auto size font\n * @param {boolean} isAutoSizeFont current auto size font value\n */\nexport default (annotation, setAutoSizeFont, isAutoSizeFont) => {\n  const freeTextAnnot = annotation;\n  const calculatedFontSize = freeTextAnnot.getCalculatedFontSize();\n  if (isAutoSizeFont) {\n    freeTextAnnot.FontSize = calculatedFontSize;\n  } else {\n    freeTextAnnot.switchToAutoFontSize();\n  }\n\n  setAutoSizeFont(!isAutoSizeFont);\n  core.getAnnotationManager().redrawAnnotation(freeTextAnnot);\n};\n\n","const setAnnotationRichTextStyle = (editor, annotation) => {\n  const richTextStyle = {};\n  const ops = editor.getContents().ops;\n  let breakpoint = 0;\n  ops.forEach((item) => {\n    const attributes = item.attributes;\n    const isMention = item.insert?.mention;\n    let value = item.insert;\n    if (isMention) {\n      const mention = item.insert.mention;\n      value = mention.denotationChar + mention.value;\n    }\n    const cssStyle = {};\n    if (attributes === null || attributes === undefined ? undefined : attributes.bold) {\n      cssStyle['font-weight'] = 'bold';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.italic) {\n      cssStyle['font-style'] = 'italic';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.color) {\n      cssStyle['color'] = attributes.color;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.underline) {\n      cssStyle['text-decoration'] = 'word';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.strike) {\n      if (cssStyle['text-decoration']) {\n        cssStyle['text-decoration'] = `${cssStyle['text-decoration']} line-through`;\n      } else {\n        cssStyle['text-decoration'] = 'line-through';\n      }\n    }\n    richTextStyle[breakpoint] = cssStyle;\n    breakpoint += value.length;\n  });\n  annotation.setRichTextStyle(richTextStyle);\n};\n\nexport default setAnnotationRichTextStyle;\n","import React from 'react';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'quill-mention';\nimport mentionsManager from 'helpers/MentionsManager';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport DataElements from 'constants/dataElement';\nimport selectors from 'selectors';\nimport getRootNode from 'helpers/getRootNode';\n\nimport '../../../constants/quill.scss';\nimport './CommentTextarea.scss';\n\nlet globalUserData = [];\n\n// These are the formats that will be accepted by quill\n// removed images and videos\nconst formats = [\n  'background',\n  'bold',\n  'color',\n  'font',\n  'code',\n  'italic',\n  'link',\n  'size',\n  'strike',\n  'script',\n  'underline',\n  'blockquote',\n  'header',\n  'indent',\n  'list',\n  'align',\n  'direction',\n  'code-block',\n  'formula',\n  'mention',\n];\n\n// We override the default keyboard module to disable the list autofill feature\nconst Keyboard = Quill.import('modules/keyboard');\n\nclass CustomKeyboard extends Keyboard {\n  static DEFAULTS = {\n    ...Keyboard.DEFAULTS,\n    bindings: {\n      ...Keyboard.DEFAULTS.bindings,\n      'list autofill': undefined,\n    }\n  }\n}\n\nQuill.register('modules/keyboard', CustomKeyboard, true);\n\n// Overriding clipboard module to fix cursor issue after pasting text\nconst Clipboard = Quill.import('modules/clipboard');\nconst Delta = Quill.import('delta');\n\nclass QuillPasteExtra extends Clipboard {\n  constructor(quill, options) {\n    super(quill, options);\n    this.keepSelection = options.keepSelection;\n  }\n  onPaste() {\n    const range = this.quill.getSelection();\n    const delta = new Delta().retain(range.index).delete(range.length);\n    if (this.keepSelection) {\n      this.quill.setSelection(range.index, delta.length(), Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + delta.length(), Quill.sources.SILENT);\n    }\n  }\n}\nQuill.register('modules/clipboard', QuillPasteExtra, true);\n\n// mentionsModule has to be outside the funtion to be able to access it without it being destroyed and recreated\nconst mentionModule = {\n  mention: {\n    allowedChars: /^[A-Za-z\\s0-9\\-_]*$/,\n    mentionDenotationChars: ['@', '#'],\n    mentionContainerClass: 'mention__element',\n    mentionListClass: 'mention__suggestions__list',\n    listItemClass: 'mention__suggestions__item',\n    renderItem(item) {\n      // quill-mentions does not support jsx being returned\n      if (item.email) {\n        return (`<div> ${item.value} <p class=\"email\"> ${item.email} </p> </div>`);\n      }\n      return (`<div> ${item.value} </div>`);\n    },\n    async source(searchTerm, renderList) {\n      const mentionsSearchFunction = mentionsManager.getMentionLookupCallback();\n      const foundUsers = await mentionsSearchFunction(globalUserData, searchTerm);\n      renderList(foundUsers, searchTerm);\n    }\n  }\n};\n\nconst CommentTextarea = React.forwardRef(\n  (\n    {\n      value = '',\n      onChange,\n      onKeyDown,\n      onBlur,\n      onFocus,\n      userData,\n      isReply,\n    },\n    ref\n  ) => {\n    const [t] = useTranslation();\n\n    const isAddReplyAttachmentDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON));\n\n    globalUserData = userData;\n\n    const addAttachment = () => {\n      getRootNode().querySelector('#reply-attachment-picker')?.click();\n    };\n\n    const onClick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const onScroll = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    // Convert text with newline (\"\\n\") to <p>...</p> format so\n    // that editor handles multiline text correctly\n    if (value) {\n      const contentArray = value.split('\\n');\n      if (contentArray.length && contentArray[contentArray.length - 1] === '') {\n        contentArray.pop();\n        value = contentArray.map((item) => `<p>${item || '<br>'}</p>`).join('');\n      }\n    }\n\n    // onBlur and onFocus have to be outside in the div because of quill bug\n    return (\n      <div className='comment-textarea' onBlur={onBlur} onFocus={onFocus} onClick={onClick} onScroll={onScroll}>\n        <ReactQuill\n          className='comment-textarea ql-container ql-editor'\n          style={{ overflowY: 'visible' }}\n          ref={ref}\n          modules={userData && userData.length > 0 ? mentionModule : {}}\n          theme=\"snow\"\n          value={value}\n          placeholder={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          aria-label={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          formats={formats}\n        />\n        {isReply && !isAddReplyAttachmentDisabled &&\n          <Button\n            className='add-attachment'\n            dataElement={DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON}\n            img='ic_fileattachment_24px'\n            onClick={addAttachment}\n          />\n        }\n      </div>\n    );\n  });\n\nCommentTextarea.displayName = 'CommentTextarea';\n\nexport default CommentTextarea;\n","import React, { useLayoutEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport throttle from 'lodash/throttle';\nimport NoteContext from 'components/Note/Context';\nimport selectors from 'selectors';\nimport CommentTextarea from './CommentTextarea/CommentTextarea';\nimport mentionsManager from 'helpers/MentionsManager';\n\nconst propTypes = {\n  // same the value attribute of a HTML textarea element\n  value: PropTypes.string,\n  // same the placeholder attribute of a HTML textarea element\n  placeholder: PropTypes.string,\n  // same the onChange attribute of a HTML textarea element\n  onChange: PropTypes.func.isRequired,\n  // same the onBlur attribute of a HTML textarea element\n  onBlur: PropTypes.func,\n  // same the onBlur attribute of a HTML textarea element\n  onFocus: PropTypes.func,\n  // a function that will be invoked when Ctrl + Enter or Cmd + Enter or only Enter are pressed\n  onSubmit: PropTypes.func,\n};\n\nconst NoteTextarea = React.forwardRef((props, forwardedRef) => {\n  const [\n    userData,\n    canSubmitByEnter,\n  ] = useSelector(\n    (state) => [\n      selectors.getUserData(state),\n      selectors.isNoteSubmissionWithEnterEnabled(state),\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.getIsNoteEditing(state),\n    ],\n    shallowEqual,\n  );\n\n  const { resize } = useContext(NoteContext);\n  const textareaRef = useRef();\n  const prevHeightRef = useRef();\n\n  useLayoutEffect(() => {\n    // when the height of the textarea changes, we also want to call resize\n    // to clear the cell measurer cache and update the note height in the virtualized list\n    const boxDOMElement = textareaRef.current?.editor?.container.firstElementChild;\n    const boundingBox = boxDOMElement?.getBoundingClientRect() || {};\n    if (prevHeightRef.current && prevHeightRef.current !== boundingBox.height) {\n      resize();\n    }\n    prevHeightRef.current = boundingBox.height;\n    // we need value to be in the dependency array because the height will only change when value changes\n    // eslint-disable-next-line\n  }, [props.value, resize]);\n\n\n  const handleKeyDown = (e) => {\n    const enterKey = 13;\n    const enterKeyPressed = e.which === enterKey;\n    if (enterKeyPressed) {\n      const isSubmittingByEnter = canSubmitByEnter;\n      const isSubmittingByCtrlEnter = (e.metaKey || e.ctrlKey);\n\n      if (isSubmittingByEnter || isSubmittingByCtrlEnter) {\n        props.onSubmit(e);\n      }\n    }\n  };\n\n  const handleChange = (content, delta, source, editor) => {\n    if (textareaRef.current) {\n      /* For the React Quill editor, the text won't ever be empty, at least a '\\n'\n       * will be there, so it is necessary to trim the value to check if it is empty\n       */\n      const isEmpty = editor && editor.getText().trim() === '' && content === '<p><br></p>';\n      let value = '';\n\n      if (!isEmpty) {\n        value = content.target ? content.target.value : content;\n      }\n      props.onChange(value);\n\n      // If the delta contains a mention, then move the cursor to the end of the editor.\n      // This is necessary instead of using debounce when mentioning a user because\n      // the debounce was generating the following bug\n      // https://apryse.atlassian.net/browse/WVR-2380\n      const deltaContainsMention = mentionsManager.doesDeltaContainMention(delta.ops);\n\n      if (deltaContainsMention) {\n        const formattedText = mentionsManager.getFormattedTextFromDeltas(delta.ops);\n        const mentionData = mentionsManager.extractMentionDataFromStr(formattedText);\n        const editortextValue = editor.getText();\n        const totalTextLength = editortextValue.length + mentionData.plainTextValue.length;\n        const textareaEditor = textareaRef.current?.editor;\n        setTimeout(() => textareaEditor?.setSelection(totalTextLength, totalTextLength), 1);\n      }\n    }\n  };\n\n  const textareaProps = {\n    ...props,\n    ref: (el) => {\n      textareaRef.current = el;\n      forwardedRef(el);\n    },\n    onChange: throttle(handleChange, 100),\n    onKeyDown: handleKeyDown,\n    userData,\n  };\n\n  return (\n    <>\n      <CommentTextarea {...textareaProps}/>\n    </>\n  );\n});\n\nNoteTextarea.displayName = 'NoteTextarea';\nNoteTextarea.propTypes = propTypes;\n\nexport default NoteTextarea;\n","import NoteTextarea from './NoteTextarea';\n\nexport default NoteTextarea;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteState.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport DataElements from 'constants/dataElement';\n\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport PopupPortal from 'components/PopupPortal';\nimport Icon from 'components/Icon';\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\nimport PropTypes from 'prop-types';\nimport getRootNode from 'helpers/getRootNode';\n\nimport './NoteState.scss';\n\nconst propTypes = {\n  style: PropTypes.object,\n  triggerElementName: PropTypes.string.isRequired,\n  onClose: PropTypes.func,\n  handleStateChange: PropTypes.func,\n};\n\nconst NoteStatePopup = ({\n  style,\n  triggerElementName,\n  onClose = () => {},\n  handleStateChange = () => {},\n}) => {\n  const [t] = useTranslation();\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\n  const popupRef = useRef();\n  const isMultiSelect = triggerElementName === DataElements.NOTE_MULTI_STATE_BUTTON;\n\n  useOnClickOutside(popupRef, (e) => {\n    const querySelector = isMultiSelect ? `[data-element=\"${DataElements.NOTE_MULTI_STATE_BUTTON}\"]` : `[data-id=\"${triggerElementName}\"]`;\n    const triggerElement = getRootNode().querySelector(querySelector);\n    const clickedTrigger = triggerElement.contains(e.target);\n    if (!clickedTrigger) {\n      // we only want to close the popup if we clicked outside and not on the trigger\n      onClose();\n    }\n  });\n\n  const createOnStateOptionButtonClickHandler = (state) => {\n    return () => {\n      handleStateChange(state);\n    };\n  };\n\n  useEffect(() => {\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef, false, isMultiSelect ? 'data-element' : 'data-id');\n    setPosition(position);\n  }, []);\n\n  return (\n    <PopupPortal\n      id=\"note-state-popup-portal\"\n      position={position}\n    >\n      <div\n        style={style}\n        className=\"note-state-options\"\n        ref={popupRef}\n      >\n        <DataElementWrapper dataElement=\"notePopupState\">\n          <DataElementWrapper\n            dataElement=\"notePopupStateAccepted\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Accepted')}\n          >\n            <Icon glyph=\"icon-annotation-status-accepted\" />\n            {t('option.state.accepted')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateRejected\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Rejected')}\n          >\n            <Icon glyph=\"icon-annotation-status-rejected\" />\n            {t('option.state.rejected')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateCancelled\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Cancelled')}\n          >\n            <Icon glyph=\"icon-annotation-status-cancelled\" />\n            {t('option.state.cancelled')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateCompleted\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Completed')}\n          >\n            <Icon glyph=\"icon-annotation-status-completed\" />\n            {t('option.state.completed')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateNone\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('None')}\n          >\n            <Icon glyph=\"icon-annotation-status-none\" />\n            {t('option.state.none')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateMarked\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Marked')}\n          >\n            <Icon glyph=\"icon-annotation-status-marked\" />\n            {t('option.state.marked')}\n          </DataElementWrapper>\n          <DataElementWrapper\n            dataElement=\"notePopupStateUnmarked\"\n            className=\"note-state-option\"\n            onClick={createOnStateOptionButtonClickHandler('Unmarked')}\n          >\n            <Icon glyph=\"icon-annotation-status-unmarked\" />\n            {t('option.state.unmarked')}\n          </DataElementWrapper>\n        </DataElementWrapper>\n      </div>\n    </PopupPortal>\n  );\n};\n\nNoteStatePopup.propTypes = propTypes;\n\nexport default NoteStatePopup;","import i18next from 'i18next';\nimport core from 'core';\n\nfunction createStateAnnotation(annotation, state, documentViewerKey = 1) {\n  // TODO: the code below is copied from annotManager.updateAnnotationState in WebViewer to work around the issue\n  // in https://github.com/PDFTron/webviewer-ui/issues/620\n  // the implement before wasn't causing any actual issues, but it was confusing and unnecessary to trigger two annotationChanged events when a status is set\n  // A proper fix should be done once https://trello.com/c/zWlkygNb/1023-consider-adding-a-setlocalizationhandler-to-corecontrols is implemented\n  // at that time, we could use the translation handler(t) internally in updateAnnotationState before setting the contents, and use that function instead in this component\n\n  const stateAnnotation = new window.Core.Annotations.StickyAnnotation();\n\n  stateAnnotation['InReplyTo'] = annotation['Id'];\n  stateAnnotation['X'] = annotation['X'];\n  stateAnnotation['Y'] = annotation['Y'];\n  stateAnnotation['PageNumber'] = annotation['PageNumber'];\n  stateAnnotation['Subject'] = 'Sticky Note';\n  stateAnnotation['Author'] = core.getCurrentUser();\n  stateAnnotation['State'] = state;\n  stateAnnotation['StateModel'] = state === 'Marked' || state === 'Unmarked' ? 'Marked' : 'Review';\n  stateAnnotation['Hidden'] = true;\n  stateAnnotation.enableSkipAutoLink();\n\n  const displayAuthor = core.getDisplayAuthor(stateAnnotation['Author'], documentViewerKey);\n  const stateMessage = i18next.t(`option.state.${state.toLowerCase()}`);\n  const contents = `${stateMessage} ${i18next.t('option.state.setBy')} ${displayAuthor}`;\n  stateAnnotation.setContents(contents);\n\n  return stateAnnotation;\n}\n\nexport {\n  createStateAnnotation,\n};\n","import { useRef, useEffect } from 'react';\nimport getRootNode from 'helpers/getRootNode';\n\n/**\n * Creates DOM element to be used as React root.\n * @ignore\n * @returns {HTMLElement}\n */\nfunction createRootElement(id) {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n * @ignore\n * @param {HTMLElement} rootElem\n */\nfunction addRootElement(rootElem) {\n  const node = (window.isApryseWebViewerWebComponent) ? getRootNode() : document.body;\n  node.insertBefore(\n    rootElem,\n    node.lastElementChild.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n * @ignore\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n * @param {String} id The id of the target container, e.g 'modal' or 'spotlight'\n * @returns {HTMLElement} The DOM node to use as the Portal target.\n */\nfunction usePortal(id) {\n  const rootElemRef = useRef(null);\n  useEffect(function setupElement() {\n    // Look for existing target dom element to append to\n\n    const existingParent = document.querySelector(`#${id}`);\n    // Parent is either a new root or the existing dom element\n    const parentElem = existingParent || createRootElement(id);\n\n    // If there is no existing DOM element, add a new one.\n    if (!existingParent) {\n      addRootElement(parentElem);\n    }\n\n    // Add the detached element to the parent\n    parentElem.appendChild(rootElemRef.current);\n\n    return function removeElement() {\n      rootElemRef.current.remove();\n      if (!parentElem.childElementCount) {\n        parentElem.remove();\n      }\n    };\n  }, [id]);\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;","import { createPortal } from 'react-dom';\nimport usePortal from 'hooks/usePortal';\n\nconst Portal = ({ id, position, children }) => {\n  const target = usePortal(id);\n  target.style.position = 'absolute';\n  target.style.top = position.top === 'auto' ? position.top : `${position.top}px`;\n  target.style.left = position.left === 'auto' ? position.left : `${position.left}px`;\n  target.style.right = position.right === 'auto' ? position.right : `${position.right}px`;\n  target.style.pointerEvents = 'none';\n  target.style.zIndex = 999;\n\n  return createPortal(\n    children,\n    target,\n  );\n};\n\nexport default Portal;","import PopupPortal from './PopupPortal';\n\nexport default PopupPortal;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup{width:100%;margin:0;position:relative;max-width:none;border-radius:4px 4px 0 0;border:0;padding-bottom:24px;box-shadow:none}}.AnnotationStylePopup .back-to-menu-container{margin-top:var(--padding-medium);margin-right:var(--padding-medium);margin-left:var(--padding-medium);padding-bottom:var(--padding-small);border-bottom:1px solid var(--border)}.AnnotationStylePopup .Button.back-to-menu-button{margin:0;width:100%;height:32px;border-radius:0;justify-content:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .AnnotationStylePopup .Button.back-to-menu-button{width:100%;height:32px}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js!./quill.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container.ql-disabled .ql-editor ul[data-checked]>li:before{pointer-events:none}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-container .ql-editor{box-sizing:border-box;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;-o-tab-size:4;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ql-editor>*{cursor:text}.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6,.ql-editor ol,.ql-editor p,.ql-editor pre,.ql-editor ul{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor p{margin:0;padding:0}.ql-editor ol,.ql-editor ul{padding-left:1.5em}.ql-editor ol>li,.ql-editor ul>li{list-style-type:none}.ql-editor ul>li:before{content:\\\"\\\\2022\\\"}.ql-editor ul[data-checked=false],.ql-editor ul[data-checked=true]{pointer-events:none}.ql-editor ul[data-checked=false]>li *,.ql-editor ul[data-checked=true]>li *{pointer-events:all}.ql-editor ul[data-checked=false]>li:before,.ql-editor ul[data-checked=true]>li:before{color:#777;cursor:pointer;pointer-events:all}.ql-editor ul[data-checked=true]>li:before{content:\\\"\\\\2611\\\"}.ql-editor ul[data-checked=false]>li:before{content:\\\"\\\\2610\\\"}.ql-editor li:before{display:inline-block;white-space:nowrap;width:1.2em}.ql-editor li:not(.ql-direction-rtl):before{margin-left:-1.5em;margin-right:.3em;text-align:right}.ql-editor li.ql-direction-rtl:before{margin-left:.3em;margin-right:-1.5em}.ql-editor ol li:not(.ql-direction-rtl),.ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}.ql-editor ol li.ql-direction-rtl,.ql-editor ul li.ql-direction-rtl{padding-right:1.5em}.ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}.ql-editor ol li:before{content:counter(list-0,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-increment:list-1}.ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-2{counter-increment:list-2}.ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-3{counter-increment:list-3}.ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-4{counter-increment:list-4}.ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-5{counter-increment:list-5}.ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-6{counter-increment:list-6}.ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}.ql-editor ol li.ql-indent-7{counter-increment:list-7}.ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}.ql-editor ol li.ql-indent-8{counter-increment:list-8}.ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-8{counter-reset:list-9}.ql-editor ol li.ql-indent-9{counter-increment:list-9}.ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) \\\". \\\"}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor.ql-blank:before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow.ql-toolbar:after,.ql-snow .ql-toolbar:after{clear:both;content:\\\"\\\";display:table}.ql-snow.ql-toolbar button,.ql-snow .ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow.ql-toolbar button svg,.ql-snow .ql-toolbar button svg{float:left;height:100%}.ql-snow.ql-toolbar button:active:hover,.ql-snow .ql-toolbar button:active:hover{outline:none}.ql-snow.ql-toolbar input.ql-image[type=file],.ql-snow .ql-toolbar input.ql-image[type=file]{display:none}.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar button:focus,.ql-snow .ql-toolbar button:focus,.ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover{color:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill{fill:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter{stroke:#06c}@media(pointer:coarse){.ql-snow.ql-toolbar button:hover:not(.ql-active),.ql-snow .ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow,.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:\\\"\\\";display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-stroke.ql-thin,.ql-snow .ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor pre{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label:before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-item:before,.ql-snow .ql-picker.ql-header .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"1\\\"]:before{content:\\\"Heading 1\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"2\\\"]:before{content:\\\"Heading 2\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"3\\\"]:before{content:\\\"Heading 3\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"4\\\"]:before{content:\\\"Heading 4\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"5\\\"]:before{content:\\\"Heading 5\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"6\\\"]:before{content:\\\"Heading 6\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-item:before,.ql-snow .ql-picker.ql-font .ql-picker-label:before{content:\\\"Sans Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:\\\"Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:\\\"Monospace\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-item:before,.ql-snow .ql-picker.ql-size .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:\\\"Small\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:\\\"Large\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]:before{content:\\\"Huge\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:0 2px 8px rgba(0,0,0,.2)}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label,.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip:before{content:\\\"Visit URL:\\\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action:after{border-right:1px solid #ccc;content:\\\"Edit\\\";margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove:before{content:\\\"Remove\\\";margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action:after{border-right:0;content:\\\"Save\\\";padding-right:0}.ql-snow .ql-tooltip[data-mode=link]:before{content:\\\"Enter link:\\\"}.ql-snow .ql-tooltip[data-mode=formula]:before{content:\\\"Enter formula:\\\"}.ql-snow .ql-tooltip[data-mode=video]:before{content:\\\"Enter video:\\\"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./CommentTextarea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.comment-textarea{position:relative}.comment-textarea .ql-toolbar{display:none}.comment-textarea .ql-container{border:none}.comment-textarea .ql-container .ql-editor{width:100%;padding:4px 6px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);resize:none;overflow:hidden;box-sizing:border-box}.comment-textarea .ql-container .ql-editor:focus{outline:none;border:1px solid var(--focus-border)}.comment-textarea .ql-container .ql-editor.ql-blank:before{left:8px;list-style-type:none;font-style:normal;color:var(--placeholder-text)}.comment-textarea .ql-container .ql-editor p{margin:0;word-break:break-word}.comment-textarea .ql-container .ql-editor ul>li:before{content:none!important}.comment-textarea .ql-container.ql-snow{border:none}.comment-textarea .add-attachment{position:absolute;bottom:2px;right:2px;width:24px;height:24px}.comment-textarea .add-attachment:hover{background-color:var(--blue-1)}.comment-textarea .add-attachment .Icon{padding:3px}.ql-editor ul>li:before{content:none!important}.mention__element{width:170px;z-index:9001!important;max-height:200px;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;background-color:var(--component-background);border:1px solid var(--border);border-radius:4px}.mention__suggestions__list{width:100%;font-size:14px;margin-top:0;padding-left:0!important;list-style:none;word-wrap:break-word;border-radius:4px}.mention__suggestions__item{background-color:var(--component-background);white-space:nowrap;padding-left:0;text-overflow:clip;padding:7px 5px 1px!important;margin:0;width:100%;cursor:pointer}.mention__suggestions__item .email{margin-top:2px;font-size:12px;white-space:normal;color:var(--faded-text)}.mention__suggestions__item.selected{background-color:var(--view-header-button-active)!important}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NotePopup{flex-grow:0;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative}.NotePopup,.NotePopup .overflow{display:flex;width:28px;height:28px}.NotePopup .overflow{border-radius:4px;justify-content:center;align-items:center}.NotePopup .overflow .Icon{width:24px;height:24px}.NotePopup .overflow:hover{background:var(--blue-1)}.NotePopup .overflow.active{background:var(--popup-button-active)}.NotePopup .options{display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;position:absolute;border-radius:4px;background:var(--component-background);top:40px;width:-webkit-max-content;width:-moz-max-content;width:max-content}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NotePopup .options{right:0}}.NotePopup .options .note-popup-option{padding:0;border:none;background-color:transparent;align-items:flex-start}:host(:not([data-tabbing=true])) .NotePopup .options .note-popup-option,html:not([data-tabbing=true]) .NotePopup .options .note-popup-option{outline:none}.NotePopup .options.options-reply{top:30px}.NotePopup .options .option{display:flex;flex-direction:column;justify-content:center;height:28px;padding-left:8px;padding-right:17px;border-radius:0}.NotePopup .options .option:hover{background-color:var(--popup-button-hover)}.NotePopup .options .option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.NotePopup .options .option:last-child{border-bottom-right-radius:4px}.NotePopup .Button.active{background:var(--popup-button-active)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-state-container{position:relative;bottom:52px;pointer-events:auto}.NoteState{border:none;background-color:transparent;flex-grow:0;display:flex;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 10px 0 15px}:host(:not([data-tabbing=true])) .NoteState,html:not([data-tabbing=true]) .NoteState{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteState{padding-left:0;padding-right:5px}}.NoteState .overflow{width:28px;height:28px;border-radius:4px}.NoteState .overflow .Icon{margin:4px;width:20px;height:20px}.NoteState .overflow:hover{background:var(--blue-1)}.NoteState .Button.active,.NoteState .overflow.active{background:var(--popup-button-active)}.note-state-options{padding:0;border:none;background-color:transparent;font-size:inherit;display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;border-radius:4px;background:var(--component-background);pointer-events:auto}:host(:not([data-tabbing=true])) .note-state-options,html:not([data-tabbing=true]) .note-state-options{outline:none}.note-state-options *{box-sizing:border-box}.note-state-options .note-state-option{display:flex;flex-direction:row;justify-content:flex-start;height:35px;padding:8px;border-radius:0}.note-state-options .note-state-option .Icon{margin-right:5px;width:18px;height:18px}.note-state-options .note-state-option:hover{background-color:var(--popup-button-hover)}.note-state-options .note-state-option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.note-state-options .note-state-option:last-child{border-bottom-right-radius:4px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteHeader{padding-right:12px;position:relative;flex:1;color:var(--text-color);display:flex}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteHeader{flex:none}}.NoteHeader .author-and-overflow{display:flex;justify-content:space-between}.NoteHeader .state-and-overflow{display:flex;flex:1;justify-content:flex-end}.NoteHeader .author-and-time{display:flex;flex-direction:column;word-break:break-word}.NoteHeader .author{font-weight:700}.NoteHeader .date-and-num-replies{display:flex}.NoteHeader .date-and-num-replies .num-replies-container{display:flex;flex-grow:1;padding-left:10px}.NoteHeader .date-and-num-replies .num-replies-container .num-reply-icon{height:12px;width:12px}.NoteHeader .date-and-num-replies .num-replies-container .num-replies{opacity:.8;font-size:10px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}.NoteHeader .author-and-date{flex:1;min-width:0;position:relative}.NoteHeader .unread-notification{position:absolute;width:13px;height:13px;right:-2px;top:-2px;border-radius:10000px;border:2px solid var(--component-background);background:#00a5e4}.NoteHeader .type-icon-container{padding-right:13px}.NoteHeader .type-icon{margin:2px;width:24px;height:24px}.NoteHeader .date-and-time{opacity:.8;font-size:10px;color:var(--faded-text)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .date-and-time{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .date-and-time{font-size:12px}}.NoteHeader .author-name{font-weight:700}.NoteHeader .isReply{padding-left:0;padding-top:0;font-size:10px}.parent{padding-left:12px;padding-top:12px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAttachmentList.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".reply-attachment-list{display:flex;flex-direction:column;cursor:default}.reply-attachment-list .reply-attachment{display:flex;flex-direction:column;background-color:var(--gray-1);border-radius:4px;cursor:pointer;overflow:hidden}.reply-attachment-list .reply-attachment:not(:last-child){margin-bottom:8px}.reply-attachment-list .reply-attachment .reply-attachment-preview{width:100%;max-height:80px;display:flex;justify-content:center}.reply-attachment-list .reply-attachment .reply-attachment-preview.dirty{position:relative;margin-bottom:15px}.reply-attachment-list .reply-attachment .reply-attachment-preview img{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.reply-attachment-list .reply-attachment .reply-attachment-preview .reply-attachment-preview-message{font-size:11px;color:var(--error-text-color);position:absolute;bottom:-15px;left:10px}.reply-attachment-list .reply-attachment .reply-attachment-info{display:flex;align-items:center;height:40px;padding:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-attachment-icon{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-file-name{height:16px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:8px;margin-right:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button:hover{background-color:var(--blue-1)}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button .Icon{height:16px;width:16px}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteContent.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteContent{position:relative;display:flex;flex-direction:column;align-items:left;flex:1;color:var(--text-color);padding-bottom:12px}.NoteContent.isReply{padding-bottom:0}.NoteContent.unread.isReply{background:rgba(0,165,228,.08)}.NoteContent.unread.clicked .author-and-time span{font-weight:400}.NoteContent.unread .author-and-time span{font-weight:700}.NoteContent .container{padding-left:52px;padding-right:12px}.NoteContent .container,.NoteContent .container-reply{margin-top:8px;overflow:hidden;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:text}.NoteContent .edit-content{margin-top:7px;display:flex;flex-direction:column;position:relative;flex:1;padding-left:52px;padding-right:12px;padding-bottom:12px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteContent .edit-content{flex:none}}.NoteContent .edit-content textarea{width:100%;padding-left:8px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-top:4px;padding-bottom:4px;resize:none;overflow:hidden;box-sizing:border-box}.NoteContent .edit-content textarea:focus{outline:none;border:1px solid var(--focus-border)}.NoteContent .edit-content textarea::-moz-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea:-ms-input-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea::placeholder{color:var(--placeholder-text)}.NoteContent .edit-content .edit-buttons{display:flex;flex-direction:row;justify-content:flex-end;margin-top:4px}.NoteContent .edit-content .edit-buttons>div{margin-right:4px}.NoteContent .edit-content .edit-buttons .save-button{border:none;background-color:transparent;cursor:pointer;flex-shrink:0;background:var(--primary-button);border-radius:4px;height:24px;display:flex;align-items:center;justify-content:center;position:relative;color:var(--primary-button-text);padding:0 13px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .save-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .save-button{outline:none}.NoteContent .edit-content .edit-buttons .save-button:hover{background:var(--primary-button-hover);color:var(--primary-button-text)}.NoteContent .edit-content .edit-buttons .save-button.disabled{background:var(--gray-6);border-color:var(--gray-6);cursor:not-allowed}.NoteContent .edit-content .edit-buttons .cancel-button{border:none;background-color:transparent;color:var(--secondary-button-text);padding:0 10px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:2px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .cancel-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .cancel-button{outline:none}.NoteContent .edit-content .edit-buttons .cancel-button:hover{color:var(--secondary-button-hover)}.NoteContent .reply-content{padding-left:0}.NoteContent .contents{white-space:pre-wrap;color:var(--text-color);margin-right:5px;padding:0;word-break:normal;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.NoteContent .contents .highlight{background:#fffc95;color:#333}.NoteContent .highlight{background:#fffc95}.NoteContent .selected-text-preview{padding-left:52px;padding-top:8px}.NoteContent .reply-attachment-list{margin-bottom:8px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyArea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.reply-area-container{border-top:1px solid var(--divider);display:flex;flex-direction:column}.reply-area-container .reply-attachment-list{margin:12px 12px 0}.reply-area-container .reply-area-with-button{display:flex}.reply-area-container .reply-area-with-button .reply-area{position:relative;flex:1;margin:12px 17px 12px 12px;border-radius:4px;align-items:center}.reply-area-container .reply-area-with-button .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-container .reply-area-with-button .reply-button-container{display:flex;flex-direction:column;justify-content:flex-end}.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-container .reply-area-with-button .reply-button-container .reply-button,html:not([data-tabbing=true]) .reply-area-container .reply-area-with-button .reply-button-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:80px}}.reply-area-container .reply-area-with-button .reply-button-container .reply-button:hover{background:var(--blue-1)}.reply-area-container .reply-area-with-button .reply-button-container .reply-button.disabled{cursor:not-allowed}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationNoteConnectorLine.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media print{#line-connector-root{opacity:0}}#line-connector-root{position:relative;z-index:69}.horizontalLine{height:2px}.horizontalLine,.verticalLine{background-color:rgba(30,120,235,.5);position:fixed}.verticalLine{width:2px}.arrowHead{position:absolute;top:0;left:0;margin:auto;width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:7px solid rgba(30,120,235,.5);transform:translateX(-100%) translateY(-50%) translateY(1px)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./Note.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Note{padding:0;border:none;background-color:transparent;display:block;text-align:left;border-radius:4px;box-shadow:0 0 3px 0 var(--note-box-shadow);margin-bottom:8px;margin-left:2px;background:var(--component-background);cursor:pointer}:host(:not([data-tabbing=true])) .Note,html:not([data-tabbing=true]) .Note{outline:none}.Note.unread{border:1.2px solid #00a5e4}.Note.expanded{box-shadow:0 4px 16px var(--note-box-shadow-expanded),0 0 4px 0 var(--note-box-shadow)}.Note.is-multi-selected{box-shadow:0 4px 16px rgba(134,142,150,.24),0 0 4px 0 var(--note-box-shadow)}.Note .mark-all-read-button{background:#00a5e4;text-align:center;color:#fff;height:16px;font-size:12px;width:100%;border-radius:0}.Note .divider{height:1px;width:100%;background:var(--divider)}.Note .reply-divider{background:var(--reply-divider);height:1px;width:100%}.Note .replies{margin-left:52px;padding-bottom:12px}.Note .reply{padding-left:12px;padding-bottom:24px;border-left:1px solid var(--reply-divider)}.Note .reply:last-of-type{padding-bottom:0}.Note .group-section{margin-left:52px;padding-bottom:12px;display:flex;flex-direction:column;grid-row-gap:4px;row-gap:4px;padding-right:12px}.Note .text-button{color:var(--secondary-button-text);display:flex}.Note .text-button .Icon{color:var(--secondary-button-text);height:18px;width:18px}.Note .group-child{padding-top:4px;padding-bottom:4px}.Note .group-child:hover{background:var(--view-header-button-hover)}.Note .group-child .NoteContent{padding-bottom:0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nconst ReplyAttachmentPicker = ({ annotationId, addAttachments }) => {\n  const replyAttachmentHandler = useSelector((state) => selectors.getReplyAttachmentHandler(state));\n\n  const onChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      let attachment = file;\n      if (replyAttachmentHandler) {\n        const url = await replyAttachmentHandler(file);\n        attachment = {\n          url,\n          name: file.name,\n          size: file.size,\n          type: file.type\n        };\n      }\n      addAttachments(annotationId, [attachment]);\n    }\n  };\n\n  return (\n    <input\n      id=\"reply-attachment-picker\"\n      type=\"file\"\n      style={{ display: 'none' }}\n      onChange={onChange}\n      onClick={(e) => {\n        e.target.value = '';\n      }}\n    />\n  );\n};\n\nexport default ReplyAttachmentPicker;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ListSeparator.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ListSeparator{margin-top:16px;margin-bottom:8px;font-family:Lato;font-weight:500;color:var(--list-separator-color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Icon from 'components/Icon';\n\nimport './NotePopup.scss';\n\nconst propTypes = {\n  handleEdit: PropTypes.func,\n  handleDelete: PropTypes.func,\n  closePopup: PropTypes.func,\n  openPopup: PropTypes.func,\n  isEditable: PropTypes.bool,\n  isDeletable: PropTypes.bool,\n  isOpen: PropTypes.bool,\n};\n\nfunction noop() { }\n\nfunction NotePopup(props) {\n  const {\n    handleEdit = noop,\n    handleDelete = noop,\n    closePopup = noop,\n    openPopup = noop,\n    isEditable,\n    isDeletable,\n    isOpen,\n    isReply,\n  } = props;\n\n  const [t] = useTranslation();\n  const popupRef = React.useRef();\n\n  useOnClickOutside(popupRef, () => {\n    closePopup();\n  });\n\n  const togglePopup = (e) => {\n    e.stopPropagation();\n    if (isOpen) {\n      closePopup();\n    } else {\n      openPopup();\n    }\n  };\n\n  function onEditButtonClick(e) {\n    e.stopPropagation();\n    closePopup();\n    handleEdit();\n  }\n\n  function onDeleteButtonClick() {\n    closePopup();\n    handleDelete();\n  }\n\n  if (!isEditable && !isDeletable) {\n    return null;\n  }\n\n  const notePopupButtonClass = classNames('overflow note-popup-toggle-trigger', { active: isOpen });\n  const optionsClass = classNames('options note-popup-options', { 'options-reply': isReply });\n  return (\n    <DataElementWrapper\n      className=\"NotePopup\"\n      dataElement=\"notePopup\"\n      ref={popupRef}\n    >\n      <div className={notePopupButtonClass} onClick={togglePopup}>\n        <Icon glyph=\"icon-tools-more\" />\n      </div>\n      {isOpen && (\n        <div className={optionsClass}>\n          {isEditable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupEdit\"\n              onClick={onEditButtonClick}\n            >\n              {t('action.edit')}\n            </DataElementWrapper>\n          )}\n          {isDeletable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupDelete\"\n              onClick={onDeleteButtonClick}\n            >\n              {t('action.delete')}\n            </DataElementWrapper>\n          )}\n        </div>\n      )}\n    </DataElementWrapper>\n  );\n}\n\nNotePopup.propTypes = propTypes;\n\nexport default NotePopup;\n","import React from 'react';\nimport core from 'core';\nimport NotePopup from './NotePopup';\nimport Tooltip from 'components/Tooltip';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotePopupContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation, setIsEditing, noteIndex } = props;\n\n  const [canModify, setCanModify] = React.useState(core.canModify(annotation));\n  const [canModifyContents, setCanModifyContents] = React.useState(core.canModifyContents(annotation));\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [t] = useTranslation();\n\n  React.useEffect(() => {\n    function onUpdateAnnotationPermission() {\n      setCanModify(core.canModify(annotation, activeDocumentViewerKey));\n      setCanModifyContents(core.canModifyContents(annotation, activeDocumentViewerKey));\n    }\n\n    onUpdateAnnotationPermission();\n    core.addEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, undefined, activeDocumentViewerKey);\n    return () => core.removeEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, activeDocumentViewerKey);\n  }, [annotation, activeDocumentViewerKey]);\n\n  const handleEdit = React.useCallback(() => {\n    const isFreeText = annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n    if (isFreeText && core.getAnnotationManager(activeDocumentViewerKey).isFreeTextEditingEnabled()) {\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationDoubleClicked', annotation);\n    } else {\n      setIsEditing(true, noteIndex);\n    }\n  }, [annotation, setIsEditing, noteIndex]);\n\n  const handleDelete = React.useCallback(() => {\n    core.deleteAnnotations([annotation, ...annotation.getGroupedChildren()], undefined, activeDocumentViewerKey);\n  }, [annotation]);\n\n  const openPopup = () => setIsOpen(true);\n  const closePopup = () => setIsOpen(false);\n\n  const isEditable = canModifyContents;\n  const isDeletable = canModify && !annotation?.NoDelete;\n\n  const passProps = {\n    handleEdit,\n    handleDelete,\n    isEditable,\n    isDeletable,\n    isOpen,\n    closePopup,\n    openPopup,\n  };\n\n  // We wrap the element in a div so the tooltip works properly\n  return (\n    <Tooltip content={t('formField.formFieldPopup.options')}>\n      <div>\n        <NotePopup {...props} {...passProps} />\n      </div>\n    </Tooltip>\n  );\n}\n\nexport default NotePopupContainer;\n","import NotePopupContainer from './NotePopupContainer';\n\nexport default NotePopupContainer;\n","import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Tooltip from '../Tooltip';\nimport NoteStatePopup from './NoteStatePopup';\n\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport Icon from 'components/Icon';\n\nimport './NoteState.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  openOnInitialLoad: PropTypes.bool,\n  handleStateChange: PropTypes.func\n};\n\nfunction NoteState(props) {\n  const {\n    annotation,\n    openOnInitialLoad = false,\n    handleStateChange = () => {},\n  } = props;\n\n  const [t] = useTranslation();\n  const [isOpen, setIsOpen] = useState(openOnInitialLoad);\n  const popupRef = useRef();\n\n  const togglePopup = (e) => {\n    e.stopPropagation();\n    if (isOpen) {\n      setIsOpen(false);\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const annotationState = annotation.getStatus();\n  const icon = `icon-annotation-status-${annotationState === '' ? 'none' : annotationState.toLowerCase()}`;\n  const noteStateButtonClassName = classNames('overflow', { active: isOpen });\n  const dataElement = 'noteState';\n  const id = annotation.Id;\n\n  return (\n    <DataElementWrapper\n      className=\"NoteState\"\n      dataElement={dataElement}\n      onClick={togglePopup}\n      ref={popupRef}\n      data-id={id}\n    >\n      <Tooltip content={t('option.notesOrder.status')}>\n        <div className={noteStateButtonClassName}>\n          <Icon glyph={icon} />\n        </div>\n      </Tooltip>\n      {isOpen && (\n        <NoteStatePopup\n          triggerElementName={id}\n          handleStateChange={handleStateChange}\n          onClose={() => {\n            setIsOpen(false);\n          }}\n        />\n      )}\n    </DataElementWrapper>\n  );\n}\n\nNoteState.propTypes = propTypes;\n\nexport default NoteState;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport core from 'core';\n\nimport NoteState from './NoteState';\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\n\nconst propTypes = {\n  annotation: PropTypes.object,\n};\n\nfunction NoteStateContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation } = props;\n\n  const handleStateChange = React.useCallback(function handleStateChangeCallback(newValue) {\n    const stateAnnotation = createStateAnnotation(annotation, newValue, activeDocumentViewerKey);\n    annotation.addReply(stateAnnotation);\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotationManager.addAnnotation(stateAnnotation);\n    annotationManager.trigger('addReply', [stateAnnotation, annotation, annotationManager.getRootAnnotation(annotation)]);\n  }, [annotation, activeDocumentViewerKey]);\n\n  return (\n    <div>\n      <NoteState handleStateChange={handleStateChange} {...props} />\n    </div>\n  );\n}\n\nNoteStateContainer.propTypes = propTypes;\nexport default NoteStateContainer;\n","import NoteStateContainer from './NoteStateContainer';\n\nexport default NoteStateContainer;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Tooltip from 'components/Tooltip';\nimport Icon from 'components/Icon';\n\nconst NoteUnpostedCommentIndicator = ({ annotationId, pendingEditTextMap, pendingReplyMap, pendingAttachmentMap }) => {\n  const { t } = useTranslation();\n  const [hasUnpostedComment, setHasUnpostedComment] = useState(false);\n  const [hasUnpostedReply, setHasUnpostedReply] = useState(false);\n  const [hasUnpostedAttachment, setHasUnpostedAttachment] = useState(false);\n\n  useEffect(() => {\n    setHasUnpostedComment(pendingEditTextMap[annotationId]?.length > 0);\n    setHasUnpostedReply(pendingReplyMap[annotationId]?.length > 0);\n    setHasUnpostedAttachment(pendingAttachmentMap[annotationId]?.length > 0);\n  }, [pendingEditTextMap, pendingReplyMap, pendingAttachmentMap]);\n\n  return (\n    (hasUnpostedComment || hasUnpostedReply || hasUnpostedAttachment) ?\n      <div data-element=\"unpostedCommentIndicator\">\n        <Tooltip content={t('message.unpostedComment')}>\n          <div>\n            <Icon className=\"type-icon\" glyph={'icon-unposted-comment'} />\n          </div>\n        </Tooltip>\n      </div> :\n      null\n  );\n};\n\nexport default NoteUnpostedCommentIndicator;\n","import NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicatorContainer';\n\nexport default NoteUnpostedCommentIndicator;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteContext from 'components/Note/Context';\nimport NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicator';\n\nconst NoteUnpostedCommentIndicatorContainer = ({ annotationId }) => {\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'unpostedCommentIndicator'));\n  const { pendingEditTextMap, pendingReplyMap, pendingAttachmentMap } = React.useContext(NoteContext);\n\n  if (isDisabled) {\n    return null;\n  }\n  return (\n    <NoteUnpostedCommentIndicator\n      annotationId={annotationId}\n      pendingEditTextMap={pendingEditTextMap}\n      pendingReplyMap={pendingReplyMap}\n      pendingAttachmentMap={pendingAttachmentMap}\n    />);\n};\n\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport NotePopup from 'components/NotePopup';\nimport NoteState from 'components/NoteState';\nimport Icon from 'components/Icon';\nimport NoteUnpostedCommentIndicator from 'components/NoteUnpostedCommentIndicator';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport getColor from 'helpers/getColor';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { NotesPanelSortStrategy } from 'constants/sortStrategies';\nimport Theme from 'constants/theme';\nimport Choice from 'components/Choice';\n\nimport './NoteHeader.scss';\n\nconst propTypes = {\n  icon: PropTypes.string,\n  iconColor: PropTypes.string,\n  color: PropTypes.string,\n  fillColor: PropTypes.string,\n  annotation: PropTypes.object,\n  language: PropTypes.string,\n  noteDateFormat: PropTypes.string,\n  isSelected: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  notesShowLastUpdatedDate: PropTypes.bool,\n  isUnread: PropTypes.bool,\n  renderAuthorName: PropTypes.func,\n  isNoteStateDisabled: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  noteIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n  activeTheme: PropTypes.string,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n  showAnnotationNumbering: PropTypes.bool,\n};\n\nfunction NoteHeader(props) {\n  const {\n    icon,\n    iconColor,\n    annotation,\n    language,\n    noteDateFormat,\n    isSelected,\n    setIsEditing,\n    notesShowLastUpdatedDate,\n    isReply,\n    isUnread,\n    renderAuthorName,\n    isNoteStateDisabled,\n    isEditing,\n    noteIndex,\n    sortStrategy,\n    activeTheme,\n    isMultiSelected,\n    isMultiSelectMode,\n    handleMultiSelect,\n    isGroupMember,\n    showAnnotationNumbering,\n    timezone,\n  } = props;\n\n  const [t] = useTranslation();\n\n  let date;\n  const dateCreated = (sortStrategy === NotesPanelSortStrategy.MODIFIED_DATE || (notesShowLastUpdatedDate && sortStrategy !== NotesPanelSortStrategy.CREATED_DATE)) ? getLatestActivityDate(annotation) : annotation.DateCreated;\n  if (timezone && dateCreated) {\n    const datetimeStr = dateCreated.toLocaleString('en-US', { timeZone: timezone });\n    date = new Date(datetimeStr);\n  } else {\n    date = dateCreated;\n  }\n\n  const numberOfReplies = annotation.getReplies().length;\n  let color = annotation[iconColor]?.toHexString?.();\n\n  if (activeTheme === Theme.DARK && color && isDarkColorHex(color)) {\n    color = '#FFFFFF';\n  } else if (activeTheme === Theme.LIGHT && color && isLightColorHex(color)) {\n    color = '#000000';\n  }\n\n  const fillColor = getColor(annotation.FillColor);\n  const annotationAssociatedNumber = annotation.getAssociatedNumber();\n  const annotationDisplayedAssociatedNumber = `#${annotationAssociatedNumber} - `;\n\n  const authorAndDateClass = classNames('author-and-date', { isReply });\n  const noteHeaderClass = classNames('NoteHeader', { parent: !isReply && !isGroupMember });\n\n  return (\n    <div className={noteHeaderClass}>\n      {!isReply &&\n        <div className=\"type-icon-container\">\n          {isUnread &&\n            <div className=\"unread-notification\"></div>\n          }\n          <Icon className=\"type-icon\" glyph={icon} color={color} fillColor={fillColor} />\n        </div>\n      }\n      <div className={authorAndDateClass}>\n        <div className=\"author-and-overflow\">\n          <div className=\"author-and-time\">\n            <div className=\"author\">\n              {showAnnotationNumbering && annotationAssociatedNumber !== undefined &&\n                <span className=\"annotation-number\">{annotationDisplayedAssociatedNumber}</span>\n              }\n              {renderAuthorName(annotation)}\n            </div>\n            <div className=\"date-and-num-replies\">\n              <div className=\"date-and-time\">\n                {date ? dayjs(date).locale(language).format(noteDateFormat) : t('option.notesPanel.noteContent.noDate')}\n                {isGroupMember && ` (Page ${annotation.PageNumber})`}\n              </div>\n              {numberOfReplies > 0 && !isSelected &&\n                <div className=\"num-replies-container\">\n                  <Icon className=\"num-reply-icon\" glyph={'icon-chat-bubble'} />\n                  <div className=\"num-replies\">{numberOfReplies}</div>\n                </div>}\n            </div>\n          </div>\n          <div className=\"state-and-overflow\">\n            {isMultiSelectMode && !isGroupMember && !isReply &&\n              <Choice\n                id={`note-multi-select-toggle_${annotation.Id}`}\n                checked={isMultiSelected}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleMultiSelect(!isMultiSelected);\n                }}\n              />}\n            <NoteUnpostedCommentIndicator annotationId={annotation.Id} />\n            {!isNoteStateDisabled && !isReply && !isMultiSelectMode && !isGroupMember &&\n              <NoteState\n                annotation={annotation}\n                isSelected={isSelected}\n              />\n            }\n            {!isEditing && isSelected && !isMultiSelectMode && !isGroupMember &&\n              <NotePopup\n                noteIndex={noteIndex}\n                annotation={annotation}\n                setIsEditing={setIsEditing}\n                isReply={isReply}\n              />}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nNoteHeader.propTypes = propTypes;\n\nexport default NoteHeader;\n","import NoteHeader from './NoteHeader';\n\nexport default NoteHeader;","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteTextPreview from './NoteTextPreview';\n\n\nfunction NoteTextPreviewContainer(props) {\n  const [notePanelWidth] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n    ],\n    shallowEqual,\n  );\n\n  return (\n    <NoteTextPreview {...props} panelWidth={notePanelWidth} />\n  );\n}\n\nexport default NoteTextPreviewContainer;","import NoteTextPreview from './NoteTextPreviewContainer';\n\nexport default NoteTextPreview;","const icons = {\n  pdf: 'ic-file-pdf',\n  image: 'ic-file-img',\n  cad: 'ic-file-cad',\n  doc: 'ic-file-doc',\n  ppt: 'ic-file-ppt',\n  xls: 'ic-file-xls',\n  unknown: 'ic-file-etc'\n};\n\nconst FileAttachmentUtils = window.Core.Annotations.FileAttachmentUtils;\n\nexport async function decompressFileContent(file) {\n  return FileAttachmentUtils.decompressWithFlateDecode(file.content, file.type);\n}\n\nexport async function setAnnotationAttachments(annotation, files = []) {\n  await annotation.setAttachments(files);\n}\n\nexport function isImage(file) {\n  if (file.type && file.type.startsWith('image/')) {\n    return true;\n  }\n  return false;\n}\n\nexport function getAttachmentIcon(file) {\n  if (isImage(file)) {\n    return icons.image;\n  }\n  const extension = file.name?.split('.').pop().toLowerCase();\n  switch (extension) {\n    case 'pdf':\n      return icons.pdf;\n    case 'cad':\n      return icons.cad;\n    case 'doc':\n    case 'docx':\n      return icons.doc;\n    case 'ppt':\n    case 'pptx':\n      return icons.ppt;\n    case 'xls':\n    case 'xlsx':\n      return icons.xls;\n    default:\n      return icons.unknown;\n  }\n}\n","import DOMPurify from 'dompurify';\n\nconst SVG_MIME_TYPE = 'image/svg+xml';\n\nconst hasFileSize = (file) => {\n  return file.size !== undefined;\n};\n\n// Taken from https://github.com/mattkrick/sanitize-svg/blob/master/src/sanitizeSVG.ts#L31\nconst readAsText = (svg) => {\n  return new Promise((resolve) => {\n    if (!hasFileSize(svg)) {\n      resolve(svg.toString('utf-8'));\n    } else {\n      const fileReader = new FileReader();\n      fileReader.onload = () => resolve(fileReader.result);\n      fileReader.readAsText(svg);\n    }\n  });\n};\n\nexport const isSVG = (file) => {\n  return file.type === SVG_MIME_TYPE;\n};\n\nexport const sanitizeSVG = async (file) => {\n  const svgText = await readAsText(file);\n  if (!svgText) {\n    return { svg: file };\n  }\n\n  const forbiddenTags = [];\n  DOMPurify.addHook('uponSanitizeElement', (_, hookEvent) => {\n    const { tagName, allowedTags } = hookEvent;\n    if (!allowedTags[tagName]) {\n      forbiddenTags.push(tagName);\n    }\n  });\n\n  const clean = DOMPurify.sanitize(svgText);\n  const svg = new Blob([clean], { type: SVG_MIME_TYPE });\n  return { svg, isDirty: forbiddenTags.length > 0 };\n};","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport { saveAs } from 'file-saver';\nimport Button from 'components/Button';\nimport Icon from 'components/Icon';\nimport Tooltip from 'components/Tooltip';\nimport { getAttachmentIcon, isImage, decompressFileContent } from 'helpers/ReplyAttachmentManager';\nimport { isSVG, sanitizeSVG } from 'helpers/sanitizeSVG';\n\nimport './ReplyAttachmentList.scss';\n\nconst ImagePreview = ({ file }) => {\n  const [t] = useTranslation();\n\n  const [src, setSrc] = useState();\n  const [isDirtySVG, setIsDirtySvg] = useState(false);\n\n  useEffect(() => {\n    const processImagePreview = async () => {\n      setIsDirtySvg(false);\n      let fileToSanitize = file;\n\n      const isImageFromPDF = !(file instanceof File) && !file.url;\n      if (isImageFromPDF) {\n        fileToSanitize = await decompressFileContent(file);\n      }\n\n      if (file instanceof File || isImageFromPDF) {\n        if (isSVG(file)) {\n          const { svg, isDirty } = await sanitizeSVG(fileToSanitize);\n          setSrc(URL.createObjectURL(svg));\n          setIsDirtySvg(isDirty);\n        } else {\n          setSrc(URL.createObjectURL(fileToSanitize));\n        }\n      }\n    };\n    processImagePreview();\n  }, [file]);\n\n  return (\n    <div className={classNames({\n      'reply-attachment-preview': true,\n      'dirty': isDirtySVG,\n    })}>\n      <img src={src} />\n      {isDirtySVG && <span className=\"reply-attachment-preview-message\">{t('message.svgMalicious')}</span>}\n    </div>\n  );\n};\n\nconst ReplyAttachmentList = ({ files, isEditing, fileDeleted }) => {\n  const [tabManager, previewEnabled] = useSelector((state) => [\n    selectors.getTabManager(state),\n    selectors.isReplyAttachmentPreviewEnabled(state)\n  ]);\n\n  const onClick = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!tabManager) {\n      return console.warn('Can\\'t open attachment in non-multi-tab mode');\n    }\n\n    let fileData;\n    if (file instanceof File) {\n      fileData = file;\n    } else if (file.url) {\n      fileData = file.url;\n    } else {\n      fileData = await decompressFileContent(file);\n    }\n\n    fileData && tabManager.addTab(fileData, {\n      filename: file.name,\n      setActive: true,\n      saveCurrentActiveTabState: true\n    });\n  };\n\n  const onDelete = (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    fileDeleted(file);\n  };\n\n  const onDownload = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fileData = file.url ? file.url : await decompressFileContent(file);\n    saveAs(fileData, file.name);\n  };\n\n  return (\n    <div className=\"reply-attachment-list\">\n      {files.map((file, i) => (\n        <div\n          className=\"reply-attachment\"\n          key={i}\n          onClick={(e) => onClick(e, file)}\n        >\n          {previewEnabled && isImage(file) && (\n            <ImagePreview file={file} />\n          )}\n          <div className=\"reply-attachment-info\">\n            <Icon\n              className=\"reply-attachment-icon\"\n              glyph={getAttachmentIcon(file)}\n            />\n            <Tooltip content={file.name}>\n              <div className=\"reply-file-name\">{file.name}</div>\n            </Tooltip>\n            {isEditing ? (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-close\"\n                onClick={(e) => onDelete(e, file)}\n              />\n            ) : (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-download\"\n                onClick={(e) => onDownload(e, file)}\n              />\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ReplyAttachmentList;\n","import ReplyAttachmentList from './ReplyAttachmentList';\n\nexport default ReplyAttachmentList;","import mentionsManager from './MentionsManager';\n/*\n * Transforming RichText Style object into the Object acceptable by React Quill component.\n */\n\nconst setReactQuillContent = (annotation, editor) => {\n  const richTextStyle = annotation.getRichTextStyle();\n  const indexes = Object.keys(richTextStyle);\n  const formattedText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n  const text = mentionsManager.extractMentionDataFromStr(formattedText).plainTextValue;\n  const ops = [];\n\n  for (let i = 0; i < indexes.length; i++) {\n    const element = richTextStyle[indexes[i]];\n    const attr = getAttributtes(element);\n\n    if (isNaN(indexes[i])) {\n      continue;\n    }\n\n    const lastIndex = isNaN(indexes[i + 1]) ? text.length : indexes[i + 1];\n    const textSlice = text.slice(indexes[i], lastIndex);\n\n    ops.push({ insert: textSlice, attributes: attr });\n  }\n\n  editor.setContents(ops);\n  editor.setSelection(text.length, 0);\n};\n\nconst getAttributtes = (element) => {\n  const attr = {};\n  if (element['font-weight']) {\n    attr['bold'] = true;\n  }\n  if (element['font-style']) {\n    attr['italic'] = true;\n  }\n  if (element['color']) {\n    attr['color'] = element['color'];\n  }\n  if (element['text-decoration']) {\n    const decoration = element['text-decoration'].split(' ');\n\n    if (decoration.includes('line-through')) {\n      attr['strike'] = true;\n    }\n    if (decoration.includes('word')) {\n      attr['underline'] = true;\n    }\n  }\n\n  return attr;\n};\n\nexport default setReactQuillContent;\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Autolinker from 'autolinker';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport isString from 'lodash/isString';\n\nimport NoteTextarea from 'components/NoteTextarea';\nimport NoteContext from 'components/Note/Context';\nimport NoteHeader from 'components/NoteHeader';\nimport NoteTextPreview from 'components/NoteTextPreview';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\n\nimport mentionsManager from 'helpers/MentionsManager';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport setReactQuillContent from 'helpers/setReactQuillContent';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\n\nimport core from 'core';\nimport { getDataWithKey, mapAnnotationToKey } from 'constants/map';\nimport Theme from 'constants/theme';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\nimport DataElementWrapper from '../DataElementWrapper';\n\nimport './NoteContent.scss';\n\ndayjs.extend(LocalizedFormat);\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isEditing: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  noteIndex: PropTypes.number,\n  isUnread: PropTypes.bool,\n  isNonReplyNoteRead: PropTypes.bool,\n  onReplyClicked: PropTypes.func,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n};\n\nconst NoteContent = ({\n  annotation,\n  isEditing,\n  setIsEditing,\n  noteIndex,\n  isUnread,\n  isNonReplyNoteRead,\n  onReplyClicked,\n  isMultiSelected,\n  isMultiSelectMode,\n  handleMultiSelect,\n  isGroupMember,\n}) => {\n  const [\n    noteDateFormat,\n    iconColor,\n    isNoteStateDisabled,\n    language,\n    notesShowLastUpdatedDate,\n    canCollapseTextPreview,\n    canCollapseReplyPreview,\n    activeTheme,\n    timezone,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteDateFormat(state),\n      selectors.getIconColor(state, mapAnnotationToKey(annotation)),\n      selectors.isElementDisabled(state, 'notePopupState'),\n      selectors.getCurrentLanguage(state),\n      selectors.notesShowLastUpdatedDate(state),\n      selectors.isNotesPanelTextCollapsingEnabled(state),\n      selectors.isNotesPanelRepliesCollapsingEnabled(state),\n      selectors.getActiveTheme(state),\n      selectors.getTimezone(state),\n    ],\n    shallowEqual,\n  );\n\n  const {\n    isSelected,\n    searchInput,\n    resize,\n    pendingEditTextMap,\n    onTopNoteContentClicked,\n    sortStrategy,\n    showAnnotationNumbering,\n    setPendingEditText\n  } = useContext(NoteContext);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n\n  const isReply = annotation.isReply();\n\n  const [attachments, setAttachments] = useState([]);\n\n  useEffect(() => {\n    setAttachments(annotation.getAttachments());\n  }, [annotation]);\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'modify') {\n        annotations.forEach((annot) => {\n          if (annot.Id === annotation.Id) {\n            setAttachments(annot.getAttachments());\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener);\n    };\n  }, [annotation]);\n\n  useDidUpdate(() => {\n    if (!isEditing) {\n      dispatch(actions.finishNoteEditing());\n    }\n\n    resize();\n  }, [isEditing]);\n\n  const renderAuthorName = useCallback(\n    (annotation) => {\n      const name = core.getDisplayAuthor(annotation['Author']);\n\n      return name ? (\n        highlightSearchInput(name, searchInput)\n      ) : (\n        t('option.notesPanel.noteContent.noName')\n      );\n    },\n    [searchInput],\n  );\n\n  const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n\n  const renderContents = useCallback(\n    (contents, richTextStyle, fontColor, skipAutoLink) => {\n      const autolinkerContent = [];\n      if (!skipAutoLink) {\n        Autolinker.link(contents, {\n          stripPrefix: false,\n          stripTrailingSlash: false,\n          replaceFn(match) {\n            const href = match.getAnchorHref();\n            const anchorText = match.getAnchorText();\n            const offset = match.getOffset();\n\n            switch (match.getType()) {\n              case 'url':\n              case 'email':\n              case 'phone':\n                autolinkerContent.push({\n                  href,\n                  text: anchorText,\n                  start: offset,\n                  end: offset + match.getMatchedText().length\n                });\n            }\n          }\n        });\n      }\n\n      if (!autolinkerContent.length) {\n        const highlightResult = highlightSearchInput(contents, searchInput, richTextStyle);\n        const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n        const shouldCollapseReply = isReply && canCollapseReplyPreview;\n\n        /*\n         * Case there is no value on Search input, and the collapse of the text is allowed,\n         * just render the value with Text preview component\n         */\n        if (!searchInput && (shouldCollapseAnnotationText || shouldCollapseReply)) {\n          return (\n            <NoteTextPreview linesToBreak={3} comment renderRichText={renderRichText} richTextStyle={richTextStyle} resize={resize} style={fontColor}>\n              {contents}\n            </NoteTextPreview>\n          );\n        }\n        return highlightResult;\n      }\n      const contentToRender = [];\n      let strIdx = 0;\n      // Iterate through each case detected by Autolinker, wrap all content\n      // before the current link in a span tag, and wrap the current link\n      // in our own anchor tag\n      autolinkerContent.forEach((anchorData, forIdx) => {\n        const { start, end, href } = anchorData;\n        if (strIdx < start) {\n          contentToRender.push(\n            <span key={`span_${forIdx}`}>\n              {\n                highlightSearchInput(\n                  contents,\n                  searchInput,\n                  richTextStyle,\n                  strIdx,\n                  start\n                )\n              }\n            </span>\n          );\n        }\n        contentToRender.push(\n          <a\n            href={href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            key={`a_${forIdx}`}\n          >\n            {\n              highlightSearchInput(\n                contents,\n                searchInput,\n                richTextStyle,\n                start,\n                end\n              )\n            }\n          </a>\n        );\n        strIdx = end;\n      });\n      // Ensure any content after the last link is accounted for\n      if (strIdx < contents.length - 1) {\n        contentToRender.push(highlightSearchInput(\n          contents,\n          searchInput,\n          richTextStyle,\n          strIdx\n        ));\n      }\n      return contentToRender;\n    },\n    [searchInput]\n  );\n\n  const icon = getDataWithKey(mapAnnotationToKey(annotation)).icon;\n  let customData;\n  try {\n    customData = JSON.parse(annotation.getCustomData('trn-mention'));\n  } catch (e) {\n    customData = annotation.getCustomData('trn-mention');\n  }\n  const contents = customData?.contents || annotation.getContents();\n  const contentsToRender = annotation.getContents();\n  const richTextStyle = annotation.getRichTextStyle();\n  let textColor = annotation['TextColor'];\n\n  if (activeTheme === Theme.DARK) {\n    if (textColor && isDarkColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(255, 255, 255, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isDarkColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = '#FFFFFF';\n        }\n      });\n    }\n  } else if (activeTheme === Theme.LIGHT) {\n    if (textColor && isLightColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(0, 0, 0, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isLightColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = '#000000';\n        }\n      });\n    }\n  }\n  // This is the text placeholder passed to the ContentArea\n  // It ensures that if we try and edit, we get the right placeholder\n  // depending on whether the comment has been saved to the annotation or not\n  const thereIsNoUnpostedEdit = typeof pendingEditTextMap[annotation.Id] === 'undefined';\n  let textAreaValue;\n  if (contents && thereIsNoUnpostedEdit) {\n    textAreaValue = contents;\n  } else {\n    textAreaValue = pendingEditTextMap[annotation.Id];\n  }\n\n  const handleNoteContentClicked = () => {\n    if (!isGroupMember) {\n      if (isReply) {\n        onReplyClicked(annotation);\n      } else if (!isEditing) {\n        // collapse expanded note when top noteContent is clicked if it's not being edited\n        onTopNoteContentClicked();\n      }\n    }\n  };\n\n  const handleContentsClicked = (e) => {\n    if (window.getSelection()?.toString()) {\n      e?.stopPropagation();\n    }\n  };\n\n  const noteContentClass = classNames({\n    NoteContent: true,\n    isReply,\n    unread: isUnread, // The note content itself is unread or it has unread replies\n    clicked: isNonReplyNoteRead, // The top note content is read\n  });\n\n  const content = useMemo(\n    () => {\n      const contentStyle = {};\n      if (textColor) {\n        contentStyle.color = textColor.toHexString();\n      }\n\n      return (\n        <>\n          {(isEditing && isSelected) ? (\n            <ContentArea\n              annotation={annotation}\n              noteIndex={noteIndex}\n              setIsEditing={setIsEditing}\n              textAreaValue={textAreaValue}\n              onTextAreaValueChange={setPendingEditText}\n              pendingText={pendingEditTextMap[annotation.Id]}\n            />\n          ) : (\n            contentsToRender && (\n              <div className={classNames('container', { 'reply-content': isReply })} onClick={handleContentsClicked}>\n                {isReply && (attachments.length > 0) && (\n                  <ReplyAttachmentList\n                    files={attachments}\n                    isEditing={false}\n                  />\n                )}\n                {renderContents(contentsToRender, richTextStyle, contentStyle, skipAutoLink)}\n              </div>\n            )\n          )}\n        </>\n      );\n    },\n    [annotation, isSelected, isEditing, setIsEditing, contents, renderContents, textAreaValue, setPendingEditText, attachments]\n  );\n\n  const text = annotation.getCustomData('trn-annot-preview');\n  const textPreview = useMemo(\n    () => {\n      if (text === '') {\n        return null;\n      }\n\n      const highlightSearchResult = highlightSearchInput(text, searchInput);\n      const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n      // If we have a search result do not use text\n      // preview but instead show the entire text\n      if (isString(highlightSearchResult) && shouldCollapseAnnotationText) {\n        return (\n          <DataElementWrapper\n            className=\"selected-text-preview\"\n            dataElement=\"notesSelectedTextPreview\">\n            <NoteTextPreview linesToBreak={3}>\n              {`\"${highlightSearchResult}\"`}\n            </NoteTextPreview>\n          </DataElementWrapper>\n        );\n      }\n      return (\n        <div className=\"selected-text-preview\" style={{ paddingRight: '12px' }}>\n          {highlightSearchResult}\n        </div>\n      );\n    }, [text, searchInput]);\n\n  const header = useMemo(\n    () => {\n      return (\n        <NoteHeader\n          icon={icon}\n          iconColor={iconColor}\n          annotation={annotation}\n          language={language}\n          noteDateFormat={noteDateFormat}\n          isSelected={isSelected}\n          setIsEditing={setIsEditing}\n          notesShowLastUpdatedDate={notesShowLastUpdatedDate}\n          isReply={isReply}\n          isUnread={isUnread}\n          renderAuthorName={renderAuthorName}\n          isNoteStateDisabled={isNoteStateDisabled}\n          isEditing={isEditing}\n          noteIndex={noteIndex}\n          sortStrategy={sortStrategy}\n          activeTheme={activeTheme}\n          handleMultiSelect={handleMultiSelect}\n          isMultiSelected={isMultiSelected}\n          isMultiSelectMode={isMultiSelectMode}\n          isGroupMember={isGroupMember}\n          showAnnotationNumbering={showAnnotationNumbering}\n          timezone={timezone}\n        />\n      );\n    }, [icon, iconColor, annotation, language, noteDateFormat, isSelected, setIsEditing, notesShowLastUpdatedDate, isReply, isUnread, renderAuthorName, core.getDisplayAuthor(annotation['Author']), isNoteStateDisabled, isEditing, noteIndex, getLatestActivityDate(annotation), sortStrategy, handleMultiSelect, isMultiSelected, isMultiSelectMode, isGroupMember, timezone]\n  );\n\n  return (\n    <div className={noteContentClass} onClick={handleNoteContentClicked}>\n      {header}\n      {textPreview}\n      {content}\n    </div>\n  );\n};\n\nNoteContent.propTypes = propTypes;\n\nexport default NoteContent;\n\n// a component that contains the content textarea, the save button and the cancel button\nconst ContentArea = ({\n  annotation,\n  noteIndex,\n  setIsEditing,\n  textAreaValue,\n  onTextAreaValueChange,\n  pendingText\n}) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isMentionEnabled,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    isNotesPanelOpen,\n    activeDocumentViewerKey,\n    isAnyCustomPanelOpen,\n  ] = useSelector((state) => [\n    selectors.getAutoFocusNoteOnAnnotationSelection(state),\n    selectors.getIsMentionEnabled(state),\n    selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n    selectors.getActiveDocumentViewerKey(state),\n    selectors.isAnyCustomPanelOpen(state),\n  ]);\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n  const isReply = annotation.isReply();\n  const {\n    setCurAnnotId,\n    pendingAttachmentMap,\n    deleteAttachment,\n    clearAttachments,\n    addAttachments\n  } = useContext(NoteContext);\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    if (isAnyCustomPanelOpen || (isNotesPanelOpen || isInlineCommentOpen) && textareaRef.current) {\n      const editor = textareaRef.current.getEditor();\n      const isFreeTextAnnnotation = annotation && annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n      isFreeTextAnnnotation && editor.setText('');\n\n      /**\n       * If there is a pending text we should update the annotation rich text style\n       * with this pending text style.\n       */\n      if (pendingText) {\n        setAnnotationRichTextStyle(editor, annotation);\n      } else if (editor.getContents()) {\n        setTimeout(() => {\n          // need setTimeout because textarea seem to rerender and unfocus\n          if (isMentionEnabled) {\n            textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n            const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n            if (ids.length) {\n              editor.setText(plainTextValue);\n            }\n          }\n\n          if (shouldNotFocusOnInput) {\n            return;\n          }\n\n          if (autoFocusNoteOnAnnotationSelection) {\n            textareaRef.current.focus();\n            const annotRichTextStyle = annotation.getRichTextStyle();\n            if (annotRichTextStyle) {\n              setReactQuillContent(annotation, editor);\n            }\n          }\n        }, 100);\n      }\n\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      setTimeout(() => {\n        editor.setSelection(textLength, textLength);\n      }, 100);\n    }\n  }, [isNotesPanelOpen, isInlineCommentOpen, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    if (isReply && pendingAttachments.length === 0) {\n      // Load attachments\n      const attachments = annotation.getAttachments();\n      addAttachments(annotation.Id, attachments);\n    }\n  }, []);\n\n  const setContents = async (e) => {\n    // prevent the textarea from blurring out which will unmount these two buttons\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n    setAnnotationRichTextStyle(editor, annotation);\n\n    const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n    if (skipAutoLink) {\n      annotation.disableSkipAutoLink();\n    }\n\n    if (isMentionEnabled) {\n      const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n      // If modified, double check for ids\n      const annotMentionData = mentionsManager.extractMentionDataFromAnnot(annotation);\n      annotMentionData.mentions.forEach((mention) => {\n        if (plainTextValue.includes(mention.value)) {\n          ids.push(mention.id);\n        }\n      });\n\n      annotation.setCustomData('trn-mention', JSON.stringify({\n        contents: textAreaValue,\n        ids,\n      }));\n      annotation.setContents(plainTextValue);\n    } else {\n      annotation.setContents(textAreaValue);\n    }\n\n    await setAnnotationAttachments(annotation, pendingAttachmentMap[annotation.Id]);\n\n    const source = (annotation instanceof window.Core.Annotations.FreeTextAnnotation)\n      ? 'textChanged' : 'noteChanged';\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[annotation], 'modify', { 'source': source }]);\n\n    if (annotation instanceof window.Core.Annotations.FreeTextAnnotation) {\n      core.drawAnnotationsFromList([annotation]);\n    }\n\n    setIsEditing(false, noteIndex);\n    // Only set comment to unposted state if it is not empty\n    if (textAreaValue !== '') {\n      onTextAreaValueChange(undefined, annotation.Id);\n    }\n    clearAttachments(annotation.Id);\n  };\n\n  const onBlur = (e) => {\n    if (e.relatedTarget?.getAttribute('data-element')?.includes('annotationCommentButton')) {\n      e.target.focus();\n      return;\n    }\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setCurAnnotId(annotation.Id);\n  };\n\n  const contentClassName = classNames('edit-content', { 'reply-content': isReply });\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (\n    <div className={contentClassName}>\n      {isReply && pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <NoteTextarea\n        ref={(el) => {\n          textareaRef.current = el;\n        }}\n        value={textAreaValue}\n        onChange={(value) => onTextAreaValueChange(value, annotation.Id)}\n        onSubmit={setContents}\n        isReply={isReply}\n        onBlur={onBlur}\n        onFocus={onFocus}\n      />\n      <div className=\"edit-buttons\">\n        <button\n          className=\"cancel-button\"\n          onClick={(e) => {\n            e.stopPropagation();\n            setIsEditing(false, noteIndex);\n            // Clear pending text\n            onTextAreaValueChange(undefined, annotation.Id);\n            clearAttachments(annotation.Id);\n          }}\n        >\n          {t('action.cancel')}\n        </button>\n        <button\n          className={`save-button${!textAreaValue ? ' disabled' : ''}`}\n          disabled={!textAreaValue}\n          onClick={(e) => {\n            e.stopPropagation();\n            setContents(e);\n          }}\n        >\n          {t('action.save')}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nContentArea.propTypes = {\n  noteIndex: PropTypes.number.isRequired,\n  annotation: PropTypes.object.isRequired,\n  setIsEditing: PropTypes.func.isRequired,\n  textAreaValue: PropTypes.string,\n  onTextAreaValueChange: PropTypes.func.isRequired,\n  pendingText: PropTypes.string\n};\n\nconst getRichTextSpan = (text, richTextStyle, key) => {\n  const style = {\n    fontWeight: richTextStyle['font-weight'],\n    fontStyle: richTextStyle['font-style'],\n    textDecoration: richTextStyle['text-decoration'],\n    color: richTextStyle['color']\n  };\n  if (style.textDecoration) {\n    style.textDecoration = style.textDecoration.replace('word', 'underline');\n  }\n  return (\n    <span style={style} key={key}>{text}</span>\n  );\n};\n\nconst renderRichText = (text, richTextStyle, start) => {\n  if (!richTextStyle || !text) {\n    return text;\n  }\n\n  const styles = {};\n  const indices = Object.keys(richTextStyle).map(Number).sort((a, b) => a - b);\n  for (let i = 0; i < indices.length; i++) {\n    let index = indices[i] - start;\n    index = Math.min(Math.max(index, 0), text.length);\n    styles[index] = richTextStyle[indices[i]];\n    if (index === text.length) {\n      break;\n    }\n  }\n\n  const contentToRender = [];\n  const styleIndices = Object.keys(styles).map(Number).sort((a, b) => a - b);\n  for (let i = 1; i < styleIndices.length; i++) {\n    contentToRender.push(getRichTextSpan(\n      text.slice(styleIndices[i - 1], styleIndices[i]),\n      styles[styleIndices[i - 1]],\n      `richtext_span_${i}`\n    ));\n  }\n\n  return contentToRender;\n};\n\nconst highlightSearchInput = (fullText, searchInput, richTextStyle, start = 0, end = fullText.length) => {\n  const text = fullText.slice(start, end);\n  const loweredText = text.toLowerCase();\n  const loweredSearchInput = searchInput.toLowerCase();\n  if (richTextStyle) {\n    richTextStyle['0'] = richTextStyle['0'] || {};\n    richTextStyle[fullText.length] = richTextStyle[fullText.length] || {};\n  }\n  let lastFoundInstance = loweredText.indexOf(loweredSearchInput);\n  if (!loweredSearchInput.trim() || lastFoundInstance === -1) {\n    return renderRichText(text, richTextStyle, start);\n  }\n  const contentToRender = [];\n  const allFoundPositions = [lastFoundInstance];\n  // Escape all RegExp special characters\n  const regexSafeSearchInput = loweredSearchInput.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  if (new RegExp(`(${regexSafeSearchInput})`, 'gi').test(loweredText)) {\n    while (lastFoundInstance !== -1) {\n      lastFoundInstance = loweredText.indexOf(loweredSearchInput, lastFoundInstance + loweredSearchInput.length);\n      if (lastFoundInstance !== -1) {\n        allFoundPositions.push(lastFoundInstance);\n      }\n    }\n  }\n  allFoundPositions.forEach((position, idx) => {\n    // Account for any content at the beginning of the string before the first\n    // instance of the searchInput\n    if (idx === 0 && position !== 0) {\n      contentToRender.push(renderRichText(text.substring(0, position), richTextStyle, start));\n    }\n    contentToRender.push(\n      <span className=\"highlight\" key={`highlight_span_${idx}`}>\n        {\n          renderRichText(\n            text.substring(position, position + loweredSearchInput.length),\n            richTextStyle,\n            start + position)\n        }\n      </span>\n    );\n    if (\n      // Ensure that we do not try to make an out-of-bounds access\n      position + loweredSearchInput.length < loweredText.length\n      // Ensure that this is the end of the allFoundPositions array\n      && position + loweredSearchInput.length !== allFoundPositions[idx + 1]\n    ) {\n      contentToRender.push(renderRichText(\n        text.substring(position + loweredSearchInput.length, allFoundPositions[idx + 1]),\n        richTextStyle,\n        start + position + loweredSearchInput.length\n      ));\n    }\n  });\n  return contentToRender;\n};\n","import NoteContent from './NoteContent';\n\nexport default NoteContent;","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport NoteContext from 'components/Note/Context';\nimport NoteTextarea from 'components/NoteTextarea';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\nimport Button from 'components/Button';\nimport classNames from 'classnames';\nimport core from 'core';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\n\nimport './ReplyArea.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n};\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotation, isUnread, onPendingReplyChange }) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isReadOnly,\n    isReplyDisabled,\n    isReplyDisabledForAnnotation,\n    isMentionEnabled,\n    isNoteEditingTriggeredByAnnotationPopup,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isElementDisabled(state, 'noteReply'),\n      selectors.getIsReplyDisabled(state)?.(annotation),\n      selectors.getIsMentionEnabled(state),\n      selectors.getIsNoteEditing(state),\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n  const {\n    isContentEditable,\n    isSelected,\n    pendingReplyMap,\n    setPendingReply,\n    isExpandedFromSearch,\n    scrollToSelectedAnnot,\n    setCurAnnotId,\n    pendingAttachmentMap,\n    clearAttachments,\n    deleteAttachment\n  } = useContext(NoteContext);\n  const [isFocused, setIsFocused] = useState(false);\n  const dispatch = useDispatch();\n  const textareaRef = useRef();\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useDidUpdate(() => {\n    if (!isFocused) {\n      dispatch(actions.finishNoteEditing());\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (shouldNotFocusOnInput) {\n      return;\n    }\n\n    if (\n      isNoteEditingTriggeredByAnnotationPopup &&\n      isSelected &&\n      !isContentEditable &&\n      autoFocusNoteOnAnnotationSelection &&\n      textareaRef &&\n      textareaRef.current\n    ) {\n      textareaRef.current.focus();\n    }\n  }, [isContentEditable, isNoteEditingTriggeredByAnnotationPopup, isSelected, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    // when search item, should disable auto focus\n    if (!isExpandedFromSearch && scrollToSelectedAnnot) {\n      // use \"setTimeout\" to wait for element to be added before focusing to have the blinking text cursor appear\n      setTimeout(() => {\n        // calling focus() cause the \"NotePanel\" to scroll to note that being focused.\n        // we don't want to jump to the selected annotation when scrolling up and down, so only focus once\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\n          textareaRef.current.focus();\n        }\n      }, 100);\n    }\n    if (textareaRef && textareaRef.current) {\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      const editor = textareaRef.current.getEditor();\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n      setTimeout(() => {\n        if (textareaRef.current) {\n          textareaRef.current.editor.setSelection(textLength, textLength);\n        }\n      }, 100);\n    }\n  }, []);\n\n  const postReply = async (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n    e.stopPropagation();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n\n    if (isMentionEnabled) {\n      const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n    } else {\n      const replyAnnotation = core.createAnnotationReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[replyAnnotation], 'modify', {}]);\n    }\n\n    setPendingReply('', annotation.Id);\n    clearAttachments(annotation.Id);\n  };\n\n  const ifReplyNotAllowed =\n    isReadOnly ||\n    isReplyDisabled ||\n    isReplyDisabledForAnnotation;\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n    unread: isUnread,\n  });\n\n  const replyButtonClass = classNames({\n    'reply-button': true,\n    disabled: !pendingReplyMap[annotation.Id]\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value, annotation.Id);\n    onPendingReplyChange && onPendingReplyChange();\n  };\n\n  const onBlur = () => {\n    setIsFocused(false);\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setIsFocused(true);\n    setCurAnnotId(annotation.Id);\n  };\n\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (ifReplyNotAllowed || !isSelected) ? null : (\n    <form onSubmit={postReply} className=\"reply-area-container\">\n      {pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <div className=\"reply-area-with-button\">\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReplyMap[annotation.Id]}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            onSubmit={postReply}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            isReply\n          />\n        </div>\n        <div className=\"reply-button-container\">\n          <Button\n            img=\"icon-post-reply\"\n            className={replyButtonClass}\n            onClick={postReply}\n            isSubmitType\n          />\n        </div>\n      </div>\n    </form>\n  );\n};\n\nReplyArea.propTypes = propTypes;\n\nexport default ReplyArea;\n","import ReplyArea from './ReplyArea';\n\nexport default ReplyArea;","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Icon from 'components/Icon';\nimport NoteContent from 'components/NoteContent';\nimport PropTypes from 'prop-types';\nimport core from 'core';\nimport actions from 'actions';\n\nconst propTypes = {\n  groupAnnotations: PropTypes.array.isRequired,\n  isMultiSelectMode: PropTypes.bool.isRequired,\n};\n\nconst NoteGroupSection = ({\n  groupAnnotations,\n  isMultiSelectMode,\n}) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [isViewingGroupAnnots, setIsViewingGroupAnnots] = useState(false);\n\n  const upArrow = 'ic_chevron_up_black_24px';\n  const downArrow = 'ic_chevron_down_black_24px';\n\n  const ViewAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(true);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.open')}\n      <Icon glyph={downArrow} />\n    </div>\n  );\n  const CloseAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(false);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.close')}\n      <Icon glyph={upArrow} />\n    </div>\n  );\n\n  return (\n    <div\n      className=\"group-section\"\n    >\n      {isViewingGroupAnnots ? CloseAllAnnotsButton : ViewAllAnnotsButton}\n      {isViewingGroupAnnots &&\n        groupAnnotations.map((groupAnnotation, i) => {\n          // Ignore the group primary annotation\n          if (i === 0) {\n            return null;\n          }\n          return (\n            <div\n              key={groupAnnotation.Id}\n              className=\"group-child\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                core.selectAnnotation(groupAnnotation);\n                core.jumpToAnnotation(groupAnnotation);\n                dispatch(actions.openElement('annotationPopup'));\n              }}\n            >\n              <NoteContent\n                key={groupAnnotation.Id}\n                annotation={groupAnnotation}\n                isUnread={false}\n                isGroupMember={true}\n                isMultiSelectMode={isMultiSelectMode}\n              />\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nNoteGroupSection.propTypes = propTypes;\n\nexport default NoteGroupSection;","import React, { useEffect, useState, useCallback } from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport core from 'core';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { createPortal } from 'react-dom';\nimport { getAnnotationPosition } from '../../helpers/getPopupPosition';\n\nimport './AnnotationNoteConnectorLine.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst LineConnectorPortal = ({ children }) => {\n  const mount = getRootNode().querySelector('#line-connector-root');\n  const el = document.createElement('div');\n  el.setAttribute('data-element', 'annotationNoteConnectorLine');\n\n  useEffect(() => {\n    mount.appendChild(el);\n    return () => mount.removeChild(el);\n  }, [el, mount]);\n\n  return createPortal(children, el);\n};\n\nconst AnnotationNoteConnectorLine = ({ annotation, noteContainerRef, isCustomPanelOpen }) => {\n  const [\n    notePanelWidth,\n    lineIsOpen,\n    notePanelIsOpen,\n    isLineDisabled,\n    documentContainerWidth,\n    documentContainerHeight,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n      selectors.isElementOpen(state, 'annotationNoteConnectorLine'),\n      selectors.isElementOpen(state, 'notesPanel'),\n      selectors.isElementDisabled(state, 'annotationNoteConnectorLine'),\n      selectors.getDocumentContainerWidth(state),\n      selectors.getDocumentContainerHeight(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  // Right Horizontal Line\n  const [rightHorizontalLineWidth, setRightHorizontalLineWidth] = useState(0);\n  const [rightHorizontalLineTop, setRightHorizontalLineTop] = useState(0);\n  const [rightHorizontalLineRight, setRightHorizontalLineRight] = useState(0);\n\n  // Left Horizontal Line\n  const [leftHorizontalLineWidth, setLeftHorizontalLineWidth] = useState(0);\n  const [leftHorizontalLineTop, setLeftHorizontalLineTop] = useState(0);\n  const [leftHorizontalLineRight, setLeftHorizontalLineRight] = useState(0);\n\n  const {\n    bottomRight: annotationBottomRight,\n    topLeft: annotationTopLeft\n  } = getAnnotationPosition(annotation, activeDocumentViewerKey);\n\n  const getAnnotationLineOffset = useCallback(() => {\n    if (annotation.Subject === 'Note') {\n      return 4;\n    }\n    return 15;\n  }, [annotation]);\n\n  useEffect(() => {\n    const { scrollTop, scrollLeft } = core.getScrollViewElement(activeDocumentViewerKey);\n    const notePanelLeftPadding = 16;\n    const isAnnotationPositionInvalid = !(annotationBottomRight && annotationTopLeft);\n    if (isAnnotationPositionInvalid) {\n      return () => {\n        dispatch(actions.closeElement('annotationNoteConnectorLine'));\n      };\n    }\n    const annotWidthInPixels = annotationBottomRight.x - annotationTopLeft.x;\n    const annotHeightInPixels = annotationBottomRight.y - annotationTopLeft.y;\n\n    const viewerWidth = window.isApryseWebViewerWebComponent ? getRootNode().host.clientWidth : window.innerWidth;\n    const viewerOffset = window.isApryseWebViewerWebComponent ? getRootNode().host.offsetLeft : 0;\n    const viewerOffsetTop = window.isApryseWebViewerWebComponent ? getRootNode().host.offsetTop : 0;\n\n    setRightHorizontalLineRight(notePanelWidth - notePanelLeftPadding);\n    setRightHorizontalLineTop(noteContainerRef.current.getBoundingClientRect().top - viewerOffsetTop);\n    const lineWidth = viewerWidth + viewerOffset - notePanelWidth - annotationTopLeft.x + notePanelLeftPadding + scrollLeft - annotWidthInPixels;\n    const rightHorizontalLineWidthRatio = 0.75;\n    setRightHorizontalLineWidth(lineWidth * rightHorizontalLineWidthRatio);\n    const noZoomRefPoint = annotation.getNoZoomReferencePoint();\n    const noZoomRefShiftX = (annotation.NoZoom && noZoomRefPoint.x) ? noZoomRefPoint.x * annotHeightInPixels : 0;\n    setLeftHorizontalLineWidth(lineWidth - rightHorizontalLineWidth - getAnnotationLineOffset() + noZoomRefShiftX);\n\n    setLeftHorizontalLineRight(notePanelWidth - notePanelLeftPadding + rightHorizontalLineWidth);\n\n    const noZoomRefShiftY = (annotation.NoZoom && noZoomRefPoint.y) ? noZoomRefPoint.y * annotHeightInPixels : 0;\n    setLeftHorizontalLineTop(annotationTopLeft.y + (annotHeightInPixels / 2) - scrollTop - noZoomRefShiftY - viewerOffsetTop);\n\n    const onPageNumberUpdated = () => {\n      dispatch(actions.closeElement('annotationNoteConnectorLine'));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\n    };\n  }, [noteContainerRef, notePanelWidth, annotationBottomRight, annotationTopLeft, documentContainerWidth, documentContainerHeight, dispatch, activeDocumentViewerKey]);\n\n  if (lineIsOpen && (notePanelIsOpen || isCustomPanelOpen) && !isLineDisabled) {\n    const verticalHeight = Math.abs(rightHorizontalLineTop - leftHorizontalLineTop);\n    const horizontalLineHeight = 2;\n    // Add HorizontalLineHeight of 2px when annot is above note to prevent little gap between lines\n    const verticalTop = rightHorizontalLineTop > leftHorizontalLineTop ? leftHorizontalLineTop + horizontalLineHeight : rightHorizontalLineTop;\n\n    return (\n      <LineConnectorPortal>\n        <div className=\"horizontalLine\" style={{ width: rightHorizontalLineWidth, right: rightHorizontalLineRight, top: rightHorizontalLineTop }} />\n        <div className=\"verticalLine\" style={{ height: verticalHeight, top: verticalTop, right: rightHorizontalLineRight + rightHorizontalLineWidth }} />\n        <div className=\"horizontalLine\" style={{ width: leftHorizontalLineWidth, right: leftHorizontalLineRight, top: leftHorizontalLineTop }}>\n          <div className=\"arrowHead\" />\n        </div>\n      </LineConnectorPortal>);\n  }\n  return null;\n};\n\nexport default AnnotationNoteConnectorLine;\n","import AnnotationNoteConnectorLine from './AnnotationNoteConnectorLine';\n\nexport default AnnotationNoteConnectorLine;","import React, { useEffect, useRef, useContext, useState, useCallback } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport NoteContent from 'components/NoteContent';\nimport ReplyArea from 'components/Note/ReplyArea';\nimport NoteGroupSection from 'components/Note/NoteGroupSection';\nimport Button from 'components/Button';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport core from 'core';\nimport AnnotationNoteConnectorLine from 'components/AnnotationNoteConnectorLine';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport DataElements from 'src/constants/dataElement';\n\nimport './Note.scss';\nimport getRootNode from 'helpers/getRootNode';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  isInNotesPanel: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n};\n\nlet currId = 0;\n\nconst Note = ({\n  annotation,\n  isMultiSelected,\n  isMultiSelectMode,\n  isInNotesPanel,\n  handleMultiSelect,\n  isCustomPanelOpen,\n  shouldHideConnectorLine,\n}) => {\n  const {\n    isSelected,\n    resize,\n    pendingEditTextMap,\n    isContentEditable,\n    isDocumentReadOnly,\n    isExpandedFromSearch,\n    // documentViewerKey,\n    setCurAnnotId,\n  } = useContext(NoteContext);\n  const containerRef = useRef();\n  const containerHeightRef = useRef();\n  const [isEditingMap, setIsEditingMap] = useState({});\n  const ids = useRef([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const unreadReplyIdSet = new Set();\n\n  const [\n    noteTransformFunction,\n    customNoteSelectionFunction,\n    unreadAnnotationIdSet,\n    shouldExpandCommentThread,\n    isRightClickAnnotationPopupEnabled,\n    documentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteTransformFunction(state),\n      selectors.getCustomNoteSelectionFunction(state),\n      selectors.getUnreadAnnotationIdSet(state),\n      selectors.isCommentThreadExpansionEnabled(state),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const replies = annotation\n    .getReplies()\n    .sort((a, b) => a['DateCreated'] - b['DateCreated']);\n\n  replies.filter((r) => unreadAnnotationIdSet.has(r.Id)).forEach((r) => unreadReplyIdSet.add(r.Id));\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'delete') {\n        annotations.forEach((annot) => {\n          if (unreadAnnotationIdSet.has(annot.Id)) {\n            dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annot.Id }));\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener, undefined, documentViewerKey);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener, documentViewerKey);\n    };\n  }, [unreadAnnotationIdSet]);\n\n  useEffect(() => {\n    const prevHeight = containerHeightRef.current;\n    const currHeight = containerRef.current.getBoundingClientRect().height;\n    containerHeightRef.current = currHeight;\n\n    // have a prevHeight check here because we don't want to call resize on mount\n    // use Math.round because in some cases in IE11 these two numbers will differ in just 0.00001\n    // and we don't want call resize in this case\n    if (prevHeight && Math.round(prevHeight) !== Math.round(currHeight)) {\n      resize();\n    }\n  });\n\n  useEffect(() => {\n    if (noteTransformFunction) {\n      const notesPanelElement = getRootNode().getElementsByClassName('NotesPanel')[0];\n      ids.current.forEach((id) => {\n        const child = notesPanelElement.querySelector(`[data-webviewer-custom-element=${id}]`);\n        if (child) {\n          child.parentNode.removeChild(child);\n        }\n      });\n\n      ids.current = [];\n\n      const state = {\n        annotation,\n        isSelected,\n      };\n\n      noteTransformFunction(containerRef.current, state, (...params) => {\n        const element = document.createElement(...params);\n        const id = `custom-element-${currId}`;\n        currId++;\n        ids.current.push(id);\n        element.setAttribute('data-webviewer-custom-element', id);\n        element.addEventListener('mousedown', (e) => {\n          e.stopPropagation();\n        });\n\n        return element;\n      });\n    }\n  });\n\n  useEffect(() => {\n    // If this is not a new one, rebuild the isEditing map\n    const pendingText = pendingEditTextMap[annotation.Id];\n    if (pendingText !== '' && isContentEditable && !isDocumentReadOnly) {\n      setIsEditing(true, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing, annotation, isMultiSelectMode]);\n\n  useDidUpdate(() => {\n    if (isDocumentReadOnly || !isContentEditable) {\n      setIsEditing(false, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing]);\n\n  const handleNoteClick = (e) => {\n    // stop bubbling up otherwise the note will be closed\n    // due to annotation deselection\n    e && e.stopPropagation();\n\n    if (unreadAnnotationIdSet.has(annotation.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annotation.Id }));\n    }\n\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\n    if (!isSelected) {\n      core.deselectAllAnnotations(documentViewerKey);\n\n      // Need this delay to ensure all other event listeners fire before we open the line\n      setTimeout(() => dispatch(actions.openElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE)), 300);\n    }\n    if (isInNotesPanel) {\n      core.selectAnnotation(annotation, documentViewerKey);\n      setCurAnnotId(annotation.Id);\n      core.jumpToAnnotation(annotation, documentViewerKey);\n      if (!isRightClickAnnotationPopupEnabled) {\n        dispatch(actions.openElement(DataElements.ANNOTATION_POPUP));\n      }\n    }\n  };\n\n  const hasUnreadReplies = unreadReplyIdSet.size > 0;\n\n  const noteClass = classNames({\n    Note: true,\n    expanded: isSelected,\n    'is-multi-selected': isMultiSelected,\n    unread: unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies,\n  });\n\n  const repliesClass = classNames({\n    replies: true,\n    hidden: !isSelected,\n  });\n\n  useEffect(() => {\n    // Must also restore the isEdit for  any replies, in case someone was editing a\n    // reply when a comment was placed above\n    if (!isMultiSelectMode) {\n      replies.forEach((reply, index) => {\n        const pendingText = pendingEditTextMap[reply.Id];\n        if ((pendingText !== '' && typeof pendingText !== 'undefined') && isSelected) {\n          setIsEditing(true, 1 + index);\n        }\n      });\n    }\n  }, [isSelected, isMultiSelectMode]);\n\n  useEffect(() => {\n    if (isMultiSelectMode) {\n      setIsEditing(false, 0);\n    }\n  }, [isMultiSelectMode]);\n\n  const showReplyArea = !Object.values(isEditingMap).some((val) => val);\n\n  const handleNoteKeydown = (e) => {\n    // Click if enter or space is pressed and is current target.\n    const isNote = e.target === e.currentTarget;\n    if (isNote && (e.key === 'Enter' || e.key === ' ')) {\n      e.preventDefault(); // Stop from being entered in field\n      handleNoteClick();\n    }\n  };\n\n  const handleReplyClicked = (reply) => {\n    // set clicked reply as read\n    if (unreadReplyIdSet.has(reply.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: reply.Id }));\n      core.getAnnotationManager(documentViewerKey).selectAnnotation(reply);\n    }\n  };\n\n  const markAllRepliesRead = () => {\n    // set all replies to read state if user starts to type in reply textarea\n    if (unreadReplyIdSet.size > 0) {\n      const repliesSetToRead = replies.filter((r) => unreadReplyIdSet.has(r.Id));\n      core.getAnnotationManager(documentViewerKey).selectAnnotations(repliesSetToRead);\n      repliesSetToRead.forEach((r) => dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: r.Id })));\n    }\n  };\n\n  const setIsEditing = useCallback(\n    (isEditing, index) => {\n      setIsEditingMap((map) => ({\n        ...map,\n        [index]: isEditing,\n      }));\n    },\n    [setIsEditingMap],\n  );\n\n  const groupAnnotations = core.getGroupAnnotations(annotation, documentViewerKey);\n  const isGroup = groupAnnotations.length > 1;\n  let isCaretAnnotation = false;\n  isCaretAnnotation = groupAnnotations.some((annotation) => annotation instanceof window.Core.Annotations.CaretAnnotation);\n  if (isCaretAnnotation) {\n    isMultiSelectMode = false;\n    isMultiSelected = false;\n  }\n  // apply unread reply style to replyArea if the last reply is unread\n  const lastReplyId = replies.length > 0 ? replies[replies.length - 1].Id : null;\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      ref={containerRef}\n      className={noteClass}\n      onClick={handleNoteClick}\n      onKeyDown={handleNoteKeydown}\n      id={`note_${annotation.Id}`}\n    >\n      <NoteContent\n        noteIndex={0}\n        annotation={annotation}\n        setIsEditing={setIsEditing}\n        isEditing={isEditingMap[0]}\n        isNonReplyNoteRead={!unreadAnnotationIdSet.has(annotation.Id)}\n        isUnread={unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies}\n        handleMultiSelect={(e) => {\n          setCurAnnotId(annotation.Id);\n          handleMultiSelect(e);\n        }}\n        isMultiSelected={isMultiSelected}\n        isMultiSelectMode={isMultiSelectMode}\n      />\n      {(isSelected || isExpandedFromSearch || shouldExpandCommentThread) && (\n        <>\n          {replies.length > 0 && (\n            <div className={repliesClass}>\n              {hasUnreadReplies && (\n                <Button\n                  dataElement=\"markAllReadButton\"\n                  className=\"mark-all-read-button\"\n                  label={t('action.markAllRead')}\n                  onClick={markAllRepliesRead}\n                />\n              )}\n              {replies.map((reply, i) => (\n                <div className=\"reply\" id={`note_reply_${reply.Id}`} key={`note_reply_${reply.Id}`}>\n                  <NoteContent\n                    noteIndex={i + 1}\n                    key={reply.Id}\n                    annotation={reply}\n                    setIsEditing={setIsEditing}\n                    isEditing={isEditingMap[i + 1]}\n                    onReplyClicked={handleReplyClicked}\n                    isUnread={unreadAnnotationIdSet.has(reply.Id)}\n                    handleMultiSelect={handleMultiSelect}\n                    isMultiSelected={isMultiSelected}\n                    isMultiSelectMode={isMultiSelectMode}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n          {isGroup &&\n            <NoteGroupSection\n              groupAnnotations={groupAnnotations}\n              isMultiSelectMode={isMultiSelectMode}\n            />}\n          {showReplyArea && !isMultiSelectMode && (\n            <ReplyArea\n              isUnread={lastReplyId && unreadAnnotationIdSet.has(lastReplyId)}\n              onPendingReplyChange={markAllRepliesRead}\n              annotation={annotation}\n            />\n          )}\n        </>\n      )}\n      {isSelected && (isInNotesPanel || isCustomPanelOpen) && !shouldHideConnectorLine && (\n        <AnnotationNoteConnectorLine\n          annotation={annotation}\n          noteContainerRef={containerRef}\n          isCustomPanelOpen={isCustomPanelOpen}\n        />\n      )}\n    </div>\n  );\n};\n\nNote.propTypes = propTypes;\n\nexport default Note;\n","import Note from './Note';\n\nexport default Note;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Measure from 'react-measure';\nimport { useTranslation } from 'react-i18next';\nimport StylePopup from 'components/StylePopup';\nimport ActionButton from 'components/ActionButton';\nimport core from 'core';\nimport getClassName from 'helpers/getClassName';\nimport setToolStyles from 'helpers/setToolStyles';\nimport { isMobile } from 'helpers/device';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport handleFreeTextAutoSizeToggle from 'src/helpers/handleFreeTextAutoSizeToggle';\n\nimport './AnnotationStylePopup.scss';\n\nconst propTypes = {\n  annotations: PropTypes.array.isRequired,\n  style: PropTypes.object.isRequired,\n  properties: PropTypes.object.isRequired,\n  isRedaction: PropTypes.bool,\n  isFreeText: PropTypes.bool,\n  isEllipse: PropTypes.bool,\n  hasBackToMenu: PropTypes.bool,\n  onBackToMenu: PropTypes.func,\n};\n\nconst AnnotationStylePopup = (props) => {\n  const {\n    annotations,\n    style,\n    isRedaction,\n    isFreeText,\n    isEllipse,\n    isMeasure,\n    colorMapKey,\n    showLineStyleOptions,\n    properties,\n    hideSnapModeCheckbox,\n    onResize,\n    hasBackToMenu,\n    onBackToMenu\n  } = props;\n\n  const [\n    isDisabled,\n    isToolDefaultStyleUpdateFromAnnotationPopupEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.isElementDisabled(state, DataElements.ANNOTATION_STYLE_POPUP),\n    selectors.isToolDefaultStyleUpdateFromAnnotationPopupEnabled(state),\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const [isAutoSizeFont, setAutoSizeFont] = useState(properties.isAutoSizeFont);\n\n  const adjustFreeTextBoundingBox = (annotation) => {\n    const { FreeTextAnnotation } = window.Core.Annotations;\n    if (annotation instanceof FreeTextAnnotation && annotation.getAutoSizeType() !== FreeTextAnnotation.AutoSizeTypes.NONE) {\n      const doc = core.getDocument(activeDocumentViewerKey);\n      const pageNumber = annotation['PageNumber'];\n      const pageInfo = doc.getPageInfo(pageNumber);\n      const pageMatrix = doc.getPageMatrix(pageNumber);\n      const pageRotation = doc.getPageRotation(pageNumber);\n      annotation.fitText(pageInfo, pageMatrix, pageRotation);\n    }\n  };\n\n  const handleSliderChange = (property, value) => {\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotations.forEach((annotation) => {\n      annotation[property] = value;\n      annotationManager.redrawAnnotation(annotation);\n    });\n  };\n\n  const handlePropertyChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n      if (property === 'FontSize' || property === 'Font') {\n        adjustFreeTextBoundingBox(annotation);\n      }\n    });\n  };\n\n  const handleStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.setAnnotationStyles(annotation, {\n        [property]: value,\n      }, activeDocumentViewerKey);\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, property, value);\n      }\n    });\n  };\n\n  const handleRichTextStyleChange = (property, value) => {\n    annotations.forEach((annotation) => {\n      core.updateAnnotationRichTextStyle(annotation, { [property]: value }, activeDocumentViewerKey);\n    });\n  };\n\n  const handleLineStyleChange = (section, value) => {\n    annotations.forEach((annotation) => {\n      let lineStyle = '';\n      if (section === 'start') {\n        annotation.setStartStyle(value);\n        lineStyle = 'StartLineStyle';\n      } else if (section === 'end') {\n        annotation.setEndStyle(value);\n        lineStyle = 'EndLineStyle';\n      } else if (section === 'middle') {\n        const dashes = value.split(',');\n        const style = dashes.shift();\n        annotation['Style'] = style;\n        annotation['Dashes'] = dashes;\n        lineStyle = 'StrokeStyle';\n      }\n\n      if (isToolDefaultStyleUpdateFromAnnotationPopupEnabled) {\n        setToolStyles(annotation.ToolName, lineStyle, value);\n      }\n\n      core.getAnnotationManager(activeDocumentViewerKey).redrawAnnotation(annotation);\n    });\n\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [annotations, 'modify', {}]);\n  };\n\n  const handleClick = (e) => {\n    if (isMobile() && e.target === e.currentTarget) {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_POPUP));\n    }\n  };\n\n  const handleResize = () => {\n    onResize && onResize();\n  };\n\n  const className = getClassName('Popup AnnotationStylePopup', props);\n\n  return isDisabled ? null : (\n    <Measure\n      onResize={handleResize}\n    >\n      {({ measureRef }) => (\n        <div\n          className={className}\n          data-element={DataElements.ANNOTATION_STYLE_POPUP}\n          onClick={handleClick}\n          ref={measureRef}\n        >\n          {hasBackToMenu &&\n            <div\n              className=\"back-to-menu-container\"\n              data-element={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON_CONTAINER}\n            >\n              <ActionButton\n                className=\"back-to-menu-button\"\n                dataElement={DataElements.ANNOTATION_STYLE_POPUP_BACK_BUTTON}\n                label={t('action.backToMenu')}\n                img=\"icon-chevron-left\"\n                onClick={onBackToMenu}\n              />\n            </div>\n          }\n          {/* Do not show checkbox for ellipse as snap mode does not exist for it */}\n          <StylePopup\n            hideSnapModeCheckbox={hideSnapModeCheckbox}\n            colorMapKey={colorMapKey}\n            style={style}\n            isFreeText={isFreeText}\n            isFreeTextAutoSize={isAutoSizeFont}\n            onFreeTextSizeToggle={() => handleFreeTextAutoSizeToggle(annotations[0], setAutoSizeFont, isAutoSizeFont)}\n            isEllipse={isEllipse}\n            isMeasure={isMeasure}\n            onStyleChange={handleStyleChange}\n            onSliderChange={handleSliderChange}\n            onPropertyChange={handlePropertyChange}\n            disableSeparator\n            properties={properties}\n            onRichTextStyleChange={handleRichTextStyleChange}\n            isRedaction={isRedaction}\n            showLineStyleOptions={showLineStyleOptions}\n            onLineStyleChange={handleLineStyleChange}\n          />\n        </div>\n      )}\n    </Measure>\n  );\n};\n\nAnnotationStylePopup.propTypes = propTypes;\n\nexport default AnnotationStylePopup;\n","import AnnotationStylePopup from './AnnotationStylePopup';\n\nexport default AnnotationStylePopup;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './ListSeparator.scss';\n\nconst propTypes = {\n  renderContent: PropTypes.func,\n  children: PropTypes.node,\n};\n\nconst ListSeparator = (function(props) {\n  const content = props.renderContent ? props.renderContent() : props.children;\n  return <div className=\"ListSeparator\">{content}</div>;\n});\n\nListSeparator.propTypes = propTypes;\n\nexport default React.memo(ListSeparator);\n","import ListSeparator from './ListSeparator';\n\nexport default ListSeparator;","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAreaMultiSelect.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.multi-reply-place-holder{height:100px}.reply-area-multi-container{border-top:1px solid var(--divider);display:flex;flex-direction:column;width:100%;position:absolute;bottom:0;z-index:100;background:var(--panel-background)}.reply-area-multi-container form{width:100%;display:flex}.reply-area-multi-container .reply-area-multi-header{display:flex;flex-direction:row;margin-left:16px;margin-top:28px;position:relative;justify-content:space-between}.reply-area-multi-container .reply-area-multi-header .title{font-size:13px;font-weight:700;display:flex;align-items:center}.reply-area-multi-container .reply-area-multi-header .close-icon-container{display:flex;align-items:center;padding-right:12px;cursor:pointer;position:relative;top:1px}.reply-area-multi-container .reply-area-multi-header .close-icon-container .close-icon{width:22px;height:22px}.reply-area-multi-container .reply-button-container{display:flex;justify-content:flex-end;flex-direction:column}.reply-area-multi-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-multi-container .reply-button,html:not([data-tabbing=true]) .reply-area-multi-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-multi-container .reply-button{width:80px}}.reply-area-multi-container .reply-button:hover{background:var(--blue-1)}.reply-area-multi-container .reply-button.disabled{cursor:not-allowed}.reply-area-multi-container .reply-area{position:relative;flex:1;margin:13px 17px 12px 16px;border-radius:4px;align-items:center;background:var(--component-background)}.reply-area-multi-container .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-multi-container .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-multi-container .add-attachment{display:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiStylePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".multi-style-container{border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);position:relative;right:20px;bottom:52px;pointer-events:auto}.multi-style-container *{box-sizing:border-box}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./MultiSelectControls.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".notes-panel-container .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}.notes-panel-container .buttons-container .Button{height:28px;width:28px}.notes-panel-container .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}.notes-panel-container .buttons-container .Button.active{background:var(--view-header-button-active)}.notes-panel-container .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}.notes-panel-container .multi-select-footer{background:var(--panel-background);display:flex;border-top:1px solid #cfd4da;margin-top:auto;height:72px;align-items:center;justify-content:center;position:absolute;bottom:0;width:100%;z-index:100}.notes-panel-container .multi-select-footer .close-container{margin-top:auto;right:10px;position:absolute}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanelHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".comments-counter{height:19px;margin-top:24px;margin-bottom:12px;font-size:16px}.comments-counter span{font-weight:700}[data-element=notesPanelHeader]{padding-right:18px}[data-element=notesPanelHeader] .buttons-container{display:flex;grid-column-gap:8px;-moz-column-gap:8px;column-gap:8px;justify-content:space-between}[data-element=notesPanelHeader] .buttons-container .Button{height:28px;width:28px;cursor:pointer}[data-element=notesPanelHeader] .buttons-container .Button:hover:enabled{background:var(--view-header-button-hover)}[data-element=notesPanelHeader] .buttons-container .Button.active{background:var(--view-header-button-active)}[data-element=notesPanelHeader] .buttons-container .Button.active .Icon{color:var(--view-header-icon-active-fill)}[data-element=notesPanelHeader] .sort-row{display:flex;justify-content:space-between;margin-bottom:16px}[data-element=notesPanelHeader] .sort-row .sort-container{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;align-self:flex-end}[data-element=notesPanelHeader] .sort-row .sort-container .label{margin-right:8px}[data-element=notesPanelHeader] .sort-row .sort-container .picked-option{text-align:left}[data-element=notesPanelHeader] .input-container{display:flex;position:relative;flex:1}[data-element=notesPanelHeader] .input-container input{width:100%;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding:4px 8px 6px}[data-element=notesPanelHeader] .input-container input:focus{outline:none;border:1px solid var(--focus-border)}[data-element=notesPanelHeader] .input-container input::-moz-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input:-ms-input-placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container input::placeholder{color:var(--placeholder-text)}[data-element=notesPanelHeader] .input-container .input-button{cursor:pointer;background:var(--primary-button);border-radius:4px;height:100%;width:40px;display:flex;align-items:center;justify-content:center;position:absolute;bottom:0;right:0}[data-element=notesPanelHeader] .input-container .input-button .Icon{width:20px;height:20px}[data-element=notesPanelHeader] .input-container .input-button svg{color:var(--primary-button-text)}[data-element=notesPanelHeader] .input-container .input-button:hover{background:var(--primary-button-hover)}[data-element=notesPanelHeader] .divider{height:1px;width:100%;background:var(--divider);margin:16px 0}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotesPanel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.notes-panel-container{z-index:65;background-color:var(--panel-background);display:flex;flex-direction:row;position:relative;overflow:hidden}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{z-index:95}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{z-index:95}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{border-left:1px solid var(--side-panel-border)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}.notes-panel-container .NotesPanel{padding-left:16px;padding-bottom:0;display:flex;flex-direction:column;position:relative;padding-top:16px}.notes-panel-container .NotesPanel .close-container{display:flex;align-items:center;justify-content:flex-end}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .close-container{height:64px;padding-right:12px}}.notes-panel-container .NotesPanel .close-container .close-icon-container{display:flex;align-items:center;cursor:pointer}.notes-panel-container .NotesPanel .close-container .close-icon-container .close-icon{width:24px;height:24px}.notes-panel-container .NotesPanel .multi-select-place-holder{height:72px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.notes-panel-container .NotesPanel .reply-area-container .reply-button{width:28px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel{width:100%;min-width:100%;padding-top:0}}.notes-panel-container .NotesPanel .no-annotations{display:flex;flex-direction:column;align-items:center}.notes-panel-container .NotesPanel .no-annotations .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-annotations .msg{line-height:15px;width:146px}}.notes-panel-container .NotesPanel .no-annotations .empty-icon,.notes-panel-container .NotesPanel .no-annotations .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-annotations .empty-icon *{fill:var(--gray-5);color:var(--gray-5)}.notes-panel-container .NotesPanel .normal-notes-container,.notes-panel-container .NotesPanel .virtualized-notes-container{margin-top:10px;flex:1;padding-right:18px}.notes-panel-container .NotesPanel .virtualized-notes-container{overflow:hidden}.notes-panel-container .NotesPanel .normal-notes-container{overflow:auto;overflow:overlay}.notes-panel-container .NotesPanel .note-wrapper:first-child .ListSeparator{margin-top:0;word-break:break-word}.notes-panel-container .NotesPanel .no-results{display:flex;flex-direction:column;align-items:center;padding-right:18px}.notes-panel-container .NotesPanel .no-results .msg{text-align:center}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .notes-panel-container .NotesPanel .no-results .msg{line-height:15px;width:92px}}.notes-panel-container .NotesPanel .no-results .empty-icon,.notes-panel-container .NotesPanel .no-results .empty-icon svg{width:65px;height:83px}.notes-panel-container .NotesPanel .no-results .empty-icon *{fill:var(--border);color:var(--border)}.flx-Panel-container .notes-panel-container{height:100%;padding:unset}.flx-Panel-container .notes-panel-container .NotesPanel{padding-left:0;padding-top:0;width:100%}.flx-Panel-container .notes-panel-container .NotesPanel [data-element=notesPanelHeader]{padding-right:0}.flx-Panel-container .notes-panel-container .NotesPanel .normal-notes-container,.flx-Panel-container .notes-panel-container .NotesPanel .virtualized-notes-container{padding-right:2px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useState, useEffect, useRef, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport Measure from 'react-measure';\nimport { CellMeasurer, CellMeasurerCache, List } from 'react-virtualized';\n\nconst propTypes = {\n  notes: PropTypes.array.isRequired,\n  children: PropTypes.func.isRequired,\n  onScroll: PropTypes.func.isRequired,\n  initialScrollTop: PropTypes.number.isRequired,\n  selectedIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n};\n\nconst cache = new CellMeasurerCache({ defaultHeight: 50, fixedWidth: true });\n\nconst VirtualizedList = React.forwardRef(\n  ({ notes, children, onScroll, initialScrollTop, selectedIndex, sortStrategy }, forwardedRef) => {\n    const listRef = useRef();\n    const [offset, setOffset] = useState(0);\n    const [dimension, setDimension] = useState({ width: 0, height: 0 });\n    let prevWindowHeight = window.innerHeight;\n\n    useImperativeHandle(forwardedRef, () => ({\n      scrollToPosition: (scrollTop) => {\n        listRef.current.scrollToPosition(scrollTop);\n      },\n      scrollToRow: (index) => {\n        listRef.current.scrollToRow(index);\n      },\n    }));\n\n    useEffect(() => {\n      listRef.current.scrollToPosition(initialScrollTop);\n    }, [initialScrollTop]);\n\n    useEffect(() => {\n      cache.clearAll();\n      listRef?.current?.measureAllRows();\n\n      if (selectedIndex !== -1) {\n        listRef.current?.scrollToRow(selectedIndex);\n      }\n    }, [selectedIndex]);\n\n    useEffect(() => {\n      cache.clearAll();\n      listRef?.current?.measureAllRows();\n      listRef?.current?.forceUpdateGrid();\n    }, [notes.length, sortStrategy]);\n\n    useEffect(() => {\n      const windowResizeHandler = () => {\n        const diff = window.innerHeight - prevWindowHeight;\n        if (diff) {\n          // List height never resizes down after exiting fullscreen\n          if (window.innerHeight < prevWindowHeight) {\n            setOffset(diff);\n          }\n          prevWindowHeight = window.innerHeight;\n        }\n      };\n      window.addEventListener('resize', windowResizeHandler);\n\n      return () => {\n        window.removeEventListener('resize', windowResizeHandler);\n      };\n    });\n\n    const _resize = (index) => {\n      cache.clear(index);\n      listRef.current?.recomputeRowHeights(index);\n    };\n\n    const handleScroll = ({ scrollTop }) => {\n      onScroll(scrollTop);\n    };\n\n    /* eslint-disable react/prop-types */\n    const rowRenderer = ({ index, key, parent, style }) => {\n      const currNote = notes[index];\n\n      // Padding added to the right since virtualized list lets it get cut off on the right\n      return (\n        <CellMeasurer\n          key={`${key}${currNote.Id}`}\n          cache={cache}\n          columnIndex={0}\n          parent={parent}\n          rowIndex={index}\n        >\n          {({ measure }) => (\n            <div style={{ ...style, paddingRight: '12px' }}>\n              {children(notes, index, () => {\n                _resize(index);\n                measure();\n              })}\n            </div>)}\n        </CellMeasurer>\n      );\n    };\n\n    return (\n      <Measure bounds offset onResize={({ bounds }) => {\n        setDimension({\n          ...bounds,\n          // Override height and compensate for extra size\n          height: bounds.height + offset * 2,\n        });\n        setOffset(0);\n      }}\n      >\n        {({ measureRef }) => (\n          <div ref={measureRef} className=\"virtualized-notes-container\">\n            <List\n              deferredMeasurementCache={cache}\n              style={{ outline: 'none' }}\n              height={dimension.height - offset}\n              width={dimension.width}\n              overscanRowCount={10}\n              ref={listRef}\n              rowCount={notes.length}\n              rowHeight={cache.rowHeight}\n              rowRenderer={rowRenderer}\n              onScroll={handleScroll}\n              aria-label='presentation'\n              role='presentation'\n            />\n          </div>\n        )}\n      </Measure>\n    );\n  },\n);\n\nVirtualizedList.displayName = 'VirtualizedList';\nVirtualizedList.propTypes = propTypes;\n\nexport default VirtualizedList;\n","import VirtualizedList from './VirtualizedList';\n\nexport default VirtualizedList;","import React, { useEffect, useRef, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  notes: PropTypes.array.isRequired,\n  children: PropTypes.func.isRequired,\n  onScroll: PropTypes.func.isRequired,\n  initialScrollTop: PropTypes.number.isRequired,\n};\n\nconst NormalList = React.forwardRef(\n  ({ notes, children, onScroll, initialScrollTop }, forwardedRef) => {\n    const listRef = useRef();\n\n    useImperativeHandle(forwardedRef, () => ({\n      scrollToPosition: (scrollTop) => {\n        listRef.current.scrollTop = scrollTop;\n      },\n      scrollToRow: (index) => {\n        const parent = listRef.current;\n        const child = parent.children[index];\n\n        const parentRect = parent.getBoundingClientRect();\n        const childRect = child.getBoundingClientRect();\n\n        const isViewable =\n          childRect.top >= parentRect.top &&\n          childRect.top <= parentRect.top + parent.clientHeight;\n        if (!isViewable) {\n          parent.scrollTop = childRect.top + parent.scrollTop - parentRect.top;\n        }\n      },\n    }));\n\n    useEffect(() => {\n      listRef.current.scrollTop = initialScrollTop;\n    }, [initialScrollTop]);\n\n    const handleScroll = (e) => {\n      onScroll(e.target.scrollTop);\n    };\n\n    return (\n      <div\n        ref={listRef}\n        className=\"normal-notes-container\"\n        onScroll={handleScroll}\n        role=\"list\"\n      >\n        {notes.map((currNote, index) => (\n          <React.Fragment key={`${index}_${currNote.Id}`}>\n            {children(notes, index)}\n          </React.Fragment>\n        ))}\n      </div>\n    );\n  },\n);\n\nNormalList.displayName = 'NormalList';\nNormalList.propTypes = propTypes;\n\nexport default NormalList;\n","import NormalList from './NormalList';\n\nexport default NormalList;","import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport NoteTextarea from 'components/NoteTextarea';\nimport classNames from 'classnames';\nimport core from 'core';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport selectors from 'selectors';\nimport Button from 'src/components/Button';\nimport Icon from 'components/Icon';\n\nimport './ReplyAreaMultiSelect.scss';\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotations, onSubmit, onClose }) => {\n  const [\n    isMentionEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getIsMentionEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n\n  const [pendingReply, setPendingReply] = useState('');\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n\n  useEffect(() => {\n    textareaRef.current.focus();\n  }, []);\n\n  const postReply = (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n    annotations.forEach((annotation) => {\n      if (isMentionEnabled) {\n        const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n        core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n        setAnnotationRichTextStyle(editor, replyAnnotation);\n      } else {\n        // TODO: This is bugged and does not work. createAnnotationReply\n        // does not return an annotation\n        const replyAnnotation = core.createAnnotationReply(annotation, replyText, activeDocumentViewerKey);\n        setAnnotationRichTextStyle(editor, replyAnnotation);\n      }\n    });\n\n    onSubmit();\n  };\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value);\n  };\n\n  return (\n    <div className='reply-area-multi-container'>\n      <div\n        className=\"reply-area-multi-header\"\n      >\n        <div className=\"title\">\n          {t('action.multiReplyAnnotations', { count: annotations.length })}\n        </div>\n        <div\n          className=\"close-icon-container\"\n          onClick={onClose}\n        >\n          <Icon\n            glyph=\"ic_close_black_24px\"\n            className=\"close-icon\"\n          />\n        </div>\n      </div>\n      <form onSubmit={postReply} >\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReply}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            isReply\n          />\n        </div>\n        <div className='reply-button-container'>\n          <Button\n            img=\"icon-post-reply\"\n            className={'reply-button'}\n            isSubmitType={true}\n          />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ReplyArea;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport getOverlayPositionBasedOn from 'helpers/getOverlayPositionBasedOn';\nimport PopupPortal from 'components/PopupPortal';\nimport AnnotationStylePopup from 'components/AnnotationStylePopup';\n\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport getAnnotationStyles from 'helpers/getAnnotationStyles';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport actions from 'actions';\nimport {\n  AnnotationStylePopupTabs,\n  updateAnnotationStylePopupTabs,\n  copyMapWithDataProperties,\n  getDataWithKey,\n} from 'constants/map';\n\n\nimport './MultiStylePopup.scss';\n\nconst MultiStylePopup = ({\n  annotations,\n  triggerElementName,\n  onClose = () => { },\n}) => {\n  const dispatch = useDispatch();\n  const popupRef = useRef();\n  const [styleTabs, setStyleTabs] = useState([]);\n  const [position, setPosition] = useState({ left: 'auto', right: 'auto', top: 'auto' });\n  const colorMapKey = 'MultiStyle';\n\n  useOnClickOutside(popupRef, (e) => {\n    const triggerElement = document.querySelector(`[data-element=${triggerElementName}]`);\n    const clickedTrigger = triggerElement.contains(e.target);\n    const warningModal = getOpenedWarningModal();\n    const colorPicker = getOpenedColorPicker();\n    const datePicker = getDatePicker();\n\n    if (!clickedTrigger && !warningModal && !colorPicker && !datePicker) {\n      // we only want to close the popup if we clicked outside and not on the trigger\n      onClose();\n    }\n  });\n\n  let style = {};\n  annotations.forEach((annotation) => {\n    style = { ...style, ...getAnnotationStyles(annotation) };\n  });\n  const freeTextAnnotation = annotations.find((annotation) => {\n    return (\n      annotation instanceof window.Core.Annotations.FreeTextAnnotation &&\n      (annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeText ||\n      annotation.getIntent() === window.Core.Annotations.FreeTextAnnotation.Intent.FreeTextCallout)\n    );\n  });\n  let properties = {};\n  if (freeTextAnnotation) {\n    const richTextStyles = freeTextAnnotation.getRichTextStyle();\n    properties = {\n      Font: freeTextAnnotation.Font,\n      FontSize: freeTextAnnotation.FontSize,\n      TextAlign: freeTextAnnotation.TextAlign,\n      TextVerticalAlign: freeTextAnnotation.TextVerticalAlign,\n      bold: richTextStyles?.[0]?.['font-weight'] === 'bold' ?? false,\n      italic: richTextStyles?.[0]?.['font-style'] === 'italic' ?? false,\n      underline: richTextStyles?.[0]?.['text-decoration']?.includes('underline') || richTextStyles?.[0]?.['text-decoration']?.includes('word'),\n      strikeout: richTextStyles?.[0]?.['text-decoration']?.includes('line-through') ?? false,\n    };\n  }\n\n  // Update available palettesfor MultiStyle annotation type in map\n  useEffect(() => {\n    const availablePalettes = [];\n    style['TextColor'] && availablePalettes.push(AnnotationStylePopupTabs.TEXT_COLOR);\n    style['StrokeColor'] && availablePalettes.push(AnnotationStylePopupTabs.STROKE_COLOR);\n    style['FillColor'] && availablePalettes.push(AnnotationStylePopupTabs.FILL_COLOR);\n\n    const didUpdate =\n      updateAnnotationStylePopupTabs(colorMapKey, availablePalettes, availablePalettes[0]);\n    if (didUpdate) {\n      const newColorMap = copyMapWithDataProperties('currentStyleTab', 'iconColor');\n      dispatch(actions.setColorMap(newColorMap));\n      const { styleTabs: _styleTabs } = getDataWithKey(colorMapKey);\n      setStyleTabs(_styleTabs);\n    }\n  }, [annotations]);\n\n  const updatePosition = () => {\n    const position = getOverlayPositionBasedOn(triggerElementName, popupRef);\n    setPosition(position);\n  };\n\n  // Have to wait until palettes are available before showing popup\n  if (styleTabs.length === 0) {\n    return null;\n  }\n\n  return (\n    <PopupPortal\n      id=\"multi-style-popup-portal\"\n      position={position}\n    >\n      <div\n        className='multi-style-container'\n        ref={popupRef}\n      >\n        <AnnotationStylePopup\n          annotations={annotations}\n          style={style}\n          isOpen\n          onResize={updatePosition}\n          isFreeText={!!freeTextAnnotation}\n          colorMapKey={colorMapKey}\n          properties={properties}\n          isRedaction={false}\n          isMeasure={false}\n          showLineStyleOptions={false}\n          hideSnapModeCheckbox={false}\n        />\n      </div>\n    </PopupPortal >\n  );\n};\n\nexport default MultiStylePopup;","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Icon from 'components/Icon';\nimport Button from 'components/Button';\nimport ReplyAreaMultiSelect from 'components/Note/ReplyArea/ReplyAreaMultiSelect';\nimport MultiStylePopup from 'components/NotesPanel/MultiStylePopup';\nimport NoteStatePopup from 'components/NoteState/NoteStatePopup';\nimport NoteContext from 'components/Note/Context';\n\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport DataElements from 'constants/dataElement';\nimport PropTypes from 'prop-types';\nimport actions from 'actions';\nimport classNames from 'classnames';\nimport core from 'core';\nimport selectors from 'selectors';\n\nimport './MultiSelectControls.scss';\n\nconst propTypes = {\n  showMultiReply: PropTypes.bool.isRequired,\n  setShowMultiReply: PropTypes.func.isRequired,\n  showMultiState: PropTypes.bool.isRequired,\n  setShowMultiState: PropTypes.func.isRequired,\n  showMultiStyle: PropTypes.bool.isRequired,\n  setShowMultiStyle: PropTypes.func.isRequired,\n  setMultiSelectMode: PropTypes.func.isRequired,\n  isMultiSelectedMap: PropTypes.object.isRequired,\n  setIsMultiSelectedMap: PropTypes.func.isRequired,\n  multiSelectedAnnotations: PropTypes.array.isRequired,\n};\n\nconst getParentAnnotations = (annotations, documentViewerKey = 1) => {\n  const annotSet = new Set();\n  annotations.forEach((annotation) => {\n    if (annotation.isGrouped()) {\n      const parentAnnotation = core.getAnnotationById(annotation['InReplyTo'], documentViewerKey);\n      if (parentAnnotation) {\n        annotSet.add(parentAnnotation);\n      }\n    } else {\n      annotSet.add(annotation);\n    }\n  });\n  return Array.from(annotSet);\n};\n\nconst MultiSelectControls = ({\n  showMultiReply,\n  setShowMultiReply,\n  showMultiState,\n  setShowMultiState,\n  showMultiStyle,\n  setShowMultiStyle,\n  setMultiSelectMode,\n  isMultiSelectedMap,\n  setIsMultiSelectedMap,\n  multiSelectedAnnotations,\n}) => {\n  const [\n    modifiableMultiSelectAnnotations,\n    setModfiableMultiSelectAnnotations,\n  ] = useState([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const [activeDocumentViewerKey, isDocumentReadOnly] = useSelector(\n    (state) => [\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.isDocumentReadOnly(state),\n    ],\n    shallowEqual,\n  );\n\n  useEffect(() => {\n    const onAnnotationChanged = (annotations, action) => {\n      if (action === 'delete') {\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\n        annotations.forEach((annot) => {\n          delete _isMultiSelectedMap[annot.Id];\n        });\n        setIsMultiSelectedMap(_isMultiSelectedMap);\n      } else if (action === 'modify') {\n        const _isMultiSelectedMap = { ...isMultiSelectedMap };\n        // update isMultiSelectedMap by looking at modified annots and\n        // their grouped annots\n        annotations.forEach((annot) => {\n          const groupedAnnots = core.getGroupAnnotations(annot, activeDocumentViewerKey);\n          const someAnnotInGroupIsSelected =\n            groupedAnnots.some((groupedAnnot) => isMultiSelectedMap[groupedAnnot.Id]);\n          if (someAnnotInGroupIsSelected) {\n            // select all annots in this group\n            groupedAnnots.forEach((groupAnnot) => {\n              _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\n            });\n          }\n        });\n\n        const originalKeys = Object.keys(isMultiSelectedMap);\n        const updatedKeys = Object.keys(isMultiSelectedMap);\n        const difference = originalKeys.filter((key) => !updatedKeys.includes(key));\n        if (difference.length > 0) {\n          // Only update if we have a difference to not cause re-renders and\n          // actions to not be dispatched if unneeded.\n          setIsMultiSelectedMap(_isMultiSelectedMap);\n        }\n      }\n    };\n\n    core.addEventListener('annotationChanged', onAnnotationChanged, undefined, activeDocumentViewerKey);\n    return () => {\n      core.removeEventListener('annotationChanged', onAnnotationChanged, activeDocumentViewerKey);\n    };\n  }, [isMultiSelectedMap, activeDocumentViewerKey]);\n\n  useEffect(() => {\n    return () => {\n      setShowMultiReply(false);\n      setIsMultiSelectedMap({});\n    };\n  }, []);\n\n  useEffect(() => {\n    const _modifiableMultiSelectAnnotations = multiSelectedAnnotations.filter((multiSelectedAnnot) => {\n      return core.canModify(multiSelectedAnnot, activeDocumentViewerKey);\n    });\n    setModfiableMultiSelectAnnotations(_modifiableMultiSelectAnnotations);\n  }, [multiSelectedAnnotations]);\n\n  const numberOfGroups = core.getNumberOfGroups(modifiableMultiSelectAnnotations, activeDocumentViewerKey);\n  const canGroup = numberOfGroups > 1;\n  const canUngroup = !canGroup && (modifiableMultiSelectAnnotations.length > 2 ||\n    (modifiableMultiSelectAnnotations.length > 0 && core.getGroupAnnotations(modifiableMultiSelectAnnotations[0], activeDocumentViewerKey).length > 1));\n\n  const handleStateChange = (newValue) => {\n    getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey).forEach((annot) => {\n      const stateAnnotation = createStateAnnotation(annot, newValue, activeDocumentViewerKey);\n      annot.addReply(stateAnnotation);\n      const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n      annotationManager.addAnnotation(stateAnnotation);\n      annotationManager.trigger('addReply', [stateAnnotation, annot, annotationManager.getRootAnnotation(annot)]);\n    });\n    setShowMultiState(false);\n  };\n\n  if (showMultiReply) {\n    return (\n      <NoteContext.Provider value={{\n        resize: () => {},\n      }}>\n        <ReplyAreaMultiSelect\n          annotations={getParentAnnotations(multiSelectedAnnotations, activeDocumentViewerKey)}\n          onSubmit={() => setShowMultiReply(false)}\n          onClose={() => setShowMultiReply(false)}\n        />\n      </NoteContext.Provider>\n    );\n  }\n\n  return (\n    <div className=\"multi-select-footer\">\n      <div className=\"buttons-container\">\n        <Button\n          dataElement={DataElements.NOTE_MULTI_REPLY_BUTTON}\n          disabled={isDocumentReadOnly || multiSelectedAnnotations.length === 0}\n          img=\"icon-header-chat-line\"\n          onClick={() => {\n            setShowMultiReply(true);\n          }}\n          title=\"action.comment\"\n        />\n        <Button\n          dataElement={DataElements.NOTE_MULTI_STATE_BUTTON}\n          className={classNames({\n            active: showMultiState,\n          })}\n          disabled={isDocumentReadOnly || modifiableMultiSelectAnnotations.length === 0}\n          img=\"icon-annotation-status-none\"\n          onClick={() => {\n            setShowMultiState(!showMultiState);\n          }}\n          title=\"option.notesOrder.status\"\n        />\n        {showMultiState &&\n          <NoteStatePopup\n            style={{\n              position: 'relative',\n              bottom: '52px',\n            }}\n            triggerElementName=\"multiStateButton\"\n            handleStateChange={handleStateChange}\n            onClose={() => {\n              setShowMultiState(false);\n            }}\n          />}\n        <Button\n          dataElement={DataElements.NOTE_MULTI_STYLE_BUTTON}\n          img=\"icon-menu-style-line\"\n          disabled={isDocumentReadOnly || modifiableMultiSelectAnnotations.length === 0}\n          onClick={() => {\n            setShowMultiStyle(!showMultiStyle);\n          }}\n          title=\"action.style\"\n        />\n        {showMultiStyle &&\n          <MultiStylePopup\n            annotations={modifiableMultiSelectAnnotations}\n            triggerElementName=\"multiStyleButton\"\n            onClose={() => {\n              setShowMultiStyle(false);\n            }}\n          />}\n        {!canUngroup &&\n          <Button\n            dataElement={DataElements.NOTE_MULTI_GROUP_BUTTON}\n            disabled={isDocumentReadOnly || !canGroup}\n            img=\"group-annotations-icon\"\n            onClick={() => {\n              core.groupAnnotations(multiSelectedAnnotations[0], multiSelectedAnnotations, activeDocumentViewerKey);\n            }}\n            title=\"action.group\"\n          />}\n        {canUngroup &&\n          <Button\n            dataElement={DataElements.NOTE_MULTI_UNGROUP_BUTTON}\n            img=\"ungroup-annotations-icon\"\n            onClick={() => {\n              core.ungroupAnnotations(multiSelectedAnnotations, activeDocumentViewerKey);\n            }}\n            title=\"action.ungroup\"\n          />}\n        <Button\n          dataElement={DataElements.NOTE_MULTI_DELETE_BUTTON}\n          disabled={isDocumentReadOnly || modifiableMultiSelectAnnotations.length === 0}\n          img=\"icon-delete-line\"\n          onClick={() => {\n            const title = t('warning.multiDeleteAnnotation.title');\n            const message = t('warning.multiDeleteAnnotation.message');\n            const confirmBtnText = t('action.delete');\n\n            const warning = {\n              title,\n              message,\n              confirmBtnText,\n              onConfirm: () => {\n                core.deleteAnnotations(modifiableMultiSelectAnnotations, undefined, activeDocumentViewerKey);\n              },\n            };\n            dispatch(actions.showWarningMessage(warning));\n          }}\n          title=\"action.delete\"\n        />\n      </div>\n      <div\n        className=\"close-container\"\n      >\n        <div\n          className=\"close-icon-container\"\n          onClick={() => {\n            setMultiSelectMode(false);\n          }}\n        >\n          <Icon\n            glyph=\"ic_close_black_24px\"\n            className=\"close-icon\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMultiSelectControls.propTypes = propTypes;\n\nexport default MultiSelectControls;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport debounce from 'lodash/debounce';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport classNames from 'classnames';\nimport core from 'core';\n\nimport Dropdown from 'components/Dropdown';\nimport Button from 'components/Button';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport CustomElement from 'components/CustomElement';\n\nimport Events from 'constants/events';\nimport { getSortStrategies } from 'constants/sortStrategies';\nimport DataElements from 'src/constants/dataElement';\n\nimport './NotesPanelHeader.scss';\n\nconst SORT_CONTAINER_ELEMENT = 'sortContainer';\n\nfunction NotesPanelHeader({\n  notes,\n  disableFilterAnnotation,\n  setSearchInputHandler,\n  isMultiSelectMode,\n  toggleMultiSelectMode,\n  isMultiSelectEnabled,\n}) {\n  const [\n    sortStrategy,\n    isSortContainerDisabled,\n    customHeaderOptions,\n    annotationFilters,\n  ] = useSelector(\n    (state) => [\n      selectors.getSortStrategy(state),\n      selectors.isElementDisabled(state, SORT_CONTAINER_ELEMENT),\n      selectors.getNotesPanelCustomHeaderOptions(state),\n      selectors.getAnnotationFilters(state)\n    ],\n    shallowEqual\n  );\n\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [filterEnabled, setFilterEnabled] = useState(false);\n\n  useEffect(() => {\n    // check if Redux filter state is enabled on mount and set filterEnabled to true\n    const { authorFilter, colorFilter, statusFilter, typeFilter } = annotationFilters;\n    if (authorFilter?.length > 0 || colorFilter?.length > 0 || statusFilter?.length > 0 || typeFilter?.length > 0) {\n      setFilterEnabled(true);\n    }\n\n    const toggleFilterStyle = (e) => {\n      const { types, authors, colors, statuses } = e.detail;\n      if (types.length > 0 || authors.length > 0 || colors.length > 0 || statuses.length > 0) {\n        setFilterEnabled(true);\n      } else {\n        setFilterEnabled(false);\n      }\n    };\n\n    window.addEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\n    return () => {\n      window.removeEventListener(Events.ANNOTATION_FILTER_CHANGED, toggleFilterStyle);\n    };\n  }, []);\n\n  const handleInputChange = (e) => {\n    _handleInputChange(e.target.value);\n  };\n\n  const _handleInputChange = debounce((value) => {\n    // this function is used to solve the issue with using synthetic event asynchronously.\n    // https://reactjs.org/docs/events.html#event-pooling\n    core.deselectAllAnnotations();\n    setSearchInputHandler(value);\n  }, 500);\n\n  const sortContainer = (\n    <div className=\"sort-container\" data-element={SORT_CONTAINER_ELEMENT}>\n      <div className=\"label\">{`${t('message.sortBy')}:`}</div>\n      <Dropdown\n        dataElement=\"notesOrderDropdown\"\n        disabled={notes.length === 0}\n        items={Object.keys(getSortStrategies())}\n        translationPrefix=\"option.notesOrder\"\n        currentSelectionKey={sortStrategy}\n        onClickItem={(strategy) => {\n          dispatch(actions.setNotesPanelSortStrategy(strategy));\n        }}\n      />\n    </div>\n  );\n\n  const originalHeaderElement = (\n    <DataElementWrapper\n      className=\"header\"\n      dataElement=\"notesPanelHeader\">\n\n      <DataElementWrapper\n        className=\"input-container\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.INPUT_CONTAINER}`}>\n        <input\n          type=\"text\"\n          placeholder={t('message.searchCommentsPlaceholder')}\n          aria-label={t('message.searchCommentsPlaceholder')}\n          onChange={handleInputChange}\n          id=\"NotesPanel__input\"\n        />\n      </DataElementWrapper>\n\n      <DataElementWrapper\n        className=\"comments-counter\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.COMMENTS_COUNTER}`}>\n        <span className='main-comment'>{t('component.notesPanel')}</span> {`(${notes.length})`}\n      </DataElementWrapper>\n\n      <DataElementWrapper\n        className=\"sort-row\"\n        dataElement={`${DataElements.NotesPanel.DefaultHeader.SORT_ROW}`}>\n        {(isSortContainerDisabled) ? <div className=\"sort-container\"></div> : sortContainer}\n        <div\n          className=\"buttons-container\"\n        >\n          {(!isMultiSelectEnabled) ? null :\n            <Button\n              dataElement={DataElements.NOTE_MULTI_SELECT_MODE_BUTTON}\n              className={classNames({\n                active: isMultiSelectMode,\n              })}\n              disabled={notes.length === 0}\n              img=\"icon-annotation-select-multiple\"\n              onClick={() => {\n                core.deselectAllAnnotations();\n                toggleMultiSelectMode();\n              }}\n              title={t('component.multiSelectButton')}\n            />\n          }\n          <Button\n            dataElement=\"filterAnnotationButton\"\n            className={classNames({\n              filterAnnotationButton: true,\n              active: filterEnabled\n            })}\n            disabled={disableFilterAnnotation}\n            img=\"icon-comments-filter\"\n            onClick={() => dispatch(actions.openElement('filterModal'))}\n            title={t('component.filter')}\n          />\n        </div>\n      </DataElementWrapper>\n    </DataElementWrapper>\n  );\n\n  return (\n    <>\n      {customHeaderOptions &&\n        <CustomElement\n          render={customHeaderOptions.render}\n          renderArguments={[notes]}\n        />\n      }\n\n      {(!customHeaderOptions || !customHeaderOptions.overwriteDefaultHeader) &&\n        originalHeaderElement\n      }\n    </>\n  );\n}\n\nexport default NotesPanelHeader;\n","import NotesPanelHeader from './NotesPanelHeader';\n\nexport default NotesPanelHeader;","import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport classNames from 'classnames';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport VirtualizedList from 'components/NotesPanel/VirtualizedList';\nimport NormalList from 'components/NotesPanel/NormalList';\nimport Note from 'components/Note';\nimport Icon from 'components/Icon';\nimport NoteContext from 'components/Note/Context';\nimport ListSeparator from 'components/ListSeparator';\nimport MultiSelectControls from 'components/NotesPanel/MultiSelectControls';\nimport CustomElement from 'components/CustomElement';\nimport NotesPanelHeader from 'components/NotesPanelHeader';\n\nimport DataElements from 'constants/dataElement';\n\nimport core from 'core';\nimport { getSortStrategies } from 'constants/sortStrategies';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobileSize } from 'helpers/getDeviceSize';\nimport { isIE } from 'helpers/device';\nimport ReplyAttachmentPicker from './ReplyAttachmentPicker';\n\nimport './NotesPanel.scss';\n\nconst NotesPanel = ({\n  currentLeftPanelWidth,\n  notes,\n  selectedNoteIds,\n  setSelectedNoteIds,\n  searchInput,\n  setSearchInput,\n  isMultiSelectMode,\n  setMultiSelectMode,\n  isMultiSelectedMap,\n  setIsMultiSelectedMap,\n  scrollToSelectedAnnot,\n  setScrollToSelectedAnnot,\n  isCustomPanel,\n  isCustomPanelOpen,\n  isLeftSide,\n}) => {\n  const [\n    sortStrategy,\n    isOpen,\n    isDisabled,\n    pageLabels,\n    customNoteFilter,\n    currentNotesPanelWidth,\n    notesInLeftPanel,\n    isDocumentReadOnly,\n    showAnnotationNumbering,\n    enableNotesPanelVirtualizedList,\n    isInDesktopOnlyMode,\n    customEmptyPanel,\n    isNotesPanelMultiSelectEnabled,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getSortStrategy(state),\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.isElementDisabled(state, DataElements.NOTES_PANEL),\n      selectors.getPageLabels(state),\n      selectors.getCustomNoteFilter(state),\n      selectors.getNotesPanelWidth(state),\n      selectors.getNotesInLeftPanel(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isAnnotationNumberingEnabled(state),\n      selectors.getEnableNotesPanelVirtualizedList(state),\n      selectors.isInDesktopOnlyMode(state),\n      selectors.getNotesPanelCustomEmptyPanel(state),\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const currentWidth = currentLeftPanelWidth || currentNotesPanelWidth;\n\n  const dispatch = useDispatch();\n\n  const isMobile = isMobileSize();\n\n\n  const [multiSelectedAnnotations, setMultiSelectedAnnotations] = useState([]);\n  const [showMultiReply, setShowMultiReply] = useState(false);\n  const [showMultiState, setShowMultiState] = useState(false);\n  const [showMultiStyle, setShowMultiStyle] = useState(false);\n\n  const [curAnnotId, setCurAnnotId] = useState(undefined);\n\n\n  const [t] = useTranslation();\n  const listRef = useRef();\n  // a ref that is used to keep track of the current scroll position\n  // when the number of notesToRender goes over/below the threshold, we will unmount the current list and mount the other one\n  // this will result in losing the scroll position and we will use this ref to recover\n  const scrollTopRef = useRef(0);\n  const VIRTUALIZATION_THRESHOLD = enableNotesPanelVirtualizedList ? (isIE ? 25 : 100) : Infinity;\n\n\n  useEffect(() => {\n    const onAnnotationNumberingUpdated = (isEnabled) => {\n      dispatch(actions.setAnnotationNumbering(isEnabled));\n    };\n    const onAnnotationSelected = (annotations, action) => {\n      if (action === 'selected') {\n        setCurAnnotId(annotations[0].Id);\n      }\n    };\n\n    core.addEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\n    core.addEventListener('annotationSelected', onAnnotationSelected);\n\n    return () => {\n      core.removeEventListener('annotationNumberingUpdated', onAnnotationNumberingUpdated);\n      core.removeEventListener('annotationSelected', onAnnotationSelected);\n    };\n  }, []);\n\n  let singleSelectedNoteIndex = -1;\n\n  const handleScroll = (scrollTop) => {\n    if (scrollTop) {\n      scrollTopRef.current = scrollTop;\n    }\n    dispatch(actions.closeElement('annotationNoteConnectorLine'));\n  };\n\n  const filterNotesWithSearch = (note) => {\n    const content = note.getContents();\n    const authorName = core.getDisplayAuthor(note['Author']);\n    const annotationPreview = note.getCustomData('trn-annot-preview');\n\n    // didn't use regex here because the search input may form an invalid regex, e.g. *\n    return (\n      content?.toLowerCase().includes(searchInput.toLowerCase()) ||\n      authorName?.toLowerCase().includes(searchInput.toLowerCase()) ||\n      annotationPreview?.toLowerCase().includes(searchInput.toLowerCase())\n    );\n  };\n\n  const filterNote = (note) => {\n    let shouldRender = true;\n\n    if (customNoteFilter) {\n      shouldRender = shouldRender && customNoteFilter(note);\n    }\n\n    if (searchInput) {\n      const replies = note.getReplies();\n      // reply is also a kind of annotation\n      // https://docs.apryse.com/api/web/Core.AnnotationManager.html#createAnnotationReply__anchor\n      const noteAndReplies = [note, ...replies];\n\n      shouldRender = shouldRender && noteAndReplies.some(filterNotesWithSearch);\n    }\n    return shouldRender;\n  };\n\n  const notesToRender = getSortStrategies()[sortStrategy].getSortedNotes(notes).filter(filterNote);\n\n  useEffect(() => {\n    if (Object.keys(selectedNoteIds).length && singleSelectedNoteIndex !== -1) {\n      setTimeout(() => {\n        // wait for the previous selected annotation to resize() after closing before scrolling to the newly selected one\n        listRef.current?.scrollToRow(singleSelectedNoteIndex);\n      }, 0);\n    }\n  }, [selectedNoteIds]);\n\n  // expand a reply note when search content is match\n  const onlyReplyContainsSearchInput = (currNote) => {\n    if (Object.keys(selectedNoteIds).length) {\n      return false;\n    }\n    return (\n      searchInput &&\n      notesToRender\n        .filter((note) => {\n          return note.getReplies().some(filterNotesWithSearch);\n        })\n        .some((replies) => replies.Id === currNote.Id)\n    );\n  };\n\n  const [pendingEditTextMap, setPendingEditTextMap] = useState({});\n  const setPendingEditText = useCallback(\n    (pendingText, annotationID) => {\n      setPendingEditTextMap((map) => ({\n        ...map,\n        [annotationID]: pendingText,\n      }));\n    },\n    [setPendingEditTextMap],\n  );\n\n  const [pendingReplyMap, setPendingReplyMap] = useState({});\n  const setPendingReply = useCallback(\n    (pendingReply, annotationID) => {\n      setPendingReplyMap((map) => ({\n        ...map,\n        [annotationID]: pendingReply,\n      }));\n    },\n    [setPendingReplyMap],\n  );\n\n  const [pendingAttachmentMap, setPendingAttachmentMap] = useState({});\n  const addAttachments = (annotationID, attachments) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [...(map[annotationID] || []), ...attachments],\n    }));\n  };\n  const clearAttachments = (annotationID) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [],\n    }));\n  };\n  const deleteAttachment = (annotationID, attachment) => {\n    const attachmentList = pendingAttachmentMap[annotationID];\n    if (attachmentList?.length > 0) {\n      const index = attachmentList.indexOf(attachment);\n      if (index > -1) {\n        attachmentList.splice(index, 1);\n        setPendingAttachmentMap((map) => ({\n          ...map,\n          [annotationID]: [...attachmentList],\n        }));\n      }\n    }\n  };\n\n  useEffect(() => {\n    setMultiSelectedAnnotations(Object.values(isMultiSelectedMap));\n  }, [isMultiSelectedMap]);\n\n  const toggleMultiSelectMode = () => {\n    if (isMultiSelectMode) {\n      setMultiSelectMode(false);\n    } else {\n      setMultiSelectMode(true);\n    }\n  };\n\n  const renderChild = (\n    notes,\n    index,\n    // when we are virtualizing the notes, all of them will be absolutely positioned\n    // this function needs to be called by a Note component whenever its height changes\n    // to clear the cache(used by react-virtualized) and recompute the height so that each note\n    // can have the correct position\n    resize = () => {},\n  ) => {\n    let listSeparator = null;\n    const { shouldRenderSeparator, getSeparatorContent } = getSortStrategies()[sortStrategy];\n    const prevNote = index === 0 ? null : notes[index - 1];\n    const currNote = notes[index];\n\n    if (shouldRenderSeparator && getSeparatorContent && (!prevNote || shouldRenderSeparator(prevNote, currNote))) {\n      listSeparator = <ListSeparator renderContent={() => getSeparatorContent(prevNote, currNote, { pageLabels })} />;\n    }\n\n    // Collapse an expanded note when the top non-reply NoteContent is clicked\n    const handleNoteClicked = () => {\n      if (!isMultiSelectMode && selectedNoteIds[currNote.Id]) {\n        setSelectedNoteIds((currIds) => {\n          const clone = { ...currIds };\n          delete clone[currNote.Id];\n          return clone;\n        });\n        core.deselectAnnotation(currNote, activeDocumentViewerKey);\n      }\n    };\n\n    // can potentially optimize this a bit since a new reference will cause consumers to rerender\n    const contextValue = {\n      searchInput,\n      resize,\n      isSelected: selectedNoteIds[currNote.Id],\n      isContentEditable: core.canModifyContents(currNote, activeDocumentViewerKey) && !currNote.getContents(),\n      pendingEditTextMap,\n      setPendingEditText,\n      pendingReplyMap,\n      setPendingReply,\n      isDocumentReadOnly,\n      onTopNoteContentClicked: handleNoteClicked,\n      isExpandedFromSearch: onlyReplyContainsSearchInput(currNote),\n      scrollToSelectedAnnot,\n      sortStrategy,\n      showAnnotationNumbering,\n      setCurAnnotId,\n      pendingAttachmentMap,\n      clearAttachments,\n      deleteAttachment,\n      addAttachments,\n      documentViewerKey: activeDocumentViewerKey,\n    };\n\n    if (index === singleSelectedNoteIndex) {\n      setTimeout(() => {\n        setScrollToSelectedAnnot(false);\n        // open the 'annotationNoteConnectorLine' since the note it's pointing to is being rendered\n        dispatch(actions.openElement('annotationNoteConnectorLine'));\n      }, 0);\n    }\n\n    return (\n      // unfortunately we need to use an actual div instead of React.Fragment here so that we can pass the correct index to scrollToRow\n      // if this is a fragment then the listSeparator is rendered as a separate child, which means\n      // singleSelectedNoteIndex might not be the index of the selected note among all the child elements of the notes panel\n      <div role=\"listitem\" className=\"note-wrapper\">\n        {listSeparator}\n        <NoteContext.Provider value={contextValue}>\n          <Note\n            isCustomPanelOpen={isCustomPanelOpen}\n            shouldHideConnectorLine={isLeftSide}\n            annotation={currNote}\n            isMultiSelected={!!isMultiSelectedMap[currNote.Id]}\n            isMultiSelectMode={isMultiSelectMode}\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\n            isInNotesPanel\n            handleMultiSelect={(checked) => {\n              if (checked) {\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\n                groupAnnots.forEach((groupAnnot) => {\n                  _isMultiSelectedMap[groupAnnot.Id] = groupAnnot;\n                });\n                setIsMultiSelectedMap(_isMultiSelectedMap);\n                core.selectAnnotations(groupAnnots);\n              } else {\n                const _isMultiSelectedMap = { ...isMultiSelectedMap };\n                const groupAnnots = core.getGroupAnnotations(currNote, activeDocumentViewerKey);\n                groupAnnots.forEach((groupAnnot) => {\n                  delete _isMultiSelectedMap[groupAnnot.Id];\n                });\n                setIsMultiSelectedMap(_isMultiSelectedMap);\n                core.deselectAnnotations([currNote, ...groupAnnots]);\n              }\n            }}\n          />\n        </NoteContext.Provider>\n      </div>\n    );\n  };\n\n  const NoResults = (\n    <div className=\"no-results\">\n      <div>\n        <Icon className=\"empty-icon\" glyph=\"illustration - empty state - outlines\" />\n      </div>\n      <div className=\"msg\">{t('message.noResults')}</div>\n    </div>\n  );\n\n  const NoAnnotationsGlyph =\n    customEmptyPanel && customEmptyPanel.icon ? customEmptyPanel.icon : 'illustration - empty state - outlines';\n  const NoAnnotationsMessage =\n    customEmptyPanel && customEmptyPanel.message ? customEmptyPanel.message : t('message.noAnnotations');\n  const NoAnnotationsReadOnlyMessage =\n    customEmptyPanel && customEmptyPanel.readOnlyMessage\n      ? customEmptyPanel.readOnlyMessage\n      : t('message.noAnnotationsReadOnly');\n  const shouldRenderNoAnnotationsIcon = (customEmptyPanel && !customEmptyPanel.hideIcon) || !customEmptyPanel;\n  const shouldRenderCustomEmptyPanel = customEmptyPanel && customEmptyPanel.render;\n\n  const NoAnnotations = (\n    <div className=\"no-annotations\">\n      {shouldRenderCustomEmptyPanel ? (\n        <CustomElement render={customEmptyPanel.render} />\n      ) : (\n        <>\n          {shouldRenderNoAnnotationsIcon && (\n            <div>\n              <Icon className=\"empty-icon\" glyph={NoAnnotationsGlyph} />\n            </div>\n          )}\n          <div className=\"msg\">{isDocumentReadOnly ? NoAnnotationsReadOnlyMessage : NoAnnotationsMessage}</div>\n        </>\n      )}\n    </div>\n  );\n\n  const MultiSelectPlaceHolder = <div className=\"multi-select-place-holder\" />;\n\n  const MultiReplyPlaceHolder = <div className=\"multi-reply-place-holder\" />;\n\n  // keep track of the index of the single selected note in the sorted and filtered list\n  // in order to scroll it into view in this render effect\n  const ids = Object.keys(selectedNoteIds);\n  if (ids.length === 1) {\n    singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === ids[0]);\n  } else if (ids.length) {\n    // when selecting annotations that are grouped together, scroll to parent annotation that is in \"notesToRender\"\n    // selectedNoteIds will have every ID in the group, while only the parent is in notesToRender\n    const existingSelectedNotes = notesToRender.filter((note) => selectedNoteIds[note.Id]);\n\n    if (existingSelectedNotes.length) {\n      singleSelectedNoteIndex = notesToRender.findIndex((note) => note.Id === curAnnotId);\n    }\n  }\n\n  let style = {};\n  if (!isCustomPanel && (isInDesktopOnlyMode || !isMobile)) {\n    style = { width: `${currentWidth}px`, minWidth: `${currentWidth}px` };\n  }\n\n  const showNotePanel = !isDisabled && (isOpen || notesInLeftPanel || isCustomPanel);\n\n  return !showNotePanel ? null : (\n    <div className=\"notes-panel-container\">\n      <div\n        className={classNames({\n          Panel: true,\n          NotesPanel: true,\n        })}\n        style={style}\n        data-element=\"notesPanel\"\n        onMouseUp={() => core.deselectAllAnnotations}\n      >\n        {!isInDesktopOnlyMode && isMobile && !notesInLeftPanel && (\n          <div className=\"close-container\">\n            <div\n              className=\"close-icon-container\"\n              onClick={() => {\n                dispatch(actions.closeElements([DataElements.NOTES_PANEL]));\n              }}\n            >\n              <Icon glyph=\"ic_close_black_24px\" className=\"close-icon\" />\n            </div>\n          </div>\n        )}\n        <React.Fragment>\n          <NotesPanelHeader\n            notes={notesToRender}\n            disableFilterAnnotation={notes.length === 0}\n            setSearchInputHandler={setSearchInput}\n            isMultiSelectMode={isMultiSelectMode}\n            toggleMultiSelectMode={toggleMultiSelectMode}\n            isMultiSelectEnabled={isNotesPanelMultiSelectEnabled}\n          />\n          {notesToRender.length === 0 ? (\n            notes.length === 0 ? (\n              NoAnnotations\n            ) : (\n              NoResults\n            )\n          ) : notesToRender.length <= VIRTUALIZATION_THRESHOLD ? (\n            <NormalList\n              ref={listRef}\n              notes={notesToRender}\n              onScroll={handleScroll}\n              initialScrollTop={scrollTopRef.current}\n            >\n              {renderChild}\n            </NormalList>\n          ) : (\n            <VirtualizedList\n              ref={listRef}\n              notes={notesToRender}\n              sortStrategy={sortStrategy}\n              onScroll={handleScroll}\n              initialScrollTop={scrollTopRef.current}\n              selectedIndex={singleSelectedNoteIndex}\n            >\n              {renderChild}\n            </VirtualizedList>\n          )}\n          {/* These two placeholders need to exist so that MultiSelectControls can\n          be overlayed with position absolute and extend into the right panel while\n          still being able to not have any notes cut off */}\n          {isMultiSelectMode ? (showMultiReply ? MultiReplyPlaceHolder : MultiSelectPlaceHolder) : null}\n        </React.Fragment>\n      </div>\n      {isMultiSelectMode && (\n        <MultiSelectControls\n          showMultiReply={showMultiReply}\n          setShowMultiReply={setShowMultiReply}\n          showMultiState={showMultiState}\n          setShowMultiState={setShowMultiState}\n          showMultiStyle={showMultiStyle}\n          setShowMultiStyle={setShowMultiStyle}\n          setMultiSelectMode={setMultiSelectMode}\n          isMultiSelectedMap={isMultiSelectedMap}\n          setIsMultiSelectedMap={setIsMultiSelectedMap}\n          multiSelectedAnnotations={multiSelectedAnnotations}\n        />\n      )}\n      <ReplyAttachmentPicker annotationId={curAnnotId} addAttachments={addAttachments} />\n    </div>\n  );\n};\n\nexport default NotesPanel;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport core from 'core';\nimport NotesPanel from './NotesPanel';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotesPanelContainer(props) {\n  const isCustomPanelOpen = props.isCustomPanelOpen;\n  const [\n    isOpen,\n    notesInLeftPanel,\n    isNotesPanelMultiSelectEnabled,\n    isMultiViewerMode,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, 'notesPanel'),\n      selectors.getNotesInLeftPanel(state),\n      selectors.getIsNotesPanelMultiSelectEnabled(state),\n      selectors.isMultiViewerMode(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const [searchInput, setSearchInput] = useState('');\n  const [isMultiSelectMode, setMultiSelectMode] = useState(false);\n  const [scrollToSelectedAnnot, setScrollToSelectedAnnot] = useState(false);\n\n\n  const [noteMap, setNoteMap] = useState({ 1: [], 2: [] });\n  const setNotes = useCallback((notes, documentViewerKey = activeDocumentViewerKey) => {\n    noteMap[documentViewerKey] = notes;\n    setNoteMap({ ...noteMap });\n  }, [activeDocumentViewerKey, noteMap[1], noteMap[2], setNoteMap]);\n  const notes = noteMap[activeDocumentViewerKey] || noteMap[1];\n\n  // the object will be in a shape of { [note.Id]: true }\n  // use a map here instead of an array to achieve an O(1) time complexity for checking if a note is selected\n  const [selectedNoteIdsMap, setSelectedNoteIdsMap] = useState({ 1: {}, 2: {}, });\n  const setSelectedNoteIds = useCallback((selectedNoteIds, documentViewerKey = activeDocumentViewerKey) => {\n    selectedNoteIdsMap[documentViewerKey] = selectedNoteIds;\n    setSelectedNoteIdsMap({ ...selectedNoteIdsMap });\n  }, [activeDocumentViewerKey, selectedNoteIdsMap[1], selectedNoteIdsMap[2], setSelectedNoteIdsMap]);\n  const selectedNoteIds = selectedNoteIdsMap[activeDocumentViewerKey] || selectedNoteIdsMap[1];\n\n  const [isMultiSelectedViewerMap, setIsMultiSelectedViewerMap] = useState({ 1: {}, 2: {}, });\n  const setIsMultiSelectedMap = useCallback((isMultiSelected, documentViewerKey = activeDocumentViewerKey) => {\n    isMultiSelectedViewerMap[documentViewerKey] = isMultiSelected;\n    setIsMultiSelectedViewerMap({ ...isMultiSelectedViewerMap });\n  }, [activeDocumentViewerKey, isMultiSelectedViewerMap[1], isMultiSelectedViewerMap[2], setIsMultiSelectedViewerMap]);\n  const isMultiSelectedMap = isMultiSelectedViewerMap[activeDocumentViewerKey] || isMultiSelectedViewerMap[1];\n\n\n  useEffect(() => {\n    const onDocumentUnloaded = (documentViewerKey = activeDocumentViewerKey) => () => {\n      setNotes([], documentViewerKey);\n      setSelectedNoteIds({});\n      setSearchInput('');\n    };\n    const _setNotes = (documentViewerKey = activeDocumentViewerKey) => () => {\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\n\n      if (isMultiSelectMode && groupedAnnots.length === selectedAnnotations.length) {\n        setMultiSelectMode(false);\n      }\n\n      setNotes(\n        core\n          .getAnnotationsList(documentViewerKey)\n          .filter(\n            (annot) => annot.Listable &&\n              !annot.isReply() &&\n              !annot.Hidden &&\n              !annot.isGrouped() &&\n              annot.ToolName !== window.Core.Tools.ToolNames.CROP &&\n              !annot.isContentEditPlaceholder(),\n          ),\n        documentViewerKey,\n      );\n    };\n\n    const setDocumentUnloaded1 = onDocumentUnloaded(1);\n    core.addEventListener('documentUnloaded', setDocumentUnloaded1);\n    const setNotes1 = _setNotes(1);\n    core.addEventListener('annotationChanged', setNotes1);\n    core.addEventListener('annotationHidden', setNotes1);\n    core.addEventListener('updateAnnotationPermission', setNotes1);\n    setNotes1();\n\n    let setDocumentUnloaded2;\n    let setNotes2;\n    if (isMultiViewerMode) {\n      setDocumentUnloaded2 = onDocumentUnloaded(2);\n      core.addEventListener('documentUnloaded', setDocumentUnloaded2, undefined, 2);\n      setNotes2 = _setNotes(2);\n      core.addEventListener('annotationChanged', setNotes2, undefined, 2);\n      core.addEventListener('annotationHidden', setNotes2, undefined, 2);\n      core.addEventListener('updateAnnotationPermission', setNotes2, undefined, 2);\n      setNotes2();\n    }\n\n    return () => {\n      if (isMultiViewerMode) {\n        core.removeEventListener('documentUnloaded', setDocumentUnloaded2, 2);\n        core.removeEventListener('annotationChanged', setNotes2, 2);\n        core.removeEventListener('annotationHidden', setNotes2, 2);\n        core.removeEventListener('updateAnnotationPermission', setNotes2, 2);\n      }\n      core.removeEventListener('documentUnloaded', setDocumentUnloaded1);\n      core.removeEventListener('annotationChanged', setNotes1);\n      core.removeEventListener('annotationHidden', setNotes1);\n      core.removeEventListener('updateAnnotationPermission', setNotes1);\n    };\n  }, [isMultiViewerMode]);\n\n  useEffect(() => {\n    const onAnnotationSelected = (documentViewerKey = activeDocumentViewerKey) => (annotations, action) => {\n      const selectedAnnotations = core.getSelectedAnnotations(documentViewerKey);\n      const ids = {};\n      selectedAnnotations.forEach((annot) => {\n        ids[annot.Id] = true;\n      });\n      if (isCustomPanelOpen || isOpen || notesInLeftPanel) {\n        setSelectedNoteIds(ids, documentViewerKey);\n        setScrollToSelectedAnnot(true);\n      }\n      const groupedAnnots = getGroupedAnnots(selectedAnnotations);\n      const shouldDisplayMultiSelect = (selectedAnnotations.length > 1 && groupedAnnots.length !== selectedAnnotations.length) || isMultiSelectMode;\n\n      if (isNotesPanelMultiSelectEnabled\n        && action === 'selected'\n        && shouldDisplayMultiSelect) {\n        setMultiSelectMode(true);\n        selectedAnnotations.forEach((selectedAnnot) => {\n          isMultiSelectedMap[selectedAnnot.Id] = selectedAnnot;\n        });\n        setIsMultiSelectedMap({ ...isMultiSelectedMap }, documentViewerKey);\n      } else if (action === 'deselected') {\n        annotations.forEach((a) => {\n          delete isMultiSelectedMap[a.Id];\n        });\n        setIsMultiSelectedMap({ ...isMultiSelectedMap }, documentViewerKey);\n      }\n    };\n    const onAnnotationSelected1 = onAnnotationSelected(1);\n    onAnnotationSelected1();\n    core.addEventListener('annotationSelected', onAnnotationSelected1);\n    let onAnnotationSelected2;\n    if (isMultiViewerMode) {\n      onAnnotationSelected2 = onAnnotationSelected(2);\n      onAnnotationSelected2();\n      core.addEventListener('annotationSelected', onAnnotationSelected2, undefined, 2);\n    }\n    return () => {\n      core.removeEventListener('annotationSelected', onAnnotationSelected1);\n      if (isMultiViewerMode) {\n        core.removeEventListener('annotationSelected', onAnnotationSelected2, 2);\n      }\n    };\n  }, [isCustomPanelOpen, isOpen, notesInLeftPanel, isMultiSelectMode, isMultiSelectedMap, isNotesPanelMultiSelectEnabled, isMultiViewerMode]);\n\n  function getGroupedAnnots(selectedAnnotations) {\n    const mainAnnot = selectedAnnotations.find((annot) => annot.isGrouped());\n    const groupedAnnots = [];\n\n    // check if all selected annots are grouped annotations\n    if (mainAnnot) {\n      selectedAnnotations.forEach((annot) => {\n        if (mainAnnot['InReplyTo'] === annot['InReplyTo']\n          || mainAnnot['InReplyTo'] === annot['Id']) {\n          groupedAnnots.push(annot);\n        }\n      });\n    }\n    return groupedAnnots;\n  }\n\n  const passProps = {\n    notes,\n    setNotes,\n    getGroupedAnnots,\n    selectedNoteIds,\n    setSelectedNoteIds,\n    searchInput,\n    setSearchInput,\n    isMultiSelectMode,\n    setMultiSelectMode,\n    isMultiSelectedMap,\n    setIsMultiSelectedMap,\n    scrollToSelectedAnnot,\n    setScrollToSelectedAnnot,\n  };\n\n  // We wrap the element in a div so the tooltip works properly\n  return (\n    <NotesPanel {...props} {...passProps} />\n  );\n}\n\nexport default NotesPanelContainer;\n","import NotesPanel from './NotesPanelContainer';\n\nexport default NotesPanel;\n"],"sourceRoot":""}